<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=toni-moreno.github.io/snmpcollector.org/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=toni-moreno.github.io/snmpcollector.org/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/toni-moreno.github.io/snmpcollector.org/main.bb749f5013a81b9f8f0ae300ebeac84d81825e31211e2ee03ac9ca077a4afae7bd9c497d50a4c5e3a39f59434c1f6590080497647d4a5f647f1e76f4ef0298e8.css integrity="sha512-u3SfUBOoG5+PCuMA6+rITYGCXjEhHi7gOsnKB3pK+ue9nEl9UKTF46OfWUNMH2WQCASXZH1KX2R/Hnb07wKY6A==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Measurements - snmpcollector</title><meta name=description content="[Measurements](https://docs.influxdata.com/influxdb/v1.1/concepts/glossary/#measurement) are the basic Influxdb structure let us group series of the  same type/origin."><link rel=canonical href=toni-moreno.github.io/snmpcollector.org/docs/components/measurements/><meta name=twitter:card content="summary"><meta name=twitter:title content="Measurements"><meta name=twitter:description content="[Measurements](https://docs.influxdata.com/influxdb/v1.1/concepts/glossary/#measurement) are the basic Influxdb structure let us group series of the  same type/origin."><meta name=twitter:site content="@"><meta name=twitter:creator content="@"><meta property="og:title" content="Measurements"><meta property="og:description" content="[Measurements](https://docs.influxdata.com/influxdb/v1.1/concepts/glossary/#measurement) are the basic Influxdb structure let us group series of the  same type/origin."><meta property="og:type" content="article"><meta property="og:url" content="toni-moreno.github.io/snmpcollector.org/docs/components/measurements/"><meta property="article:published_time" content="2021-03-16T08:43:34+01:00"><meta property="article:modified_time" content="2021-03-16T08:43:34+01:00"><meta property="og:site_name" content="snmpcollector"><meta property="article:publisher" content="https://www.facebook.com/"><meta property="article:author" content="https://www.facebook.com/"><meta property="og:locale" content><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"toni-moreno.github.io\/snmpcollector.org"},{"@type":"ListItem","position":3,"name":"Docs","item":"toni-moreno.github.io\/snmpcollector.org\/docs\/"},{"@type":"ListItem","position":4,"name":"Components","item":"toni-moreno.github.io\/snmpcollector.org\/docs\/components\/"},{"@type":"ListItem","position":5,"name":"Measurements","item":"toni-moreno.github.io\/snmpcollector.org\/docs\/components\/measurements\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=toni-moreno.github.io/snmpcollector.org/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=toni-moreno.github.io/snmpcollector.org/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=toni-moreno.github.io/snmpcollector.org/favicon-16x16.png><link rel=manifest href=toni-moreno.github.io/snmpcollector.org/site.webmanifest></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org>snmpcollector</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/toni-moreno/snmpcollector><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class="nav-item active"><a class=nav-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/introduction/>Docs</a></li><li class=nav-item><a class=nav-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/introduction/>Download</a></li><li class=nav-item><a class=nav-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/introduction/>Community</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Prologue</h3><ul class=list-unstyled><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/introduction/>Introduction</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/quick-start/>Quick Start</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/commands/>Commands</a></li></ul><h3>Components</h3><ul class=list-unstyled><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/variable-catalog/>Variable Catalog</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/influx-servers/>InfluxDB Servers</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/oid-conditions/>OID Conditions</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/snmp-metrics/>SNMP Metrics</a></li><li><a class="docs-link active" href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/>Measurements</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/measurement-groups/>Measurement Groups</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/measurement-filters/>Measurement Filters</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/custom-filters/>Custom filters</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/snmp-devices/>SNMP Devices</a></li></ul><h3>Runtime</h3><ul class=list-unstyled><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/runtime/runtime/>Runtime</a></li></ul><h3>Data Management</h3><h3>Troubleshooting</h3><h3>Examples</h3><h3>Public Templates DB</h3><h3>Contributions</h3><h3>Changelog</h3><h3>help</h3><ul class=list-unstyled><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/help/how-to-update/>How to Update</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/help/troubleshooting/>Troubleshooting</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/help/faq/>FAQ</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#view>View</a></li><li><a href=#addedit-measurements>Add/Edit Measurements</a><ul><li><a href=#multi-edit-in-measurements>Multi edit in Measurements</a></li><li><a href=#configuration-parameters>Configuration Parameters</a></li></ul></li><li><a href=#notes>Notes</a><ul><li><a href=#indextagformat-definition>IndexTagFormat Definition</a></li></ul></li></ul><ul><li><a href=#example-of-indexed-with-multiple-indirect-tag>Example of Indexed with multiple indirect TAG</a></li><li><a href=#example-of-multiindex-ifmib>Example of MultiIndex: ifMIB</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Measurements</h1><p class=lead>[Measurements](https://docs.influxdata.com/influxdb/v1.1/concepts/glossary/#measurement) are the basic Influxdb structure let us group series of the same type/origin.</p><h1 id=measurements>Measurements</h1><p>When data are gathered from SNMP devices we can group them together as we wish when snmp data are scalar objects but is mandatory group snmp tabular objects in the same measurement.</p><h2 id=view>View<a href=#view class=anchor aria-hidden=true>#</a></h2><p>Configured <strong>Measurements</strong> are shown as table. This will appear every time you navigate from menu.</p><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/config_measurements_list.JPG><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/config_measurements_list_hu3d3982a9069d08030fb495d48265db1c_132706_600x400_fit_q75_box.JPG width=600 height=364 alt="SNMP Measurements List"></a><figcaption>SNMP Measurements List</figcaption></figure><h2 id=addedit-measurements>Add/Edit Measurements<a href=#addedit-measurements class=anchor aria-hidden=true>#</a></h2><ul><li><p><strong>Add</strong>: In the Measurements list click on new button <img src=/images/new_button.JPG alt="New Button" title="New Button"></p></li><li><p><strong>Edit</strong>: Click on Measurement edit&rsquo;s button <img src=/images/edit_button.JPG alt="Edit Button" title="Edit Button"></p></li></ul><p>The Create/Modify form will show up:</p><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/config_measurements_edit.JPG><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/config_measurements_edit_huf6a27cb785e9ef76c8fa56db66ba7964_58237_600x400_fit_q75_box.JPG width=429 height=400 alt="Create/Modify Measurements"></a><figcaption>Create/Modify Measurements</figcaption></figure><h3 id=multi-edit-in-measurements>Multi edit in Measurements<a href=#multi-edit-in-measurements class=anchor aria-hidden=true>#</a></h3><p>Multi edit has 2 options: Remove and Change property</p><ol><li><p>Remove: Allows to remove all the selected items</p></li><li><p>Change property: Allows to change the selected property of all the selected items. The properties are the same defined in the configuration.</p></li></ol><table><thead><tr><th>Property</th><th>Type</th><th>Options/Values</th></tr></thead><tbody><tr><td>IndexTag</td><td>Input</td><td>Tag Name (string)</td></tr><tr><td>IndexAsValue</td><td>Selector</td><td>True/False</td></tr></tbody></table><h3 id=configuration-parameters>Configuration Parameters<a href=#configuration-parameters class=anchor aria-hidden=true>#</a></h3><h4 id=core-settings>Core Settings<a href=#core-settings class=anchor aria-hidden=true>#</a></h4><table><thead><tr><th>Config Parameter</th><th>Description</th></tr></thead><tbody><tr><td>ID</td><td>Text String that uniquely identify the measurement recommended use the MIB Name prefixed/suffixed with some other string data we can easily identify (as manufacturer or model) that will help us to look in the Measurement config section, should be unique in the database</td></tr><tr><td>Name</td><td>This will be the Measurement name created in the Database when sending data, will let us to query data with &ldquo;SELECT * from <name>&mldr;&rdquo;</td></tr></tbody></table><h4 id=measurement-settings>Measurement Settings<a href=#measurement-settings class=anchor aria-hidden=true>#</a></h4><p>The behaviour of a measurement and its related metrics is given by the field <code>GetMode</code></p><h4 id=direct-value>Direct Value<a href=#direct-value class=anchor aria-hidden=true>#</a></h4><p>The <code>Value</code> type measurement doesn&rsquo;t go over any OID and it won&rsquo;t generate any tag to identify its metrics
Only non-indexed metrics should be added</p><table><thead><tr><th>Config Parameter</th><th>Description</th></tr></thead><tbody><tr><td>Fields</td><td>A list of MetricID which will be part of this measurement and what to do with the value. On <code>Value</code> measurements only metrics that are not-indexed should be added</td></tr><tr><td>Report Fields</td><td>All metrics can be configured to be sent or not to the backend:<br><ul><li><strong>Report always:</strong>in this mode the vale gathered for this Metric by the agent will be sent to the output db</li><li><strong>Never report:</strong>in this mode the value gathered for this metric will not be sent, it has sense when we need this value as a input parameter for computed metrics (metrics of type String-Eval)</li><li><strong>Report if non zero:</strong>in this mode the value is not sent if the result cooked or captured is <code>0</code></li><ul></td></tr></tbody></table><h4 id=indexed-with-direct-tag>Indexed with direct TAG<a href=#indexed-with-direct-tag class=anchor aria-hidden=true>#</a></h4><p>The <code>Indexed with direct Tag</code> measurement iterates over a table (<code>IndexOID</code>) and maps the index and result to be used as tags.
All attached metrics will be identified by that index, so all the metrics should be, or share, on the same table/index</p><table><thead><tr><th>Config Parameter</th><th>Description</th></tr></thead><tbody><tr><td>IndexOID</td><td>(only required for SNMP Table based data) The OID will be queried to get row Tag Values of the table. Only metrics that shares the same table/index should be added</td></tr><tr><td>IndexTag</td><td>(only required for SNMP Table based data) the tag name will be sent to distinguish among different rows</td></tr><tr><td>IndexTagFormat</td><td>(only required for SNMP Table based data) enable custom format for TAGS based on parameters from values and indexes from IndexOID (parameters as <code>$IDX1</code> and <code>$VAL1</code>)<br>Default format is <code>$VAL1</code>.<br>example: <code>[$IDX1]-$VAL1</code> will be sent as tag a &ldquo;[1]-eth0 (see IndexTagFormat below for more detailed info)&rdquo;</td></tr><tr><td>Fields</td><td>A list of MetricID which will be part of this measurement and what to do with the value. On <code>Value</code> measurements only metrics that are not-indexed should be added</td></tr><tr><td>Report Fields</td><td>All metrics can be configured to be sent or not to the backend:<br><ul><li><strong>Report always:</strong>in this mode the vale gathered for this Metric by the agent will be sent to the output db</li><li><strong>Never report:</strong>in this mode the value gathered for this metric will not be sent, it has sense when we need this value as a input parameter for computed metrics (metrics of type String-Eval)</li><li><strong>Report if non zero:</strong>in this mode the value is not sent if the result cooked or captured is <code>0</code></li><ul></td></tr></tbody></table><p>Example of valid tables:</p><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_indexed.jpg><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_indexed_hub1ef4fd42de0515f33fdbfaf2d44e0de_77025_600x400_fit_q75_box.jpg width=600 height=214 alt="Indexed Schema"></a><figcaption>Indexed Schema</figcaption></figure><pre><code class=language-bash>Measurement Config: 
Index OID: ifXTable.IfName - 1.3.6.1.2.1.31.1.1.1.1

Index Process:
1.3.6.1.2.1.31.1.1.1.1[.1] = `eth0`
1.3.6.1.2.1.31.1.1.1.1[.2] = `eth1`
1.3.6.1.2.1.31.1.1.1.1[.3] = `eth2`
1.3.6.1.2.1.31.1.1.1.1[.4] = `eth3`
1.3.6.1.2.1.31.1.1.1.1[.5] = `eth4`


Metrics:
ifXTable.ifHCInOctets - 1.3.6.1.2.1.31.1.1.1.6
1.3.6.1.2.1.31.1.1.1.6.[1:eth0] = val1
1.3.6.1.2.1.31.1.1.1.6.[2:eth1] = val2
1.3.6.1.2.1.31.1.1.1.6.[3:eth2] = val3
1.3.6.1.2.1.31.1.1.1.6.[4:eth3] = val4
1.3.6.1.2.1.31.1.1.1.6.[5:eth4] = val5

ifXTable.ifHCInOctets - 1.3.6.1.2.1.31.1.1.1.10
1.3.6.1.2.1.31.1.1.1.10.[1:eth0] = val1'
1.3.6.1.2.1.31.1.1.1.10.[2:eth1] = val2'
1.3.6.1.2.1.31.1.1.1.10.[3:eth2] = val3'
1.3.6.1.2.1.31.1.1.1.10.[4:eth3] = val4'
1.3.6.1.2.1.31.1.1.1.10.[5:eth4] = val5'
</code></pre><h4 id=indexed-with-indirect-tag>Indexed with indirect TAG<a href=#indexed-with-indirect-tag class=anchor aria-hidden=true>#</a></h4><p>The <code>Indexed with indirect TAG</code> measurements iterates over a table that has as value the related index to retrieve the tag (an indirect index). The related table will be retrieved and used as tags.
All attached metrics will be identified by the <code>IndexOID</code>, so all the metrics should be, or share, on the same table/index</p><table><thead><tr><th>Config Parameter</th><th>Description</th></tr></thead><tbody><tr><td>IndexOID</td><td>(only required for SNMP Table based data) The OID will be queried to get row Tag Values of the table. Only metrics that shares the same table/index should be added</td></tr><tr><td>IndexTag</td><td>(only required for SNMP Table based data) the tag name will be sent to distinguish among different rows</td></tr><tr><td>TagOID</td><td>(only required for SNMP indirect Tag based data) the OID will be queried to get TAG value names from other table.</td></tr><tr><td>IndexTagFormat</td><td>(only required for SNMP Table based data) enable custom format for TAGS based on parameters from values and indexes from IndexOID ( parameters as <code>$IDX1</code> and <code>$VAL1</code>) or TagOID when measurement is defined as indirect indexes defined ( parameters <code>$IDX2</code> and <code>$VAL2</code>).<br>Default format is <code>$VAL2</code>.<br>example: <code>[$IDX1]-$VAL1-$VAL2</code> will be sent as tag a <code>[1]-4-eth0</code> (see IndexTagFormat below for more detailed info)"</td></tr><tr><td>Fields</td><td>A list of MetricID which will be part of this measurement and what to do with the value. On <code>Value</code> measurements only metrics that are not-indexed should be added</td></tr><tr><td>Report Fields</td><td>All metrics can be configured to be sent or not to the backend:<br><ul><li><strong>Report always:</strong>in this mode the vale gathered for this Metric by the agent will be sent to the output db</li><li><strong>Never report:</strong>in this mode the value gathered for this metric will not be sent, it has sense when we need this value as a input parameter for computed metrics (metrics of type String-Eval)</li><li><strong>Report if non zero:</strong>in this mode the value is not sent if the result cooked or captured is <code>0</code></li><ul></td></tr></tbody></table><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_indexed_it.jpg><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_indexed_it_hu7415ec7d24bcf5094049bcef69649d57_115166_600x400_fit_q75_box.jpg width=600 height=227 alt="schema indexed it"></a><figcaption>schema indexed it</figcaption></figure><p>Example of valid tables:</p><pre><code class=language-bash>Measurement Config:
IndexOID: cpmCPUTotalPhysicalIndex - 1.3.6.1.4.1.9.9.109.1.1.1.1.2
TagOID: entPhysicalTable.entPhysicalName - 1.3.6.1.2.1.47.1.1.1.1.7

Index Process:

Index OID:
1.3.6.1.4.1.9.9.109.1.1.1.1.2[.1] = `7051`
1.3.6.1.4.1.9.9.109.1.1.1.1.2[.2] = `7052`
1.3.6.1.4.1.9.9.109.1.1.1.1.2[.3] = `7053`
1.3.6.1.4.1.9.9.109.1.1.1.1.2[.4] = `7054`
1.3.6.1.4.1.9.9.109.1.1.1.1.2[.5] = `7055`

1.3.6.1.2.1.47.1.1.1.1.7[.7051] = `cpu R0/0`
1.3.6.1.2.1.47.1.1.1.1.7[.7052] = `cpu R1/0`
1.3.6.1.2.1.47.1.1.1.1.7[.7053] = `cpu R2/0`
1.3.6.1.2.1.47.1.1.1.1.7[.7054] = `cpu R3/0`
1.3.6.1.2.1.47.1.1.1.1.7[.7055] = `cpu R4/0`

Index result:
[.1:cpu R0/0]
[.2:cpu R1/0]
[.3:cpu R2/0]
[.4:cpu R3/0]
[.5:cpu R4/0]

Metrics:

cpmCPUTotalTable.cpmCPUTotal1minRev - .1.3.6.1.4.1.9.9.109.1.1.1.1.7
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.[1:cpu R0/0] = val1
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.[2:cpu R1/0] = val2
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.[3:cpu R2/0] = val3
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.[4:cpu R3/0] = val4
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.[5:cpu R4/0] = val5

cpmCPUTotalTable.cpmCPUTotal5minRev - .1.3.6.1.4.1.9.9.109.1.1.1.1.8
.1.3.6.1.4.1.9.9.109.1.1.1.1.8.[1:cpu R0/0] = val1'
.1.3.6.1.4.1.9.9.109.1.1.1.1.8.[2:cpu R1/0] = val2'
.1.3.6.1.4.1.9.9.109.1.1.1.1.8.[3:cpu R2/0] = val3'
.1.3.6.1.4.1.9.9.109.1.1.1.1.8.[4:cpu R3/0] = val4'
.1.3.6.1.4.1.9.9.109.1.1.1.1.8.[5:cpu R4/0] = val5'
</code></pre><h4 id=indexed-with-multiple-indirect-tag>Indexed with multiple indirect TAG<a href=#indexed-with-multiple-indirect-tag class=anchor aria-hidden=true>#</a></h4><p>The <code>Indexed with multiple indirect TAG</code> measurements iterates N times over different tables to be retrieving the values that relates those tables until the tag is retrieved. The final related table will be retrieved and used as tags.
All attached metrics will be identified by the <code>IndexOID</code>, so all the metrics should be, or share, on the same table/index</p><table><thead><tr><th>Config Parameter</th><th>Description</th></tr></thead><tbody><tr><td>IndexOID</td><td>(only required for SNMP Table based data) The OID will be queried to get row Tag Values of the table. Only metrics that shares the same table/index should be added. The final index will contain the first queried indexes of the table</td></tr><tr><td>IndexTag</td><td>(only required for SNMP Table based data) the tag name will be sent to distinguish among different rows</td></tr><tr><td>Multiple TagOID</td><td>The multiples OIDs <strong>in order</strong> that will be queried to retrieve the tag value. The value will be extracted and formatted from the last queried table. Each <code>MultipleTagOID</code> has:<ul><li>TagOID: the OID will be queried to get the value to iterate over the next one</li><li>Index Format: the index format using <code>IndexTagFormat</code> syntax to allow match and keep iterating over the tables</li></ul>See examples section for an extended example of multiple tagoid. <strong>TagOIDs must be defined with order</strong></td></tr><tr><td>IndexTagFormat</td><td>(only required for SNMP Table based data) enable custom format for TAGS based on parameters from values and indexes from IndexOID ( parameters as <code>$IDX1</code> and <code>$VAL1</code>) or TagOID when measurement is defined as indirect indexes defined ( parameters <code>$IDX2</code> and <code>$VAL2</code>).<br>Default format is <code>$VAL2</code>.<br>example: <code>[$IDX1]-$VAL1-$VAL2</code> will be sent as tag a <code>[1]-4-eth0</code> (see IndexTagFormat below for more detailed info)"</td></tr><tr><td>Fields</td><td>A list of MetricID which will be part of this measurement and what to do with the value. On <code>Value</code> measurements only metrics that are not-indexed should be added</td></tr><tr><td>Report Fields</td><td>All metrics can be configured to be sent or not to the backend:<br><ul><li><strong>Report always:</strong>in this mode the vale gathered for this Metric by the agent will be sent to the output db</li><li><strong>Never report:</strong>in this mode the value gathered for this metric will not be sent, it has sense when we need this value as a input parameter for computed metrics (metrics of type String-Eval)</li><li><strong>Report if non zero:</strong>in this mode the value is not sent if the result cooked or captured is <code>0</code></li><ul></td></tr></tbody></table><p><strong>Mutiple TagOID manipulation</strong></p><p>Use the following button to add a new TagOID <img src=images/add_button.jpg alt=add_button title="Add button"></p><p>The following buttons allow to reorder and delete defined TagOIDs:</p><ul><li>Remove: <img src=images/remove_button.jpg alt=remove_button title="Remove button"></li><li>Promote: <img src=images/promote_button.jpg alt=promote_button title="Promote button"></li><li>Demote: <img src=images/demote_button.jpg alt=demote_button title="Demote button"></li></ul><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/multi_tagoid_example.jpg><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/multi_tagoid_example_hu0c3d9b0bd5c9f94896244fe94b9a99eb_28709_600x400_fit_q75_box.jpg width=600 height=138 alt="Multi Tag OID Example"></a><figcaption>Multi Tag OID Example</figcaption></figure><p><strong>Example of valid tables</strong>:</p><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_indexed_mit.jpg><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_indexed_mit_hu54fe98ea40114543c090995fdd54d58a_128013_600x400_fit_q75_box.jpg width=600 height=270 alt></a><figcaption></figcaption></figure><pre><code class=language-bash>Measurement Config:
IndexOID: indexedExample - 1.2.3.5.1
MultiTagOID
        0: - TagOID: example1 - 1.2.3.6.1
           - IndexFormat: &quot;&quot;

        1: - TagOID: example2 - 1.2.3.7.1
           - IndexFormat: &quot;&quot;

        2: - TagOID: example3 - 1.2.3.8.1
           - IndexFormat: &quot;&quot;


Index Process:
IndexOID - indexExample:

1.2.3.5.1[.1] = `7051`
1.2.3.5.1[.2] = `7052`
1.2.3.5.1[.3] = `7053`
1.2.3.5.1[.1] = `7054`
1.2.3.5.1[.2] = `7055`

TagOID 0 - example1

1.2.3.6.1[.7051] = `5001`
1.2.3.6.1[.7052] = `5002`
1.2.3.6.1[.7053] = `5003`
1.2.3.6.1[.7054] = `5004`
1.2.3.6.1[.7055] = `5005`

TagOID 1 - example2


1.2.3.7.1[.5001] = `601`
1.2.3.7.1[.5002] = `602`
1.2.3.7.1[.5003] = `603`
1.2.3.7.1[.5004] = `604`
1.2.3.7.1[.5005] = `605`

TagOID 2 - example3

1.2.3.8.1[.601] = `label0`
1.2.3.8.1[.602] = `label1`
1.2.3.8.1[.603] = `label2`
1.2.3.8.1[.604] = `label3`
1.2.3.8.1[.605] = `label4`

Index result:
[.1:label1]
[.2:label2]
[.3:label3]
[.4:label4]
[.5:label5]

Metric:

myMetricExample - 1.2.3.10.1

1.2.3.10.1.[1:label1] = val1
1.2.3.10.1.[2:label2] = val2
1.2.3.10.1.[3:label3] = val3
1.2.3.10.1.[4:label4] = val4
1.2.3.10.1.[5:label5] = val5

myMetricExample - 1.2.3.10.2

1.2.3.10.1.[1:label1] = val1'
1.2.3.10.1.[2:label2] = val2'
1.2.3.10.1.[3:label3] = val3'
1.2.3.10.1.[4:label4] = val4'
1.2.3.10.1.[5:label5] = val5'
</code></pre><h4 id=multiple-indexes>Multiple Indexes<a href=#multiple-indexes class=anchor aria-hidden=true>#</a></h4><p>The multiple indexes measurement allows the user to define different internal measurements that will create the map of index/value and can have dependencies to share its information between them
To see an example go to examples section</p><table><thead><tr><th>Config Parameter</th><th>Description</th></tr></thead><tbody><tr><td>Multi Index Measurements</td><td>The array of indexes measurements (direct, indirect and multi indirect) to create a complex index with tags embebbed</td></tr><tr><td>Result</td><td>Custom final index that will be used to match fields OIDs. The syntax is explained on section below</td></tr></tbody></table><p>Each <code>Multi Index Measurement</code> can be identified by its index (position in array)</p><p>The options available on the <code>Multi Index Measurements</code> are the same as defined above, depending of the type (<code>GetMode</code>) and the added one.</p><table><thead><tr><th>Config Parameter</th><th>Description</th></tr></thead><tbody><tr><td>Index Label</td><td>The internal name of the index</td></tr><tr><td>Index Description</td><td>The internal description of the index</td></tr><tr><td>Index Dependency</td><td>The dependency syntax to heridate tags from other index based on the following syntax: `IDX{<index>};DOT[NN:MM];FILL(XXX)</td></tr></tbody></table><p><strong>Mutiple Index manipulation</strong></p><p>Select the type of Index to add a new one, click on the following button to add a index <img src=images/add_button.jpg alt=add_button title="Add button">.
Available indexes are:</p><ul><li>(snmp Table) Indexed with direct TAG - indexed</li><li>(snmp Table) Indexed with indirect TAG - indexed_it</li><li>(snmp Table) Indexed with multi indirect tag - indexed_mit</li></ul><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/multi_index_options.jpg><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/multi_index_options_hud48e021442ae8a12d645247984cb0d89_23468_600x400_fit_q75_box.jpg width=600 height=104 alt="Multi Index Options"></a><figcaption>Multi Index Options</figcaption></figure><p>The following buttons allow to reorder and delete defined Multi Indexes:</p><ul><li>Remove: <img src=images/remove_button.jpg alt=remove_button title="Remove button"></li><li>Promote: <img src=images/promote_button.jpg alt=promote_button title="Promote button"></li><li>Demote: <img src=images/demote_button.jpg alt=demote_button title="Demote button"></li></ul><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/multi_index_example.jpg><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/multi_index_example_hu1e3a31dbc2ecdd480bb412afa2b55f40_51844_600x400_fit_q75_box.jpg width=600 height=168 alt="Multi Index Example"></a><figcaption>Multi Index Example</figcaption></figure><h4 id=multi-indexes-dependencies-and-result>Multi Indexes: Dependencies and Result<a href=#multi-indexes-dependencies-and-result class=anchor aria-hidden=true>#</a></h4><p>Multi Indexes allows the user to define several internal measurements to retrieve different tags and identifies and build a custom index to use it on metrics</p><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_indexed_multiple.jpg><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_indexed_multiple_hu70658924b1ddabc91aaa367e1aa4a03f_204852_600x400_fit_q75_box.jpg width=600 height=363 alt="Multiple Indexed Schema"></a><figcaption>Multiple Indexed Schema</figcaption></figure><p><strong>Dependency</strong></p><p>The dependency system between indexes allows the index to heridate already retrieved tags from other indexes and attach them to the current one
The syntax follows as:</p><pre><code>IDX{IM};DOT[XX:YY];SKIP
</code></pre><p>If the user defines only <code>IDX{IM}</code>, a FILL("") strategy will be applied with an entire index match</p><p>The <code>IDX{IM}</code> references to another index, based on its position of the array. Example:</p><pre><code class=language-bash>Index 0 |   [.1] = &quot;eth0&quot;
        |
        |   Index Tag = portName
--------
Index 1 |   [.1] = up
        |
        |   Index Tag = &quot;ifStatus&quot;
        |   Dependency IDX{0}
        |       --&gt; [.1] = &quot;up|eht0&quot; [ifStatus, portName]
</code></pre><p>The <code>DOT[XX:YY]</code> allows to change the check option to heridate tags from another index, this is useful if the tables doesn&rsquo;t have the same dimension, but it shares a common index. Example:</p><pre><code class=language-bash>Index 0 |   [.1] = &quot;eth0&quot;
        |
        |   Index Tag = &quot;portName&quot;
--------
Index 1 |   [.1.2] = up
        |
        |   Index Tag = &quot;ifStatus&quot;
        |   Dependency IDX{0};DOT[0:0];FILL()
        |       --&gt; [1.1] = &quot;up|eht0&quot; [ifStatus, portName]
</code></pre><p>The <code>FILL(XX)|SKIP</code> section defines the strategy of non match index:</p><ul><li>The <code>FILL(XX)</code> allows the user to define a custom tag value (<code>XXX</code>) if the dependency index has no the current index on it.</li><li>The <code>SKIP</code> deletes the current point if it doesn&rsquo;t match with the current index</li></ul><pre><code class=language-bash>Index 0 |   [.1] = &quot;eth0&quot;
---------
Index 1 |   [.1.1] = &quot;up&quot;
        |   [.2.1] = &quot;down&quot;
        |    
        |   Dependency: IDX{0};DOT[0:0];FILL(no value present)
        |       --&gt; [1.1] = &quot;up|eth0&quot; [ifStatus, portName]
        |       --&gt; [2.1] = &quot;down|no value present&quot;
</code></pre><pre><code>Index 0 |   [.1] = &quot;eth0&quot;
---------
Index 1 |   [.1.1] = &quot;up&quot;
        |   [.2.1] = &quot;down&quot;
        |
        |   Index Tag = &quot;ifStatus&quot;
        |   Dependency: IDX{0};DOT[0:0];SKIP
        |       --&gt; [1.1] = &quot;up|eth0&quot; [ifStatus, portName]
        |       &lt; DELETED [2.1]&gt;
</code></pre><p><strong>Result</strong></p><p>The result allows the user to create a totally custom index to be set up with attached fields.
The syntax follows as:</p><pre><code class=language-bash>IDX{IM};DOT[XX:YY]].&lt;number&gt;.&lt;IDX{IM};DOT[XX:YY]&gt;.&lt;...&gt;
</code></pre><p>If several IDX{IM} are found, it will create a big index using the scalar product between them heridating its tags</p><pre><code class=language-bash>Index 0 |   [.1] = &quot;eth0&quot;
        |   [.2] = &quot;eth1&quot;
        |   &lt;No dependency configured&gt;
---------
Index 1 |   [.3] = &quot;up&quot;
        |   [.4] = &quot;down&quot;
        |   &lt;No dependency configured&gt;
</code></pre><p>Result: <code>IDX{0}.IDX{1}</code></p><pre><code class=language-bash>Final Index | [.1.3] = &quot;eth0 | up&quot; 
            | [.1.4] = &quot;eth0 | down&quot;
            | [.2.3] = &quot;eth1 | up&quot;
            | [.2.4] = &quot;eth1 | down&quot;
</code></pre><p>Result: <code>.35.IDX{0}</code>:</p><pre><code class=language-bash>Final Index | [.35.1] = &quot;eth0&quot; 
            | [.35.1] = &quot;eth0&quot;
</code></pre><p>Result: <code>.35.IDX{1}.42</code>:</p><pre><code class=language-bash>Final Index | [.35.3.42] = &quot;up&quot; 
            | [.35.3.42] = &quot;down&quot;
</code></pre><h2 id=notes>Notes<a href=#notes class=anchor aria-hidden=true>#</a></h2><hr><h3 id=indextagformat-definition>IndexTagFormat Definition<a href=#indextagformat-definition class=anchor aria-hidden=true>#</a></h3><p>Enable user define a custom format for TAGS based on parameters from values and indexes from IndexOID or TagOID when measurement is defined as indirect indexes defined</p><p>Current variable inputs are only IDX1,VAL1 for direct indexed measurements and also IDX2,VAL2 when indirect indexed measurements.</p><p>To refer to these variables you could prepend a &lsquo;$&rsquo; to the variable name. If not definition exist,default format will be $VAL1 for direct indexed tables and $VAL2 for indirect indexed.</p><p>User can also take parts of each variable and apply transformation to get desired tag name by only use the following syntax</p><p><code>${VAR|SELECTOR|TRANSFORMATOR}</code></p><ul><li>VAR : the variable source, could be referenced several times in the same definition</li><li>SELECTOR: (by default the complete variable string) will select a bit of the VARIABLE, could be void string and the default value will be selected</li><li>TRANSFORMATOR (by default STRING) will apply a transformation on the previously selected bit of variable, could be void string and the default value will be selected</li></ul><p>$VAR will be equivalent to ${VAR|ALL|STRING} and also to ${VAR||}</p><h4 id=defined-selectors>Defined selectors<a href=#defined-selectors class=anchor aria-hidden=true>#</a></h4><ul><li><strong>ALL</strong>: complete string</li><li><strong>DOT[X:Y]</strong> : splits variable in an array of numbers and select only from the Xth to the Yth value, if X is omitted 0 will be chosen , if Y is omitted the last element on the splitted array will be chosen , in this mode DOT[0:] is equivalent to ALL. Counter always begins from 0 and both X and Y position will be included in the final selection</li><li><strong>REGEX/regex-expression/substitution-expression/</strong>: (since 0.7.3) Regex based Substitution pattern , each section is described in the following table</li></ul><table><thead><tr><th>regex section</th><th>meaning</th></tr></thead><tbody><tr><td><strong>regex-expresion</strong></td><td>could be any valid <a href=https://github.com/google/re2/wiki/Syntax>golang based regular expressions</a>. These regular expressions should have defined <a href=http://www.regular-expressions.info/refcapture.html>capturing groups</a><br><strong>Limitation</strong>: we can not use the &ldquo;|&rdquo; character because of this character would alter the <code>${VAR|SELECTOR|TRANSFORMATOR}${VAR|SELECTOR|TRANSFORMATOR}</code> struct. ( In the future would should improve syntax to avoid this limitation).</td></tr><tr><td><strong>substitution-expression</strong></td><td>any string containing valid <a href=http://www.regular-expressions.info/refcapture.html>back references</a> ie &ldquo;\1, \2, \3, &mldr;.. etc&rdquo;, for previously defined capturing groups</td></tr></tbody></table><h4 id=defined-transformations>Defined transformations<a href=#defined-transformations class=anchor aria-hidden=true>#</a></h4><ul><li><strong>STRING</strong> : return the selected value as an string</li><li><strong>DEC2ASCII</strong>: decode a dotted separated string with numbers as ascii bytes of a string (&ldquo;100.101.102.97.117.108.116&rdquo; will be &ldquo;default&rdquo;)</li><li><strong>MAC</strong>: decode a string as MAC address.( .1.3.6.1.2.1.10.127.1.3.3.1.2.89 = STRING: 60:2a:d0:40:42:1a ) will be decoded as MAC with this format <code>:${VAL1|DOT[0:]|MAC}</code> (>version 0.10)</li></ul><h4 id=example>Example<a href=#example class=anchor aria-hidden=true>#</a></h4><p>We can use inetCidrRouteIfIndex as example:
The following is the output from one row of the table with &ldquo;snmpwalk&rdquo;.</p><pre><code class=language-bash>IP-FORWARD-MIB::inetCidrRouteIfIndex.ipv4.&quot;0.0.0.0&quot;.0.2.0.0.ipv4.&quot;10.0.2.2&quot; = INTEGER: 2
</code></pre><p>equivalent to that.(I&rsquo;ve separated baseOID from Index)</p><pre><code class=language-bash>BaseOID[1.3.6.1.2.1.4.24.7.1.7]+ INDEX[.1.4.0.0.0.0.0.2.0.0.1.4.10.0.2.2] = INTEGER: 2
</code></pre><p>when looking for index info here inetCidrRouteEntry (http://oid-info.com/get/1.3.6.1.2.1.4.24.7.1), we have found the following</p><pre><code class=language-bash>INDEX {
inetCidrRouteDestType, ipv4(1), ipv6(2), ipv4z(3), ipv6z(4)) = 1
inetCidrRouteDest,	= 4 - 0.0.0.0
inetCidrRoutePfxLen,    = 0.2
inetCidrRoutePolicy,    = 0.0
inetCidrRouteNextHopType = 1
inetCidrRouteNextHop  = 4 -&gt; 10.0.2.2
}

````bash
In this case we would like by example take RouteDest and RouteNextHop as IndexTAG with

```bash
${IDX1|DOT[2:5]|STRING} -&gt; ${IDX1|DOT[12:15]|STRING}
</code></pre><p>this will equivalent to</p><pre><code class=language-bash>${IDX1|DOT[2:5]|} -&gt; ${IDX1|DOT[12:15]|}
</code></pre><p>And the output result will be</p><pre><code class=language-bash>0.0.0.0 -&gt; 10.0.2.2
</code></pre><hr><h1 id=examples>Examples</h1><h2 id=example-of-indexed-with-multiple-indirect-tag>Example of Indexed with multiple indirect TAG<a href=#example-of-indexed-with-multiple-indirect-tag class=anchor aria-hidden=true>#</a></h2><p>Lets assume that we want to retrieve the following values of the following metrics
The base OID from those are <code>1.1</code> and they have a double index, [X,Y] which gives us the following information:</p><pre><code class=language-bash>X=related interface
Y=related object
</code></pre><pre><code class=language-bash>myMetricTable: 1.1 [X,Y]
1.1[.1.1] | 51
1.1[.2.1] | 52
1.1[.3.1] | 53
1.1[.4.1] | 54
1.3[.1.1] | 21
1.3[.2.1] | 22
1.3[.3.1] | 23
1.3[.4.1] | 24
</code></pre><p>To identify those metrics, we need to retrieve the tag value on <code>myFinalRealTagTable - 1.5</code>, but we need a double index iteration to retrieve the desired tag and it is indexed by <code>M</code>.
The process would be:</p><pre><code class=language-bash>1.2.[X.Y] --&gt; [Z] --&gt; 1.10.[X.Z] --&gt; [M] --&gt; 1.5.[M] --&gt; tag
</code></pre><pre><code class=language-bash>myIndexTagTable: .1.2[X.Y] | [Z]
.1.2.[1.1] | 2
.1.2.[2.1] | 2
.1.2.[3.1] | 2
.1.2.[4.1] | 2
---
myRealTagTable: .1.10.[X.Z] | [M]
.1.10.1.2 | 90
.1.10.2.2 | 91
.1.10.3.2 | 92
.1.10.4.2 | 93
---
myFinalRealTagTable: .1.5.[M] | [TagValue]
.1.5.94 | &quot;eth1&quot;
.1.5.95 | &quot;eth2&quot;
.1.5.96 | &quot;eth3&quot;
.1.5.97 | &quot;eth4&quot;
</code></pre><p>As we can see we need to go over 3 different tables and different indexes to retrieve values that can identify each value of pair [X.Y].
To achieve that, we create the following measuement:</p><p>As we need to match with the metrics, we need to go over <code>myIndexTagTable</code> to retrieve and store indexes <code>[X.Y]</code>, so we configure the <code>IndexOID</code> as <code>1.2</code>. The output of this table will be used as the next one:</p><pre><code class=language-bash>Def:
IndexOID: &quot;1.2&quot; | [X.Y]
Result: &quot;2, 2, 2, 2 | [Z]
</code></pre><p>To retrieve the second table, we cannot use the value given <code>Z</code> becouse we need also the var <code>X</code> in order to match the index. As the <code>X</code> is present on table <code>myIndexTagTable</code> and <code>myRealTagTable</code>, we can format the index to achieve the desired [X.Z]</p><pre><code class=language-bash>Def:
TagOID: &quot;.1.10&quot;,
IndexFormat: &quot;${IDX1|DOT[0:0]|STRING}.$VAL1&quot; --&gt; [X.Z]
Result: &quot;90, 91, 92, 93&quot;
</code></pre><p>With the matched value of <code>M</code>, we can retrieve the final table, in this case, we don&rsquo;t need to setup a format as the required index is directly indexed by [M]</p><pre><code class=language-bash>Def:
TagOID: &quot;.1.5&quot;,
IndexFormat: &quot;&quot;
Result: &quot;eth1, eth2, eth3, eth4&quot;
</code></pre><p>On this point, we will have map that relates our initial [X.Y] to our desired tags
Remember that on multiple inderect measurement, the final index is equal than the IndexOID to be equal than the metrics</p><pre><code class=language-bash>1.1 | eth1
1.2 | eth2
1.3 | eth3
1.4 | eth4
</code></pre><h2 id=example-of-multiindex-ifmib>Example of MultiIndex: ifMIB<a href=#example-of-multiindex-ifmib class=anchor aria-hidden=true>#</a></h2><p>All the metric of IfMIB are based on <code>IfIndex OID: 1.3.6.1.2.1.2.2.1.1</code>. According to its description:</p><blockquote><p>A unique value for each interface. Its value ranges between 1 and the value of ifNumber. The value for each interface must remain constant at least from one re-initialization of the entity&rsquo;s network management system to the next re-initialization.</p></blockquote><p>As all related metrics shares the same index, we can define a simple <code>Direct Index</code> measurement to retrieve those metrics, but, for this case, metrics that are constants, like tags, doesn&rsquo;t need to be polled every frequency, it can be gathered on filter freq.</p><p>On this example, we will use the following metrics that are, in some way, static for each interface:</p><table><thead><tr><th>Name</th><th>OID</th></tr></thead><tbody><tr><td>ifDesc</td><td>.1.3.6.1.2.1.2.2.1.2</td></tr><tr><td>ifName</td><td>.1.3.6.1.2.1.31.1.1.1.1</td></tr><tr><td>ifAlias</td><td>.1.3.6.1.2.1.31.1.1.1.18</td></tr></tbody></table><p>The related fields that we want to gather are defined as SNMP Metrics:</p><table><thead><tr><th>ID</th><th>FieldName</th><th>BaseOID</th><th>DataSrcType</th></tr></thead><tbody><tr><td>ifHCInOctets</td><td>ifHCInOctets</td><td>.1.3.6.1.2.1.31.1.1.1.6</td><td>COUNTER64</td></tr><tr><td>ifHCOutOctets</td><td>ifHCOutOctets</td><td>.1.3.6.1.2.1.31.1.1.1.10</td><td>COUNTER64</td></tr></tbody></table><p>A simple walk over those metrics gives us the follow index/value:</p><pre><code class=language-bash>ifHCInOctets &gt;
.1.3.6.1.2.1.31.1.1.1.6[.1] | 3
.1.3.6.1.2.1.31.1.1.1.6[.2] | 4
.1.3.6.1.2.1.31.1.1.1.6[.3]| 20


ifHCOutOctets &gt;
.1.3.6.1.2.1.31.1.1.1.6[.1] | 5
.1.3.6.1.2.1.31.1.1.1.6[.2] | 7
.1.3.6.1.2.1.31.1.1.1.6[.3]| 35
</code></pre><p>In order to identify those metrics with <code>ifAlias</code>, <code>ifName</code>, <code>ifDesc</code> tags, we create a create a <code>Multi Index Measurement</code>,with 3 different indexes. As the indexes <strong>don&rsquo;t need to be ordered</strong> we will define it in a non-logic order</p><table><thead><tr><th>Index</th><th>Type</th><th>Label</th><th>Index Description</th><th>Index Base OID</th><th>Index Tag</th><th>Index Tag Format</th><th>Index Dependency</th></tr></thead><tbody><tr><td>0</td><td>Indexed with direct Tag</td><td>ifName</td><td>Index to retrieve ifName tag</td><td>.1.3.6.1.2.1.31.1.1.1.1</td><td>ifName</td><td>&ndash;</td><td>""</td></tr><tr><td>1</td><td>Indexed with direct Tag</td><td>ifDesc</td><td>Index to retrieve ifDesc</td><td>.1.3.6.1.2.1.2.2.1.2</td><td>ifDesc</td><td>&ndash;</td><td>IDX{2};DOT[0:0];SKIP (note that it references with an index that is greater than the current one. Remember that the order is not needed)</td></tr><tr><td>2</td><td>Indexed with direct Tag</td><td>ifAlias</td><td>Index to retrieve ifAlias</td><td>.1.3.6.1.2.1.31.1.1.1.18</td><td>ifAlias</td><td>&ndash;</td><td>IDX{0};DOT[0:0];SKIP</td></tr></tbody></table><p>As each index refers to a single measurement and it has its own lifecycle, the Dependency is used only to create the final result. In this case, we want to retrieve the final tags from IDX{1} (it will heridate the IDX{2} and IDX{0}) so:</p><pre><code class=language-bash>Result: &quot;IDX{1}&quot;
</code></pre><p>Example of measurement definition:</p><p>![ifMIB_MultiIndex]</p><p>Each index will save on its own structure the gathered data based on its definition:</p><pre><code class=language-bash>Index 0 | ifName &gt;
.1.3.6.1.2.1.31.1.1.1.1[.1] | &quot;Te1/0/1&quot; || ifName
.1.3.6.1.2.1.31.1.1.1.1[.2] | &quot;Te1/0/2&quot; || ifName
.1.3.6.1.2.1.31.1.1.1.1[.3]| &quot;Te1/0/3&quot; || ifName

Index 1 | ifDesc &gt;
.1.3.6.1.2.1.2.2.1.2[.1] |  &quot;TenGigabitEthernet1/0/1&quot; || ifDesc
.1.3.6.1.2.1.2.2.1.2[.2] |  &quot;TenGigabitEthernet1/0/2&quot; || ifDesc
.1.3.6.1.2.1.2.2.1.2[.3]|  &quot;TenGigabitEthernet1/0/3&quot; || ifDesc

Index 2 | ifAlias &gt;
.1.3.6.1.2.1.31.1.1.1.18[.1] |  &quot;To home&quot; || ifAlias
.1.3.6.1.2.1.31.1.1.1.18[.2] |  &quot;-- &lt;null, not defined!&gt;&quot; || ifAlias
.1.3.6.1.2.1.31.1.1.1.18[.3]|  &quot;To shop&quot; || ifAlias

</code></pre><p>When building the result, all the measurements will be ordered based on dependencies, so, it will processed on the following order:</p><pre><code class=language-bash>0| Index 0 | ifName  | Not dependency
1| Index 2 | ifAlias | Dependency on Index 0
2| Index 1 | ifDesc | Dependency on old Index 2
</code></pre><p>The building index schema follows as:</p><figure class=post-figure><a href=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_example_multiple_indexes_ifmib.jpg><img src=/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/images/schema_example_multiple_indexes_ifmib_huea05135d6d1eef14f705592bd75ca3ca_122954_600x400_fit_q75_box.jpg width=600 height=357 alt="Example IfMib Multiple Indexes"></a><figcaption>Example IfMib Multiple Indexes</figcaption></figure><p>When a dependency exist, it tries to heridate the tags that matches the current OID. If it doesn&rsquo;t match, it applies the strategy, in this case <code>SKIP</code></p><pre><code class=language-bash>Index 2 | ifAlias - IDX{0};DOT[0:0];SKIP &gt;
.1.3.6.1.2.1.31.1.1.1.18[.1] | &quot;Tel1/0/1|To home&quot; || ifName, ifAlias 
.1.3.6.1.2.1.31.1.1.1.18[.3]| &quot;Te1/0/3|To shop&quot; || ifName, ifAlias

---
index [.2] it has been skipped due it doesn't exist on ifAlias and it will be skipped
</code></pre><p>The Index 2 dependency will use the new Index 1:</p><pre><code class=language-bash>Index 1 | ifDesc - IDX{2};DOT[0:0];SKIP
.1.3.6.1.2.1.2.2.1.2[.1] |  &quot;Tel1/0/1|To home|TenGigabitEthernet1/0/1&quot;
.1.3.6.1.2.1.2.2.1.2[.3]|  &quot;Te1/0/3|To shop|TenGigabitEthernet1/0/3&quot;

---
index [.2] it has been skipped due it doesn't exist on processed Index 1 and it will be skipped
</code></pre><p>The result (<code>IDX{1}</code>) will be directly the Index 1- ifAlias with the new heridated tags:</p><pre><code class=language-bash>.1.3.6.1.2.1.2.2.1.2[.1] |  &quot;Tel1/0/1|To home|TenGigabitEthernet1/0/1&quot; || ifName | ifAlias | ifDesc
.1.3.6.1.2.1.2.2.1.2[.3]|  &quot;Te1/0/3|To shop|TenGigabitEthernet1/0/3&quot;  || ifName | ifAlias | ifDesc
</code></pre><p>So, the final gathered metrics will be:</p><pre><code class=language-bash>ifHCInOctets &gt;
.1.3.6.1.2.1.31.1.1.1.6[.1] | 3   || ifName=&quot;Tel1/0/1&quot;,ifAlias=&quot;To home&quot;,ifDesc=&quot;TenGigabitEthernet1/0/1&quot;
.1.3.6.1.2.1.31.1.1.1.6[.3]| 20  || ifName=&quot;Te1/0/3&quot;,ifAlias=&quot;To shop&quot;,ifDesc=&quot;TenGigabitEthernet1/0/3&quot;

ifHCOutOctets &gt;
.1.3.6.1.2.1.31.1.1.1.6[.1] | 5   || ifName=&quot;Tel1/0/1&quot;,ifAlias=&quot;To home&quot;,ifDesc=&quot;TenGigabitEthernet1/0/1&quot;
.1.3.6.1.2.1.31.1.1.1.6[.3]| 35  || ifName=&quot;Te1/0/3&quot;,ifAlias=&quot;To shop&quot;,ifDesc=&quot;TenGigabitEthernet1/0/3&quot;
</code></pre><div class="docs-navigation d-flex justify-content-between"><a href=toni-moreno.github.io/snmpcollector.org/docs/components/snmp-metrics/><div class="card my-1"><div class="card-body py-2">&larr; SNMP Metrics</div></div></a><a class=ms-auto href=toni-moreno.github.io/snmpcollector.org/docs/components/measurement-groups/><div class="card my-1"><div class="card-body py-2">Measurement Groups &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/toni-moreno.github.io/snmpcollector.org/js/highlight.min.5c9528a6a1c07a12ee5032cb94e4c7bef72740593cde4b26300995d7e94526b35ea2b5b6981f7ac317032690ad6c5318f3ff17d6117f383c0346b3cd7a7771a2.js integrity="sha512-XJUopqHAehLuUDLLlOTHvvcnQFk83ksmMAmV1+lFJrNeorW2mB96wxcDJpCtbFMY8/8X1hF/ODwDRrPNendxog==" crossorigin=anonymous defer></script><script src=/toni-moreno.github.io/snmpcollector.org/main.min.398009e84eec0d0056c796393dd59c0fc1256540b3c6ebcd70d26840a1b2691113affd7d2d9d9e37aa22e3877e8a95b26b19dcd28341036f26390ee91ded7d25.js integrity="sha512-OYAJ6E7sDQBWx5Y5PdWcD8ElZUCzxuvNcNJoQKGyaRETr/19LZ2eN6oi44d+ipWyaxnc0oNBA28mOQ7pHe19JQ==" crossorigin=anonymous defer></script><script src=/toni-moreno.github.io/snmpcollector.org/index.min.37ececb1bdf358eb15c15d491ed044f194c680c9df72770cb05fdfd7c0dd24803b0c6854c5f63c3a380e9b4c979e93789223241c62167bdc3aa98739d16a1291.js integrity="sha512-N+zssb3zWOsVwV1JHtBE8ZTGgMnfcncMsF/f18DdJIA7DGhUxfY8OjgOm0yXnpN4kiMkHGIWe9w6qYc50WoSkQ==" crossorigin=anonymous defer></script></body></html>