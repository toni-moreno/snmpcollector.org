<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.79.1" /><link rel="canonical" type="text/html" href="https://toni-moreno.github.io/snmpcollector.org/docs/examples/">
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon" href="/snmpcollector.org/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/snmpcollector.org/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-192x192.png" sizes="192x192">

<title>Examples | SnmpCollector</title><meta property="og:title" content="Examples" />
<meta property="og:description" content="SnmpCollector Documentation Site" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://toni-moreno.github.io/snmpcollector.org/docs/examples/" />
<meta property="og:site_name" content="SnmpCollector" />
<meta itemprop="name" content="Examples">
<meta itemprop="description" content="SnmpCollector Documentation Site">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Examples"/>
<meta name="twitter:description" content="SnmpCollector Documentation Site"/>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-00000000-0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>






<link rel="preload" href="/snmpcollector.org/scss/main.min.dc02de46d72d920d6e138b26f521fe130fed76e2d7d4255dc58caad42ea30557.css" as="style">
<link href="/snmpcollector.org/scss/main.min.dc02de46d72d920d6e138b26f521fe130fed76e2d7d4255dc58caad42ea30557.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>



<link rel="stylesheet" href="/snmpcollector.org/css/shortcodes.css"/>


  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/snmpcollector.org/">
		<span class="navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zM197.0804 232.033c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zM197.0804 177.6188c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zM197.5309 286.4723c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zM197.0804 340.5784c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">SnmpCollector</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/snmpcollector.org/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/snmpcollector.org/downloads/" ><span>Downloads</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/snmpcollector.org/docs/examples/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Examples</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-0eecdc864a95f5c7c01cd168dadaaf7a">Retrieve metrics from Cisco QoS - CISCO-CLASS-BASED-QOS-MIB</a></li>


    
  
    
    
	
<li>2: <a href="#pg-f36a5fdcc98c0bf39b8b1adf455af28d">Configuring Cisco Catalyst with basic metrics</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-0eecdc864a95f5c7c01cd168dadaaf7a">1 - Retrieve metrics from Cisco QoS - CISCO-CLASS-BASED-QOS-MIB</h1>
    
	<!-- Images Rel -->
<!-- CM -->
<!--TS -->
<!-- END -->
<h1 id="example-retrieve-metrics-from-cisco-qos---cisco-class-based-qos-mib">Example: Retrieve metrics from Cisco QoS - CISCO-CLASS-BASED-QOS-MIB</h1>
<p>This example will show up how to retrieve QoS metrics from a Cisco Device, based on one of the most complex MIB - <code>CISCO-CLASS-BASED-QOS-MIB</code>
<strong>Only valid on 0.9</strong></p>
<hr>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li>0 Prerequisites : What and from we are going to collect our data?
<ul>
<li>0.1 SNMP Device model</li>
<li>0.2 Select metrics to collect data
<ul>
<li>0.2.1 Available object tables</li>
<li>0.2.2 Objects identifiers</li>
<li>0.2.3 Tags - Indexes definition</li>
</ul>
</li>
<li>0.3 Measurements</li>
</ul>
</li>
<li>1 CMStats
<ul>
<li>1.1 Configuring metrics</li>
<li>1.2 Configuring measurements
<ul>
<li>1.2.1 Overview</li>
<li>1.2.2 Index 0 | Service Policy Index Tag: cbQosIfIndex</li>
<li>1.2.3 Index 1 | Service Policy Index Tag: cbQosPolicyDirection</li>
<li>1.2.4 Index 2 | ClassMap Tag: cbQosCMName</li>
<li>1.2.5 Index 3 | PolicyName Tag: cbQosPolicyMapName</li>
<li>1.2.6 Index 4 | ClassMap Tag: cbQosCMInfo</li>
<li>1.2.7 Result</li>
</ul>
</li>
<li>1.3 Configuring filters
<ul>
<li>1.3.1 OID Condition - Filter classmap</li>
<li>1.3.2 MeasurementFilter - Filter classmap</li>
</ul>
</li>
<li>1.4 Configuring Measurement Group</li>
<li>1.5 Configuring Device</li>
<li>1.6 Reload configuration</li>
<li>1.7 Check your results!</li>
</ul>
</li>
<li>2 TSStats
<ul>
<li>2.1 Configuring metrics</li>
<li>1.2 Configuring measurements
<ul>
<li>1.2.1 Overview</li>
<li>2.2.2 Index 0 | Service Policy Index Tag: cbQosIfIndex</li>
<li>2.2.3 Index 1 | Service Policy Index Tag: cbQosPolicyDirection</li>
<li>2.2.4 Index 2 | ClassMap Tag: cbQosCMName</li>
<li>2.2.4 Index 3 | PolicyMap Tag: policyMapName</li>
<li>2.2.4 Result</li>
</ul>
</li>
<li>2.3 Configuring filters
<ul>
<li>2.3.1 OID Condition - Filter TS</li>
<li>2.3.2 MeasurementFilter - Filter classmap</li>
</ul>
</li>
<li>2.4 Configuring Measurement Group</li>
<li>2.5 Configuring Device</li>
<li>2.6 Reload configuration</li>
<li>2.7 Check your results!</li>
</ul>
</li>
</ul>
<hr>
<h2 id="0-prerequisites--what-and-from-we-are-going-to-collect-our-data">0. Prerequisites : What and from we are going to collect our data?</h2>
<h3 id="01-snmp-device-model">0.1 SNMP Device model</h3>
<p>In order to select the correct metrics for our device, we must check first what model it is.
If you don&rsquo;t know the model, you can pre-add the device on SNMP Device Component and do a test connection. To do that:</p>
<ul>
<li>Click on <code>SNMP Device</code> menu item</li>
<li>A table with configured devices will show up. Press &ldquo;New&rdquo; button or edit an existing one to access to the configuration form.</li>
<li>Fill the device with the basic connection information</li>
<li>If everything is OK, you will be able to do a &ldquo;Test Connection&rdquo;. This button will show up a console with System information  of the Device.</li>
</ul>
<h3 id="02-select-metrics-to-collect-data">0.2 Select metrics to collect data</h3>
<p>To define the metrics to retrieve data from we need first to analyze how CISCO-CLASS-BASED-QOS-MIB works
I will use the example exposed on: <a href="https://blog.pierky.com/cisco-class-based-qos-snmp-mib-and-statistics-monitor-for-nms/">https://blog.pierky.com/cisco-class-based-qos-snmp-mib-and-statistics-monitor-for-nms/</a> as it will help to underestand a real case</p>
<h4 id="021-available-object-tables">0.2.1 Available object tables</h4>
<p>In <code>CISCO-CLASS-BASED-QOS-MIB</code> the tables are defined by each kind of object that is available to be configured on QoS.
Each object has a <strong>CFG Table</strong> that shows config information and <strong>StatsTable</strong> with the available metrics to retrieve data from.</p>
<p>On this example, we will work over the following objects and tables:</p>
<table>
<thead>
<tr>
<th>Object</th>
<th>CFG Table</th>
<th>Stats Table</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy Map</td>
<td><code>cbQosPolicyMapCfg - 1.3.6.1.4.1.9.9.166.1.6.1.1</code></td>
<td>&ndash;</td>
</tr>
<tr>
<td>ClassMap</td>
<td><code>cbQosClassMapCfg - 1.3.6.1.4.1.9.9.166.1.7.1.1</code></td>
<td><code>cbQosCMStatsTable - 1.3.6.1.4.1.9.9.166.1.15.1.1</code></td>
</tr>
<tr>
<td>MatchStmt</td>
<td><code>cbQosMatchStmtCfg - 1.3.6.1.4.1.9.9.166.1.8.1.1</code></td>
<td><code>cbQosMatchStmtStats -  1.3.6.1.4.1.9.9.166.1.16.1.1</code></td>
</tr>
<tr>
<td>TS</td>
<td><code>cbQosTSCfg - 1.3.6.1.4.1.9.9.166.1.13.1.1</code></td>
<td><code>cbQosTSStats - 1.3.6.1.4.1.9.9.166.1.19</code></td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: QoS objets table
</p>
<p>As PolicyMap doesn&rsquo;t have stats on itself, we will cover in this example how to retrieve data from:</p>
<ul>
<li>ClassMap Object</li>
<li>TS Object</li>
</ul>
<h4 id="022-objects-identifiers">0.2.2 Objects identifiers</h4>
<p>Once we have decided objects to retrieve data from, we need to check how to identify each metrics and what tags do we need</p>
<p>The tree hierarchy of QoS follows as:</p>
<pre><code>Interface 
| - Direction
| - PolicyMap
    |- ClassMap
      |- MatchStmt
      |- TS
</code></pre><p>So, the deeper object is, more tags we will need to retrieve in order to be able to identify it:</p>
<table>
<thead>
<tr>
<th>Object</th>
<th>Tags needed</th>
</tr>
</thead>
<tbody>
<tr>
<td>PolicyMap</td>
<td><em>Interface, Direction, PolicyMap</em></td>
</tr>
<tr>
<td>ClassMap</td>
<td><em>Interface, Direction, PolicyMap, ClassMap</em></td>
</tr>
<tr>
<td>MatchStmt</td>
<td><em>Interface, Direction, PolicyMap, ClassMap, MatchStmt</em></td>
</tr>
<tr>
<td>TS</td>
<td><em>Interface, Direction, PolicyMap, ClassMap, MatchStmt</em></td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: QoS objets table-tags relation
</p>
<h4 id="023-tags---indexes-definition">0.2.3 Tags - Indexes definition</h4>
<p>Each object defined on XXXXStatsTable and XXXXCfg tables have a double index.
In order to reference them to the document, lets identify and name them:</p>
<table>
<thead>
<tr>
<th>Base</th>
<th>Index</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>XXX</strong>.YYY</td>
<td>XXX</td>
<td>Service Policy Index</td>
</tr>
<tr>
<td>XXX.<strong>YYY</strong></td>
<td>YYY</td>
<td>Object Index</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index definition
</p>
<h3 id="03-measurements">0.3 Measurements</h3>
<p>As we have seen, each object needs specific tags to identify those metrics and, based on that they are double indexed, we will create a single measurement to retrieve each object stats</p>
<h1 id="1-cmstats">1. CMStats</h1>
<p>The first set of data that we want to retrieve are the CMStats</p>
<h2 id="11-configuring-metrics">1.1 Configuring metrics</h2>
<p>Available metrics are defined on <code>cbQosCMStatsTable - 1.3.6.1.4.1.9.9.166.1.15.1.1</code>.
In our example we will configure the following metrics:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Field Name</th>
<th>IsTag</th>
<th>DataSrcType</th>
<th>GetRate</th>
<th>Base OID/Extradata</th>
<th>Scale</th>
<th>Shift</th>
</tr>
</thead>
<tbody>
<tr>
<td>cisco_cbQosCMPrePolicyPkt64</td>
<td>cbQosCMPrePolicyPkt64</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.15.1.1.3</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>cisco_cbQosCMPrePolicyByte64</td>
<td>cbQosCMPrePolicyByte64</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.15.1.1.6</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>cisco_cbQosCMPrePolicyBitRate</td>
<td>cbQosCMPrePolicyBitRate</td>
<td>false</td>
<td>Gauge32</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.15.1.1.7</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: QoS CMStats metrics configuration
</p>
<p>As we have said, each metric will have a double index: <code>[Service Policy Index].[Object Index]</code></p>
<h2 id="12-configuring-measurements">1.2 Configuring measurements</h2>
<p>Let&rsquo;s start to define the measurement</p>
<h3 id="121-overview">1.2.1 Overview</h3>
<p>As we have defined, the CMStats needs the following tags to identify each metric:</p>
<ul>
<li>Interface</li>
<li>Direction</li>
<li>PolicyMap Name</li>
<li>ClassMap Name</li>
<li>[Extra] ClassMap Info</li>
</ul>
<p>The main problem here is that each tag is being retrieved with <strong>different indexes and different indexes dimension</strong>, so in order to correlate those tags and indexes we need to define a <strong>Multi Index Measurement</strong></p>
<p>To do that, go to <code>Influx Measurements</code> section and click on <code>+New</code></p>
<p>Fill the <code>ID</code> and <code>Name</code> fields with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cisco_qos_cbQosCMStats</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Name</td>
<td>cbQosCMStats</td>
<td>Measurement name that will be used on InfluxDB</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Measurement config section
</p>
<p>On the <code>GetMode</code> field select:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GetMode</td>
<td>(snmp Table) Multiple indexes</td>
<td>&ndash;</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Measurement get mode
</p>
<h3 id="122-index-0--service-policy-index-tag-cbqosifindex">1.2.2 Index 0 | Service Policy Index Tag: cbQosIfIndex</h3>
<p>The first that we need to retrieve are interface related tags, name and direction.
According to documentation, we need to poll the following OIDs to retrieve those tags:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>OID</th>
<th>Index</th>
</tr>
</thead>
<tbody>
<tr>
<td>cbQosIfIndex</td>
<td>1.3.6.1.4.1.9.9.166.1.1.1.1.4</td>
<td>Service Policy</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Service policy index
</p>
<p>A simple walk on this OID gives as value the <code>ifIndex</code></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; cbQosIfIndex: 1.3.6.1.4.1.9.9.166.1.1.1.1.4

1.3.6.1.4.1.9.9.166.1.1.1.1.4<span style="color:#ce5c00;font-weight:bold">[</span>.1043<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: <span style="color:#0000cf;font-weight:bold">1</span>
1.3.6.1.4.1.9.9.166.1.1.1.1.4<span style="color:#ce5c00;font-weight:bold">[</span>.1099<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: <span style="color:#0000cf;font-weight:bold">1</span>
</code></pre></div><p>Note that the <code>[.1043]</code> and <code>[.1099]</code> will be used on the following indexes definition as <code>Service Policy Index</code></p>
<p>The value of <code>1</code> is the ifIndex index, so, if we retrieve data from ifName using that index we will be able to retrieve the related ifName of the interface:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; ifName: 1.3.6.1.2.1.31.1.1.1.1

1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Te1/0/3&#34;</span>
</code></pre></div><p>As we have an indirect tag, we will create an index with <strong>&quot;(snmp Table) Indexed with indirect Tag&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_it.jpg" alt="mi-indexed_it" title="(snmp Table) Indexed with indirect TAG"></p>
<p>And will fill with the following fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosIfIndex</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve interface name from cbQosIfIndex</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.1.1.1.4</td>
<td>Base OID is the cbQosIfIndex which gives us the value of the ifMIB index</td>
</tr>
<tr>
<td>Index Tag OID</td>
<td>.1.3.6.1.2.1.31.1.1.1.1</td>
<td>ifName TagOID that will match with cbQosIfIndex result</td>
</tr>
<tr>
<td>Index Tag</td>
<td>ifName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the ifName tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Index Dependency</td>
<td>&ndash;</td>
<td>We don&rsquo;t need a dependency as it will be the first OID to retrieve tag from</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 0 - cbQosIfIndex
</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob//gh-pages/images/webUI/Examples/QoS/cbqosifindex_meas.jpg" alt="cbqosifindex_meas" title="example of index dfefinition of cbqosifIndex"></p>
<p>The final output map of pairs [index]:[tag] will be:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; Index: IDX<span style="color:#ce5c00;font-weight:bold">{</span>0<span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">|</span> cbQosIfIndex

<span style="color:#ce5c00;font-weight:bold">[</span>.1043<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Te1/0/3&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName
<span style="color:#ce5c00;font-weight:bold">[</span>.1099<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Te1/0/3&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName
</code></pre></div><h3 id="123-index-1--service-policy-index-tag-cbqospolicydirection">1.2.3 Index 1 | Service Policy Index Tag: cbQosPolicyDirection</h3>
<p>Once we have the inferface name, we can get the direction of the applied policy on each interface, in order to retrieve that we can query the following OID that gives us the direction.
Note that the index keeps only in 1 dimension and it is related with the <code>Service Policy Index</code></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>OID</th>
<th>Index</th>
</tr>
</thead>
<tbody>
<tr>
<td>cbQosPolicyDirection</td>
<td>.1.3.6.1.4.1.9.9.166.1.1.1.1.3</td>
<td><strong>Service Policy Index</strong></td>
</tr>
</tbody>
</table>
<p>A simple walk on this OID gives the direction of the policy applied on an interface</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; cbQosPolicyDirection:  

.1.3.6.1.4.1.9.9.166.1.1.1.1.3<span style="color:#ce5c00;font-weight:bold">[</span>.1043<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: output<span style="color:#ce5c00;font-weight:bold">(</span>2<span style="color:#ce5c00;font-weight:bold">)</span>
.1.3.6.1.4.1.9.9.166.1.1.1.1.3<span style="color:#ce5c00;font-weight:bold">[</span>.1099<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: input<span style="color:#ce5c00;font-weight:bold">(</span>1<span style="color:#ce5c00;font-weight:bold">)</span>
</code></pre></div><p>In this case, we don&rsquo;t need to do an indirection, as it is giving directly the value of the tag, so we can use a <strong>&quot;(snmp Table) Index with direct TAG&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed.jpg" alt="mi-indexed" title="(snmp Table) Indexed with direct TAG"></p>
<p>As we can see, the indexes are also [.1043] and [.1099] - <code>Service Policy Index</code> and they are shared with the <code>IDX{0}</code>, the <code>cbQosIfIndex</code> index</p>
<p>We will fill the index with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosPolicyDirection</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve interface name from cbQosPolicyDirection</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.1.1.1.3</td>
<td>Base OID is the cbQosPolicyDirection which gives us the value of the direction</td>
</tr>
<tr>
<td>Index Tag</td>
<td>policyDirection</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{0};DOT[0:0];SKIP</td>
<td>(*)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 1 - cbQosPolicyDirection
</p>
<p>(*) Dependency:</p>
<p>We set up a dependency with the IDX{0}, as they shares the same Index in order to heridate ifIndex Tags. We will use a SKIP strategy</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqospolicydirection_meas.jpg" alt="cbqospolicydirection_meas" title="example of definition of cbqospolicydirection"></p>
<p>At this point, we will have that the <code>IDX{1}</code> will be:</p>
<pre><code>&gt; Index: IDX{0} | cbQosIfIndex

[.1043] = &quot;Te1/0/3&quot; || ifName
[.1099] = &quot;Te1/0/3&quot; || ifName

&gt; Index: IDX{1} | cbQosPolicyDirection | IDX{0};DOT[0:0];SKIP

[.1043] = &quot;Te1/0/3|2&quot; || ifName | policyDirection
[.1099] = &quot;Te1/0/3|1&quot; || ifName | policyDirection
</code></pre><p>We just finished to map the first index <code>Service Policy Index</code> and feed it with <code>ifName</code> and <code>policyDirection</code> tags</p>
<h3 id="124-index-2--classmap-tag-cbqoscmname">1.2.4 Index 2 | ClassMap Tag: cbQosCMName</h3>
<p>On this point, we are going to retrieve the ClassMap name. Despite of the above indexes, the table to retrieve the class map name has now a <strong>double index</strong>: <code>Service Policy</code>.<code>Object Index</code></p>
<p>To retrieve values from CFG tables, the MIB provides an OID to get the index reference to the object, which it has to be retrieved from <code>cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2</code></p>
<p>A walk over the cbQosConfigIndex:</p>
<pre><code>&gt; cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1043] = Gauge32: 1035
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1045] = Gauge32: 1029
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1047] = Gauge32: 1033
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1049] = Gauge32: 1037
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1051] = Gauge32: 1025
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1053] = Gauge32: 1027
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1085] = Gauge32: 1079
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1099] = Gauge32: 1063
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1101] = Gauge32: 1057
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1103] = Gauge32: 1061
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1105] = Gauge32: 1065
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1107] = Gauge32: 1025
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1109] = Gauge32: 1027
</code></pre><p>The name of the classmaps comes from the table: <code>cbQosCMName - .1.3.6.1.4.1.9.9.166.1.7.1.1.1</code></p>
<p>A walk over the <code>cbQosCMName</code> table:</p>
<pre><code>&gt; cbQosCMName - .1.3.6.1.4.1.9.9.166.1.7.1.1.1

.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1025] = STRING: class-default
.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1029] = STRING: ICMP
.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1057] = STRING: NonLocal
</code></pre><p>Note that the index is directly the one recieved from cbQosConfigIndex:</p>
<pre><code>&gt; cbQosConfigIndex (filtered) - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1045] = Gauge32: 1029
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1051] = Gauge32: 1025
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1101] = Gauge32: 1057
...
</code></pre><p>As we have said, the first index references to the <code>Service Policy Index</code> and the second index refers directly to the <code>Object Index</code>.</p>
<p>As we have an indirect tag, we will create an index with <strong>&quot;(snmp Table) Indexed with indirect Tag&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_it.jpg" alt="mi-indexed_it" title="(snmp Table) Indexed with indirect TAG"></p>
<p>We will fill with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosCMName</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve CMName</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Base OID is the <code>cbQosConfigIndex</code> which gives us the value of the config related with cbQosCMName table</td>
</tr>
<tr>
<td>Index Tag OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.7.1.1.1</td>
<td><code>cbQosCMName</code> TagOID that will match with <code>cbQosConfigIndex</code> result</td>
</tr>
<tr>
<td>Index Tag</td>
<td>cmName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{1};DOT[0:0];SKIP</td>
<td>(*)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 2 - cbQosCMName
</p>
<p>(*) Dependency</p>
<p>The dependency in ths case is based on <code>IDX{1}</code> - cbQosPolicyDirection that already have ifName tag.
In this case, the metrics have indexes with dimension 2, so we need to change the check condition based only on the first index, the <code>Service Policy Index</code>, using the statement <code>DOT[0:0]</code></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscmname_meas.jpg" alt="cbqoscmname_meas" title="example of definition of cbQosCMName index"></p>
<p>At this point, we will have that the <code>IDX{1}</code> will be:</p>
<pre><code>
&gt; IDX{1}:

[.1043] = &quot;Te1/0/3|2&quot; || ifName | policyDirection
[.1099] = &quot;Te1/0/3|1&quot; || ifName | policyDirection

&gt; Index: IDX{2} | cbQosCMName | IDX{1};DOT[0:0];SKIP

&gt;&gt; DOT[0:0] = [.1043] / [.1099]

[.1043][.1045] = &quot;Te1/0/3|2|ICMP&quot;           || ifName | policyDirection | cmName
[.1043][.1051] = &quot;Te1/0/3|2|class-default&quot;  || ifName | policyDirection | cmName
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal&quot;       || ifName | policyDirection | cmName

</code></pre><p>We just started to map the both index <code>Service Policy</code>.<code>Object Index</code></p>
<h3 id="125-index-3--policyname-tag-cbqospolicymapname">1.2.5 Index 3 | PolicyName Tag: cbQosPolicyMapName</h3>
<p>As each class is attached to a policyName, we need to identify the classmap with the name of the policy.
The name of the policy can be retrieved from the following OID:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>OID</th>
<th>Index</th>
</tr>
</thead>
<tbody>
<tr>
<td>cbQosPolicyMapName</td>
<td>1.3.6.1.4.1.9.9.166.1.6.1.1.1</td>
<td><strong>Service Policy Index</strong>.<strong>Object Index</strong></td>
</tr>
</tbody>
</table>
<p>A simple walk over the <code>cbQosPolicyMapName</code>:</p>
<pre><code>&gt; cbQosPolicyMapName - 1.3.6.1.4.1.9.9.166.1.6.1.1.1

1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1035] = STRING: LAN_Out
1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1063] = STRING: CPP
</code></pre><p>The problem here, is that the pair index of <code>Service Policy Index.Object Index</code> is <strong>different from the classmap object type</strong>. In order to retrieve this informaton and keep the classmap index, we must query the following OID - <code>cbQosParentObjectsIndex</code> - <code>1.3.6.1.4.1.9.9.166.1.5.1.1.4</code> that gives us the relation between objects on QoS:</p>
<p>A simple walk over the <code>cbQosParentObjectsIndex</code>:</p>
<pre><code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4

1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1043] = Gauge32: 0
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1049] = Gauge32: 1045
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1085] = Gauge32: 1051
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1099] = Gauge32: 0
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1105] = Gauge32: 1101
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1107] = Gauge32: 1099
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1109] = Gauge32: 1107

</code></pre><p>The object relates the child with the parent, so filtering the, the pair of OID from classmap we will obtain the index of the policy attached to:</p>
<pre><code>...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099
...
</code></pre><p>The index values referes to the <code>Object Index</code> from <code>PolicyMap</code>, so the new indexes that we want to build in order to query the PolicyName, must be:</p>
<pre><code>[.1043][.1043] - PolicyMap
[.1099][.1099] - PolicyMap
</code></pre><p>With the information above we need to define a new measurement, but in this case, we need to do at least 2 indirects and, in the middle modify the check condition with another indexes, so we define the measurement as <strong>&quot;(snmp Table) Indexed with multiple indirect TAG&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_mit.jpg" alt="mi-indexed_mit" title="(snmp Table) Indexed with multiple indirect TAG"></p>
<p>We fill the index with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosPolicyMapName</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve cbQosPolicyMapName</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.4</td>
<td>Base OID is the <code>cbQosParentObjectsIndex</code> which gives us the value of the config related with <code>Object Index</code> from <code>PolicyMap</code></td>
</tr>
<tr>
<td>Index Tag</td>
<td>policyMapName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Multi Tag OID</td>
<td>(*)</td>
<td>Multiple indirects to obtain the PolicyName and keep it on ClassMap pair of <code>Service Policy Index</code>.<code>Object Index</code></td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{2};DOT[0:1];SKIP</td>
<td>(**)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 3 - cbQosPolicyMapName
</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqospolicymapname_meas.jpg" alt="cbqospolicymapname_meas" title="example of definition of cbQosPolicyMapName"></p>
<p><strong>(*) Multi Tag OID</strong></p>
<p>We will define 2 TagOID:</p>
<p>TagOID 0:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Index TagOID to retrieve the <code>Object Index</code> from <code>PolicyMap</code></td>
</tr>
<tr>
<td>IndexFormat</td>
<td><code>${IDX1\|DOT[0:0]\|STRING}.$VAL1</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>This IndexFormat will modify the check condition and will create the desired index in order keep iterating over indirect tables. Following with the example:</p>
<p>The generated index is just the <code>Service Policy Index</code>.<code>Object Index</code> from <code>PolicyMap</code>, so we can use this to retrieve any parameter from <code>PolicyMapCfg</code> table, just using the same indirect as we defined on CM, but using different indexes</p>
<p>TagOID 1:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.6.1.1.1</td>
<td>Index TagOID to retrieve the PolicyMap Name</td>
</tr>
<tr>
<td>IndexFormat</td>
<td>&ndash;</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqospolicymapname_meas_index.jpg" alt="cbqospolicymapname_meas_index" title="example of definition of cbQosPolicyMapName multi TagOID"></p>
<p><strong>(**) Dependency</strong></p>
<p>In this case, we need to retrieve both indexes from the IDX{2}, the complete CMIndex <code>Service Policy Index</code>.<code>Object Index</code></p>
<p>The logic is:</p>
<ul>
<li>From BaseOID, we will retrieve the desired parent index:</li>
</ul>
<pre><code>&gt; cbQosParentObjectsIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.4
...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099
...
</code></pre><ul>
<li>On the first TagOID, it will try to retrieve the ObjectIndex, but with a modified IDX:</li>
</ul>
<pre><code>&gt; ${IDX1|DOT[0:0]|STRING}.$VAL1
[.1043][.1043]
[.1043][.1043]
[.1099][.1099]


&gt; cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1043] = Gauge32: 1035
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1109] = Gauge32: 1027
...

</code></pre><ul>
<li>And finally, the last TagOID will retrieve the policyNameMap</li>
</ul>
<pre><code>&gt; cbQosPolicyMapName - 1.3.6.1.4.1.9.9.166.1.6.1.1.1

1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1035] = STRING: LAN_Out
1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1063] = STRING: CPP
</code></pre><p>The final index will be the Base with the retrieved tags from policy name:</p>
<pre><code>[.1043][.1045] = &quot;LAN_Out&quot;
[.1043][.1051] = &quot;LAN_Out&quot;
[.1099][.1101] = &quot;CPP&quot;
</code></pre><p>At this point, the IDX{3}, will be, with heridated tags from IDX{2}:</p>
<pre><code>&gt; Index: IDX{2}

[.1043][.1045] = &quot;Te1/0/3|2|ICMP&quot;           || ifName | policyDirection | cmName
[.1043][.1051] = &quot;Te1/0/3|2|class-default&quot;  || ifName | policyDirection | cmName
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal&quot;       || ifName | policyDirection | cmName

&gt; Index: IDX{3} | cbQosPolicyMapName | IDX{2};DOT[0:1];SKIP

[.1043][.1045] = &quot;Te1/0/3|2|ICMP|LAN_Out&quot;           || ifName | policyDirection | cmName | policyMapName
[.1043][.1051] = &quot;Te1/0/3|2|class-default|LAN_Out&quot;  || ifName | policyDirection | cmName | policyMapName
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal|CPP&quot;       || ifName | policyDirection | cmName | policyMapName

</code></pre><h3 id="126-index-4--classmap-tag-cbqoscminfo">1.2.6 Index 4 | ClassMap Tag: cbQosCMInfo</h3>
<p>Once we have mapped the CMName and its related PolicyMap Name, we can also retrieve the extra info: <code>cbQosCMInfo - .1.3.6.1.4.1.9.9.166.1.7.1.1.3</code>, already present in table of <code>cbQosClassMapCfg - 1.3.6.1.4.1.9.9.166.1.7.1.1</code>, so the way to configure the measurement is exactly the same as <code>cbQosCMName</code> with the same config index.
A simple walk over <code>cbQosCMInfo</code>:</p>
<pre><code>&gt; cbQosCMInfo - .1.3.6.1.4.1.9.9.166.1.7.1.1.3

.1.3.6.1.4.1.9.9.166.1.7.1.1.3[.1025] = INTEGER: matchAny(3)
.1.3.6.1.4.1.9.9.166.1.7.1.1.3[.1029] = INTEGER: matchAll(2)
.1.3.6.1.4.1.9.9.166.1.7.1.1.3[.1057] = INTEGER: matchAny(3)
</code></pre><p>As we have an indirect tag, we will create an index with &ldquo;(snmp Table) Indexed with indirect TAG&rdquo;</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_it.jpg" alt="mi-indexed_it" title="(snmp Table) Indexed with indirect TAG"></p>
<p>We fill with the index with following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosCMInfo</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve cbQosCMInfo</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Base OID is the <code>cbQosConfigIndex</code> which gives us the value of the config related with <code>cbQosCMInfo</code> table</td>
</tr>
<tr>
<td>Index Tag OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.7.1.1.3</td>
<td><code>cbQosCMInfo</code> TagOID that will match with <code>cbQosConfigIndex</code> result</td>
</tr>
<tr>
<td>Index Tag</td>
<td>cmInfo</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{3};DOT[0:1];SKIP</td>
<td>(*)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 4 - cbQosCMInfo
</p>
<p><strong>(*) Dependency</strong></p>
<p>In this case, as the matching index is the full index and it will just heridate the IDX{3} tags</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscminfo_meas.jpg" alt="cbqoscminfo_meas" title="example of definition of cbQosCMInfo"></p>
<p>At this point, the IDX{4}, will be, with heridated tags from IDX{3}:</p>
<pre><code>&gt; Index: IDX{3}

[.1043][.1045] = &quot;Te1/0/3|2|ICMP|LAN_Out&quot;           || ifName | policyDirection | cmName | policyMapName
[.1043][.1051] = &quot;Te1/0/3|2|class-default|LAN_Out&quot;  || ifName | policyDirection | cmName | policyMapName
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal|CPP&quot;       || ifName | policyDirection | cmName | policyMapName


&gt; Index: IDX{4} | cbQosCMInfo | IDX{3};DOT[0:1];SKIP

...
[.1043][.1045] = &quot;Te1/0/3|2|ICMP|LAN_Out|&quot;           || ifName | policyDirection | cmName | policyMapName | cbQosCMInfo|3
[.1043][.1051] = &quot;Te1/0/3|2|class-default|LAN_Out|2&quot;  || ifName | policyDirection | cmName | policyMapName | cbQosCMInfo
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal|CPP|3&quot;       || ifName | policyDirection | cmName | policyMapName |cbQosCMInfo
...
</code></pre><h3 id="127-result">1.2.7 Result</h3>
<p>Finally, we setup the result of our multiindex.</p>
<p>As we have heredated all tags until the last index, we only need to setup up the result as:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Result</td>
<td>IDX{4}</td>
<td>Result of the multiindex</td>
</tr>
</tbody>
</table>
<p>And the final pair of <code>[index]:[TagValues]</code> will be:</p>
<pre><code>...
[.1043][.1045] = &quot;Te1/0/3|2|ICMP|LAN_Out|2&quot;
[.1043][.1051] = &quot;Te1/0/3|2|class-default|LAN_Out|2&quot;
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal|CPP|3&quot;
...
</code></pre><h2 id="13-configuring-filters">1.3 Configuring filters</h2>
<p>As the base OID of our CMStats is directly the <code>Service Policy Index</code>.<code>Object Index</code> based on <code>cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2</code> it will generate an entry for each object index, but not only the related with CM, also the PolicyMap, MatchStmt and all available object in all stats table.</p>
<p>In order to retrieve only the desired one based on what we are retrieving, we will define a <code>Measurement Filter</code></p>
<h3 id="131-oid-condition---filter-classmap">1.3.1 OID Condition - Filter classmap</h3>
<p>We want to filter only classmap objects, so we need to define a new condition over the OID <code>cbQosObjectsType - .1.3.6.1.4.1.9.9.166.1.5.1.1.3</code></p>
<p>A simple walk over this OID:</p>
<pre><code>&gt; cbQosObjectsType - .1.3.6.1.4.1.9.9.166.1.5.1.1.3

.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1043] = INTEGER: policymap(1)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1045] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1047] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1049] = INTEGER: queueing(4)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1051] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1053] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1085] = INTEGER: queueing(4)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1099] = INTEGER: policymap(1)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1101] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1103] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1105] = INTEGER: police(7)
....

</code></pre><p>And filtered by desired one: <code>classmap(2)</code>:</p>
<pre><code>...
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1045] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1051] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1101] = INTEGER: classmap(2)
...
</code></pre><p>Go to menu and click over <code>OID Condition</code> section
Create a <code>+ New</code> OID Condition and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cbQosObjectsType_classmap</td>
<td>The unique internal ID to identify the OID Condition</td>
</tr>
<tr>
<td>Is Multiple</td>
<td>false</td>
<td>It allows to create a OID condition based on already defined ones</td>
</tr>
<tr>
<td>OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.3</td>
<td>The OID to filter based on object type</td>
</tr>
<tr>
<td>CondType</td>
<td>(neq) numeric equal</td>
<td>As the output is an integer, we will select number equal as condition type</td>
</tr>
<tr>
<td>CondValue</td>
<td>2</td>
<td>Filter only the class objects</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: OIDCondition to filter classmap objects
</p>
<h3 id="132-measurementfilter---filter-classmap">1.3.2 MeasurementFilter - Filter classmap</h3>
<p>Now, we want to create a new measurement filter with already created OID condition</p>
<p>Go to menu and click over <code>Measurement Filters</code> section
Create a <code>+ New</code> OID Condition and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cisco_qos_cbQosCMStats_classmap</td>
<td>The unique internal ID to identify the Measurement Filter</td>
</tr>
<tr>
<td>Measurements</td>
<td>cisco_qos_cbQosCMStats..cbQosPolicyMapName</td>
<td>We will select the internal index of policyMapName</td>
</tr>
<tr>
<td>Filter type</td>
<td>OID Condition</td>
<td>Filter type</td>
</tr>
<tr>
<td>Oid Condition</td>
<td>cbQosObjectsType_classmap</td>
<td>The already created OID Condition only to filter classmap objects</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Measurement filter to apply OIDCondition on CMStats
</p>
<h2 id="14-configuring-measurement-group">1.4 Configuring Measurement Group</h2>
<p>Go to menu and click over <code>Measurement Filters</code> section
Create a <code>+ New</code> Measurement Group and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>Cisco_QOS</td>
<td>The unique internal ID to identify the Measurement Group</td>
</tr>
<tr>
<td>Measurements</td>
<td>cisco_qos_cbQosCMStats</td>
<td>Measurement from cisco_qos_cbQosCMStats</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Cisco_QOS measurement group with CMStats
</p>
<h2 id="15-configuring-device">1.5 Configuring Device</h2>
<p>Attach your new measurement group and filters to the existing Device with QoS enabled</p>
<h2 id="16-reload-configuration">1.6 Reload configuration</h2>
<p>In order to reload configuration you must click on the menu item <code>Reload Config</code>. Once the SNMP Collector will receive the signal and it will try to reload all configuration. During that process you won&rsquo;t be able to navigate until the process is finished.</p>
<h2 id="17-check-your-results">1.7 Check your results!</h2>
<p>See what are you collecting from the Runtime component!</p>
<ul>
<li>Click on <code>Runtime</code> menu item</li>
<li>Find your device and check  if its actived and connected. If not, check your connection data!</li>
<li>Click  on the eye icon and see what are you collecting!!!</li>
</ul>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/runtime_qoscm.jpg" alt="runtime_qoscm" title="Example of QoS CMStats"></p>
<h1 id="2-tsstats">2. TSStats</h1>
<p>The first set of data that we want to retrieve are the TSStats</p>
<h2 id="21-configuring-metrics">2.1 Configuring metrics</h2>
<p>Available metrics are defined on <code>cbQosCMStatsTable - 1.3.6.1.4.1.9.9.166.1.15.1.1</code>.
In our example we will configure the following metrics:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Field Name</th>
<th>IsTag</th>
<th>DataSrcType</th>
<th>GetRate</th>
<th>Base OID/Extradata</th>
<th>Scale</th>
<th>Shift</th>
</tr>
</thead>
<tbody>
<tr>
<td>cisco_cbQosTSStatsDelayedByte64</td>
<td>cbQosTSStatsDelayedByte64</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.19.1.1.3</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>cisco_cbQosTSStatsDelayedPkt64</td>
<td>cbQosCMPrePolicyByte64</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.19.1.1.6</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>cisco_cbQosTSStatsDropByte64</td>
<td>cbQosCMPrePolicyBitRate</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.19.1.1.9</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>As we have said, each metric will have a double index: <code>[Service Policy Index].[Object Index]</code></p>
<h2 id="12-configuring-measurements-1">1.2 Configuring measurements</h2>
<p>Let&rsquo;s start to define the measurement</p>
<h3 id="121-overview-1">1.2.1 Overview</h3>
<p>As we have defined, the TSStats needs the following tags to identify each metric:</p>
<ul>
<li>Interface</li>
<li>Direction</li>
<li>PolicyMap Name</li>
<li>ClassMap Name</li>
</ul>
<blockquote>
<p>Note that as a TS is related with ClassMap, we will retrieve also it</p>
</blockquote>
<h3 id="222-index-0--service-policy-index-tag-cbqosifindex">2.2.2 Index 0 | Service Policy Index Tag: cbQosIfIndex</h3>
<p>It is the same configuration as CMStats</p>
<p>The final output map of pairs [index]:[tag] will be:</p>
<pre><code>&gt; Index: IDX{0} | cbQosIfIndex

[.1043] = &quot;Te1/0/3&quot; || ifName
[.1099] = &quot;Te1/0/3&quot; || ifName
</code></pre><h3 id="223-index-1--service-policy-index-tag-cbqospolicydirection">2.2.3 Index 1 | Service Policy Index Tag: cbQosPolicyDirection</h3>
<p>It is the same configuration as CMStats</p>
<p>At this point, we will have that the <code>IDX{1}</code> will be:</p>
<pre><code>&gt; Index: IDX{0} | cbQosIfIndex

[.1043] = &quot;Te1/0/3&quot; || ifName
[.1099] = &quot;Te1/0/3&quot; || ifName

&gt; Index: IDX{1} | cbQosPolicyDirection | IDX{0};DOT[0:0];SKIP

[.1043] = &quot;Te1/0/3|2&quot; || ifName | policyDirection
[.1099] = &quot;Te1/0/3|1&quot; || ifName | policyDirection
</code></pre><h3 id="224-index-2--classmap-tag-cbqoscmname">2.2.4 Index 2 | ClassMap Tag: cbQosCMName</h3>
<p>As we have done on CMStats with PolicyMap name, as ClassMap is another object type, we need to iterate over relations OID - <code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4</code> in order to identify the related ClassMap</p>
<p>In this case, filtered by the matchstmt objects:</p>
<pre><code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4

...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1043] = Gauge32: 0
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045 # ts
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051 # ts
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1099] = Gauge32: 0 # policymap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101 # ts
...
</code></pre><p>So, as we have done on CMStats, we need to make a multiple indrection in order to retrieve the classmap name, so, we will create an as <strong>&quot;(snmp Table) Indexed with multiple indirect TAG&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_mit.jpg" alt="mi-indexed_mit" title="(snmp Table) Indexed with multiple indirect TAG"></p>
<p>We fill the index with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosCMName</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve cbQosCMName</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.4</td>
<td>Base OID is the <code>cbQosParentObjectsIndex</code> which gives us the value of the config related with <code>Object Index</code> from <code>ClassMap</code></td>
</tr>
<tr>
<td>Index Tag</td>
<td>cmName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Multi Tag OID</td>
<td>(*)</td>
<td>Multiple indirects to obtain the ClassMapName and keep it on ClassMap pair of <code>Service Policy Index</code>.<code>Object Index</code></td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{1};DOT[0:0];SKIP</td>
<td>(**)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 2 - cbQosCMName
</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscmname_ts_meas.jpg" alt="cbqoscmname_ts_meas" title="Example of CMName from TSStats"></p>
<p><strong>(*) Multi Tag OID</strong></p>
<p>We will define 2 TagOID:</p>
<p><em><strong>TagOID 0</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Index TagOID to retrieve the <code>Object Index</code> from <code>ClassMap</code></td>
</tr>
<tr>
<td>IndexFormat</td>
<td><code>${IDX1\|DOT[0:0]\|STRING}.$VAL1</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>This IndexFormat will modify the check condition and will create the desired index in order keep iterating over indirect tables. Following with the example:</p>
<p>The generated index is just the <code>Service Policy Index</code>.<code>Object Index</code> from <code>ClassMap</code>, so we can use this to retrieve any parameter from <code>ClassMapCFG</code> table, but using different indexes</p>
<p><em><strong>TagOID 1</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.7.1.1.1</td>
<td>Index TagOID to retrieve the ClassMap Name</td>
</tr>
<tr>
<td>IndexFormat</td>
<td>&ndash;</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscmname_meas_index.jpg" alt="cbqoscmname_meas_index" title="example of definition of cbqosCMName multi TagOID"></p>
<p><strong>(**) Dependency</strong></p>
<p>In this case, we will retrieve the  to retrieve only the <code>Service Policy Index</code> from IDX{1}</p>
<p>The logic is:</p>
<ul>
<li>From BaseOID, we will retrieve the desired parent index:</li>
</ul>
<pre><code>&gt; cbQosParentObjectsIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.4
...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101
...
</code></pre><ul>
<li>On the first TagOID, it will try to retrieve the ObjectIndex, but with a modified IDX:</li>
</ul>
<pre><code>&gt; ${IDX1|DOT[0:0]|STRING}.$VAL1
[.1043][.1045]
[.1043][.1051]
[.1099][.1101]


&gt; cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1045] = Gauge32: 1029
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1051] = Gauge32: 1025
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1101] = Gauge32: 1057
...
</code></pre><ul>
<li>And finally, the last TagOID will retrieve the CMName</li>
</ul>
<pre><code>&gt; cbQosCMName - .1.3.6.1.4.1.9.9.166.1.7.1.1.1

.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1025] = STRING: class-default
.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1029] = STRING: ICMP
.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1057] = STRING: NonLocal
</code></pre><p>The final index will be the Base with the retrieved tags from classmap name:</p>
<pre><code>[.1043][.1047] = &quot;ICMP&quot;
[.1043][.1053] = &quot;class-default&quot;
[.1099][.1103] = &quot;NonLocal&quot;
</code></pre><p>At this point, the IDX{2}, will be, with heridated tags from IDX{1}:</p>
<pre><code>&gt; Index IDX{1}:

[.1043] = &quot;Te1/0/3|2&quot; || ifName | policyDirection
[.1099] = &quot;Te1/0/3|1&quot; || ifName | policyDirection

&gt; Index: IDX{2} | cbQosCMName | IDX{1};DOT[0:0];SKIP

&gt;&gt; DOT[0:0] = [.1043] / [.1099]

[.1043][.1047] = &quot;Te1/0/3|2|ICMP&quot;           || ifName | policyDirection | cmName
[.1043][.1053] = &quot;Te1/0/3|2|class-default&quot;  || ifName | policyDirection | cmName
[.1099][.1103] = &quot;Te1/0/3|1|NonLocal&quot;       || ifName | policyDirection | cmName

</code></pre><h3 id="224-index-3--policymap-tag-policymapname">2.2.4 Index 3 | PolicyMap Tag: policyMapName</h3>
<p>As we have done on the previous index, we will try to retrieve also the  PolicyMap name, in this case, we need a double iteration to retrieve the PolicyMap parents from ClassMap- <code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4</code> in order to identify the related ClassMap</p>
<p>In this case, filtered by the matchstmt objects:</p>
<pre><code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4

...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1043] = Gauge32: 0
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045 # ts
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051 # ts
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1099] = Gauge32: 0 # policymap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101 # ts
...
</code></pre><p>To do that, we will repeat the step on the Index 2, but in this case we will add a new Tag OID to go over PolicyMap objects instead of ClassMap objects</p>
<p>we will create an as <strong>&quot;(snmp Table) Indexed with multiple indirect TAG&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_mit.jpg" alt="mi-indexed_mit" title="(snmp Table) Indexed with multiple indirect TAG"></p>
<p>We fill the index with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosPolicyMapName</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve cbQosPolicyMapName</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.4</td>
<td>Base OID is the <code>cbQosParentObjectsIndex</code> which gives us the value of the config related with <code>Object Index</code> from <code>PolicyMap</code></td>
</tr>
<tr>
<td>Index Tag</td>
<td>cmName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Multi Tag OID</td>
<td>(*)</td>
<td>Multiple indirects to obtain the ClassMapName and keep it on ClassMap pair of <code>Service Policy Index</code>.<code>Object Index</code></td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{2};DOT[0:1];SKIP</td>
<td>(**)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 3 - cbQosPolicyMapName
</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqospolicyname_ts_meas.jpg" alt="cbqospolicyname_ts_meas" title="Example of PolicyMapName from TSStats"></p>
<p><strong>(*) Multi Tag OID</strong></p>
<p>We will define 2 TagOID:</p>
<p><em><strong>TagOID 0</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.4</td>
<td>Index TagOID to retrieve the <code>Parent Object</code> from <code>ClassMap</code></td>
</tr>
<tr>
<td>IndexFormat</td>
<td><code>${IDX1\|DOT[0:0]\|STRING}.$VAL1</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>This IndexFormat will modify the check condition and will create the desired index in order keep iterating over indirect tables. Following with the example:</p>
<p>The generated index is just the <code>Service Policy Index</code>.<code>Object Index</code> from <code>ClassMap</code>, so we can use this to retrieve the index of <code>PolicyMap</code> related with this <code>ClassMap</code> table, but using different indexes</p>
<p><em><strong>TagOID 1</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Index TagOID to retrieve the <code>Object Index</code> from <code>PolicyMap</code></td>
</tr>
<tr>
<td>IndexFormat</td>
<td><code>${IDX1\|DOT[0:0]\|STRING}.$VAL1</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>This IndexFormat will modify the check condition and will create the desired index in order keep iterating over indirect tables. Following with the example:</p>
<p>The generated index is just the <code>Service Policy Index</code>.<code>Object Index</code> from <code>ClassMap</code>, so we can use this to retrieve any parameter from <code>ClassMapCFG</code> table, but using different indexes</p>
<p><em><strong>TagOID 2</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.6.1.1.1</td>
<td>Index TagOID to retrieve the PolicyMap Name</td>
</tr>
<tr>
<td>IndexFormat</td>
<td>&ndash;</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscmname_meas_index_ts.jpg" alt="cbqoscmname_meas_index_ts" title="example of definition of cbqosPolicyMap multi TagOID"></p>
<p><strong>(**) Dependency</strong></p>
<p>In this case, we need to retrieve both indexes from the IDX{2}, the complete CMIndex <code>Service Policy Index</code>.<code>Object Index</code></p>
<p>The logic is:</p>
<ul>
<li>From BaseOID, we will retrieve the desired parent index:</li>
</ul>
<pre><code>&gt; cbQosParentObjectsIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.4
...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101
...
</code></pre><ul>
<li>On the first TagOID, it will try to retrieve the cbQosParentObjectsIndex, but with a modified IDX, so we will match the related ClassMap</li>
</ul>
<pre><code>&gt; ${IDX1|DOT[0:0]|STRING}.$VAL1
[.1043][.1045]
[.1043][.1051]
[.1099][.1101]


&gt; cbQosParentObjectsIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.4

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1045] = Gauge32: 1043
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1051] = Gauge32: 1043
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1101] = Gauge32: 1099
...

</code></pre><ul>
<li>On the second TagOID, it will try to retrieve the ObjectIndex, but with a modified IDX:</li>
</ul>
<pre><code>&gt; ${IDX1|DOT[0:0]|STRING}.$VAL1
[.1043][.1043]
[.1043][.1043]
[.1099][.1099]


&gt; cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1043] = Gauge32: 1035
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1099] = Gauge32: 1027
...

</code></pre><ul>
<li>And finally, the last TagOID will retrieve the policyNameMap</li>
</ul>
<pre><code>&gt; cbQosPolicyMapName - 1.3.6.1.4.1.9.9.166.1.6.1.1.1

1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1035] = STRING: LAN_Out
1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1063] = STRING: CPP
</code></pre><p>The final index will be the Base with the retrieved tags from policy name:</p>
<pre><code>[.1043][.1047] = &quot;LAN_Out&quot;
[.1043][.1053] = &quot;LAN_Out&quot;
[.1099][.1103] = &quot;CPP&quot;
</code></pre><p>At this point, the IDX{3}, will be, with heridated tags from IDX{2}:</p>
<pre><code>&gt; Index: IDX{2}

[.1043][.1047] = &quot;Te1/0/3|2|ICMP&quot;           || ifName | policyDirection | cmName
[.1043][.1053] = &quot;Te1/0/3|2|class-default&quot;  || ifName | policyDirection | cmName
[.1099][.1103] = &quot;Te1/0/3|1|NonLocal&quot;       || ifName | policyDirection | cmName

&gt; Index: IDX{3} | cbQosPolicyMapName | IDX{2};DOT[0:1];SKIP

[.1043][.1047] = &quot;Te1/0/3|2|ICMP|LAN_Out&quot;           || ifName | policyDirection | cmName | policyMapName
[.1043][.1053] = &quot;Te1/0/3|2|class-default|LAN_Out&quot;  || ifName | policyDirection | cmName | policyMapName
[.1099][.1103] = &quot;Te1/0/3|1|NonLocal|CPP&quot;       || ifName | policyDirection | cmName | policyMapName

</code></pre><h3 id="224-result">2.2.4 Result</h3>
<p>Finally, we setup the result of our multiindex.</p>
<p>As we have heredated all tags until the last index, we only need to setup up the result as:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Result</td>
<td>IDX{3}</td>
<td>Result of the multiindex</td>
</tr>
</tbody>
</table>
<p>And the final pair of <code>[index]:[TagValues]</code> will be:</p>
<pre><code>...
[.1043][.1047] = &quot;Te1/0/3|2|ICMP|LAN_Out&quot;
[.1043][.1053] = &quot;Te1/0/3|2|class-default|LAN_Out&quot;
[.1099][.1103] = &quot;Te1/0/3|1|NonLocal|CPP&quot;
...
</code></pre><h2 id="23-configuring-filters">2.3 Configuring filters</h2>
<p>As the base OID of our CMStats is directly the <code>Service Policy Index</code>.<code>Object Index</code> based on <code>cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2</code> it will generate an entry for each object index, but not only the related with CM, also the PolicyMap, MatchStmt and all available object in all stats table.</p>
<p>In order to retrieve only the desired one based on what we are retrieving, we will define a <code>Measurement Filter</code></p>
<h3 id="231-oid-condition---filter-ts">2.3.1 OID Condition - Filter TS</h3>
<p>We want to filter only classmap objects, so we need to define a new condition over the OID <code>cbQosObjectsType - .1.3.6.1.4.1.9.9.166.1.5.1.1.3</code></p>
<p>A simple walk over this OID:</p>
<pre><code>&gt; cbQosObjectsType - .1.3.6.1.4.1.9.9.166.1.5.1.1.3

.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1043] = INTEGER: policymap(1)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1045] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1047] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1049] = INTEGER: queueing(4)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1051] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1053] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1085] = INTEGER: queueing(4)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1099] = INTEGER: policymap(1)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1101] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1103] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1105] = INTEGER: police(7)
....

</code></pre><p>And filtered by desired one: <code>trafficShaping(6)</code>:</p>
<pre><code>...
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1047] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1053] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1103] = INTEGER: trafficShaping(6)
...
</code></pre><p>Go to menu and click over <code>OID Condition</code> section
Create a <code>+ New</code> OID Condition and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cbQosObjectsType_trafficShaping</td>
<td>The unique internal ID to identify the OID Condition</td>
</tr>
<tr>
<td>Is Multiple</td>
<td>false</td>
<td>It allows to create a OID condition based on already defined ones</td>
</tr>
<tr>
<td>OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.3</td>
<td>The OID to filter based on object type</td>
</tr>
<tr>
<td>CondType</td>
<td>(neq) numeric equal</td>
<td>As the output is an integer, we will select number equal as condition type</td>
</tr>
<tr>
<td>CondValue</td>
<td>6</td>
<td>Filter only the class objects</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: OID Condition to filter trafficShaping
</p>
<h3 id="232-measurementfilter---filter-classmap">2.3.2 MeasurementFilter - Filter classmap</h3>
<p>Now, we want to create a new measurement filter with already created OID condition</p>
<p>Go to menu and click over <code>Measurement Filters</code> section
Create a <code>+ New</code> OID Condition and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cisco_qos_cbQosTSStats_trafficShaping</td>
<td>The unique internal ID to identify the Measurement Filter</td>
</tr>
<tr>
<td>Measurements</td>
<td>cisco_qos_cbQosTSStats..cbQosPolicyMapName</td>
<td>We will select the internal index of policyMapName</td>
</tr>
<tr>
<td>Filter type</td>
<td>OID Condition</td>
<td>Filter type</td>
</tr>
<tr>
<td>Oid Condition</td>
<td>cbQosObjectsType_trafficShaping</td>
<td>The already created OID Condition only to filter classmap objects</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Measurement filter to apply OIDCondition on TSStats
</p>
<h2 id="24-configuring-measurement-group">2.4 Configuring Measurement Group</h2>
<p>Go to menu and click over <code>Measurement Filters</code> section
Create a <code>+ New</code> Measurement Group and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>Cisco_QOS</td>
<td>The unique internal ID to identify the Measurement Group</td>
</tr>
<tr>
<td>Measurements</td>
<td>cisco_qos_cbQosTSStats</td>
<td>Measurement from cisco_qos_cbQosTSStats</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Cisco_QOS measurement group with TSStats
</p>
<h2 id="25-configuring-device">2.5 Configuring Device</h2>
<p>Attach your new measurement group and filters to the existing Device with QoS enabled</p>
<h2 id="26-reload-configuration">2.6 Reload configuration</h2>
<p>In order to reload configuration you must click on the menu item <code>Reload Config</code>. Once the SNMP Collector will receive the signal and it will try to reload all configuration. During that process you won&rsquo;t be able to navigate until the process is finished.</p>
<h2 id="27-check-your-results">2.7 Check your results!</h2>
<p>See what are you collecting from the Runtime component!</p>
<ul>
<li>Click on <code>Runtime</code> menu item</li>
<li>Find your device and check  if its actived and connected. If not, check your connection data!</li>
<li>Click  on the eye icon and see what are you collecting!!!</li>
</ul>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/runtime_qosts.jpg" alt="runtime_qosts" title="Example of QoS TSStats"></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f36a5fdcc98c0bf39b8b1adf455af28d">2 - Configuring Cisco Catalyst with basic metrics</h1>
    
	<h1 id="example-configuring-cisco-catalyst-with-basic-metrics">Example: Configuring Cisco Catalyst with basic metrics</h1>
<p>This example will show up how to configure a Cisco Catalyst on snmpcollector</p>
<h2 id="0-prerequisites--what-and-from-we-are-going-to-collect-our-data">0. Prerequisites : What and from we are going to collect our data?</h2>
<h3 id="01-snmp-device-model">0.1 SNMP Device model</h3>
<p>In order to select the correct metrics for our device, we must check first what model it is.
If you don&rsquo;t know the model, you can pre-add the device on SNMP Device Component and do a test connection. To do that:</p>
<ul>
<li>Click on <code>SNMP Device</code> menu item</li>
<li>A table with configured devices will show up. Press &ldquo;New&rdquo; button or edit an existing one to access to the configuration form.</li>
<li>Fill the device with the basic connection information</li>
<li>If everything is OK, you will be able to do a &ldquo;Test Connection&rdquo;. This button will show up a console with System information  of the Device.</li>
</ul>
<h3 id="02-select-metrics-to-collect-data">0.2 Select metrics to collect data</h3>
<p>The first step is selecting what metrics we want to collect. For this we can check for Cisco docs and defined MIBs like:</p>
<ul>
<li><a href="http://www.cisco.com/c/en/us/td/docs/net_mgmt/prime/infrastructure/3-1/user/guide/pi_ug/mon-pol-thresh.html">Cisco Doc</a></li>
<li><a href="http://www.cisco.com/c/en/us/support/docs/ip/simple-network-management-protocol-snmp/15215-collect-cpu-util-snmp.pdf">Cisco Example</a></li>
</ul>
<p>In this example, we are going to collect the following metrics to provide basic interface and performance status of our switch.</p>
<ul>
<li><strong>Basic Metrics</strong></li>
</ul>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>MIB</th>
<th>OID</th>
<th>Indexed</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifHCInOctets</td>
<td>IF-MIB</td>
<td>.1.3.6.1.2.1.31.1.1.1.6</td>
<td>ifName</td>
</tr>
<tr>
<td>ifHCOutOctets</td>
<td>IF-MIB</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
<td>ifName</td>
</tr>
<tr>
<td>ifHighSpeed</td>
<td>IF-MIB</td>
<td>.1.3.6.1.2.1.31.1.1.1.15</td>
<td>ifName</td>
</tr>
<tr>
<td>ifAlias</td>
<td>IF-MIB</td>
<td>.1.3.6.1.2.1.31.1.1.1.18</td>
<td>ifName</td>
</tr>
<tr>
<td>ciscoMemoryPoolUsed</td>
<td>CISCO-MEMORY-POOL-MIB</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.5</td>
<td>ciscoMemoryPoolName</td>
</tr>
<tr>
<td>ciscoMemoryPoolFree</td>
<td>CISCO-MEMORY-POOL-MIB</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.6</td>
<td>ciscoMemoryPoolName</td>
</tr>
<tr>
<td>cpmCPUTotal1minRev</td>
<td>CISCO-MEMORY-POOL-MIB</td>
<td>.1.3.6.1.4.1.9.9.109.1.1.1.1.7</td>
<td>cpmCPUTotalPhysicalIndex (depending on model)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Basic Metrics table
</p>
<p>In order to give more generic information, we will define the following extended metrics. On the next point we will see how to configure them.</p>
<ul>
<li><strong>Extended Metrics</strong></li>
</ul>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Formula</th>
<th>Indexed</th>
</tr>
</thead>
<tbody>
<tr>
<td>InputUtilization</td>
<td>((ifHCInOctets * 8)/(ifHighSpeed * 1000000)) * 100</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
</tr>
<tr>
<td>OutputUtilization</td>
<td>((ifHCOutOctets * 8)/(ifHighSpeed * 1000000)) * 100</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
</tr>
<tr>
<td>ciscoMemoryPool_utilization_percent</td>
<td>(ciscoMemoryPoolUsed/ciscoMemoryPoolFree+ciscoMemoryPoolUsed) * 100</td>
<td>.1.3.6.1.2.1.31.1.1.1.15</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Extended Metric table
</p>
<h2 id="1-configuring-metrics">1. Configuring Metrics</h2>
<p>Once we have defined our metrics its time to configure them on our SNMPCollector Instance:</p>
<ul>
<li>Click on <code>SNMP Metric</code> menu item</li>
<li>Click <code>+New</code> button. The metric form will show up.</li>
</ul>
<p><em>Notes:</em></p>
<ul>
<li>On <code>Counter32/64</code> metric type you can define <code>COUNTER32/64</code> as DataSrcType, which computes the difference between iterations. It only works with really counter behaivour.</li>
<li><code>IsTag</code> option allows to set the value as tag. The tag key will be defined as <code>Field Name</code></li>
<li><code>GetRate</code> option only works when <code>COUNTERNN</code> as DataSrcType. It divides the result of the computed difference by the elapsed time between polls.</li>
<li>Remember that you can always test your OIDs on SNMP Console from our pre-added SNMP Device</li>
</ul>
<p><em>Recomendations:</em></p>
<ul>
<li>In order to identify all your components IDs, we recommend you to set some prefix when you are configuring them. This will allow to find faster and set up devices easier. In this example, if.* Metrics are coming from a MIB that can be shared for more than one device type. For the CPU/Mem metrics, we will use the prefix <code>Cisco_Catalyst</code></li>
</ul>
<h3 id="11-configure-basic-metrics">1.1 Configure Basic metrics</h3>
<table>
<thead>
<tr>
<th>ID</th>
<th>Field Name</th>
<th>IsTag</th>
<th>DataSrcType</th>
<th>GetRate</th>
<th>Base OID/Extradata</th>
<th>Scale</th>
<th>Shift</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifHCInOctets</td>
<td>ifHCInOctets</td>
<td>false</td>
<td>COUNTER64</td>
<td>true</td>
<td>.1.3.6.1.2.1.31.1.1.1.6</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>ifHCOutOctets</td>
<td>ifHCOutOctets</td>
<td>false</td>
<td>COUNTER64</td>
<td>true</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>ifHighSpeed</td>
<td>ifHighSpeed</td>
<td>false</td>
<td>Gauge32</td>
<td>true</td>
<td>.1.3.6.1.2.1.31.1.1.1.15</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>ifAlias</td>
<td>ifAlias</td>
<td>true</td>
<td>OCTETSTRNG</td>
<td>&ndash;</td>
<td>.1.3.6.1.2.1.31.1.1.1.18</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Cisco_Catalyst_ciscoMemoryPoolUsed</td>
<td>memUsed</td>
<td>false</td>
<td>Gauge32</td>
<td>&ndash;</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.5</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Cisco_Catalyst_ciscoMemoryPoolFree</td>
<td>memFree</td>
<td>false</td>
<td>Gauge32</td>
<td>&ndash;</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.6</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Cisco_Catalyst_cpmCPUTotal1minRev</td>
<td>cpuUsed</td>
<td>false</td>
<td>Gauge32</td>
<td>&ndash;</td>
<td>.1.3.6.1.4.1.9.9.109.1.1.1.1.7</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: SNMP Basic Metrics configuration
</p>
<p>Once you get all your basic metrics, it is time to configure the extended ones:</p>
<h3 id="12-configure-extended-metrics">1.2 Configure Extended metrics</h3>
<table>
<thead>
<tr>
<th>ID</th>
<th>Field Name</th>
<th>IsTag</th>
<th>DataSrcType</th>
<th>GetRate</th>
<th>Base OID/Extradata</th>
<th>Scale</th>
<th>Shift</th>
</tr>
</thead>
<tbody>
<tr>
<td>InputUtilization</td>
<td>InputUtilization</td>
<td>false</td>
<td>STRINGEVAL</td>
<td>&ndash;</td>
<td>((ifHCInOctets * 8)/(ifHighSpeed * 1000000)) * 100</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>OutputUtilization</td>
<td>OutputUtilization</td>
<td>false</td>
<td>STRINGEVAL</td>
<td>&ndash;</td>
<td>((ifHCOutOctets * 8)/(ifHighSpeed * 1000000)) * 100</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Cisco_ciscoMemoryPool_utilization_percent</td>
<td>memUtilization</td>
<td>false</td>
<td>STRINGEVAL</td>
<td>&ndash;</td>
<td>(ciscoMemoryPoolUsed/ciscoMemoryPoolFree+ciscoMemoryPoolUsed) * 100</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: SNMP Extended Metrics configuration
</p>
<h2 id="2-configuring--measurements">2. Configuring  Measurements</h2>
<p>Once we have our metrics configured, its time to define where and how we want to store them in InfluxDB data structure: measurements.</p>
<p><em>Recomendations:</em></p>
<ul>
<li>If a collection of metrics are defined with the same index OID, try to set up them on the same measurement. This will reduce the number of walks to create the indexes and filterings rules.</li>
<li>Try to define the measurement name with a easy identifier to make configuring the devices easier for you.</li>
<li>If you are going to define metrics with &lsquo;nonZero&rsquo; report, remember that if the metric is not already defined on InfluxDB you won&rsquo;t be able to query it. We recommend you to create the metrics for few minutes and then change the report status to desired <code>nonZero</code>.</li>
</ul>
<p>To create a measurement:</p>
<ul>
<li>Click on Measurement menu item</li>
<li>Click <code>+New</code> button. The measurement form will show up.</li>
</ul>
<h3 id="21-ifmib-measurement">2.1 ifMIB Measurement</h3>
<p>The following metrics have the same index on the table and are coming from the same MIB, so we create a new measurement with ifMIB basic + extended metrics.</p>
<p>In our example, we are only interested of computed metrics, so, we need set the right report status of each one:</p>
<dd>:no_entry_sign:-ifHCInOctets</dd>
<dd>:no_entry_sign:-ifHCOutOctets</dd>
<dd>:no_entry_sign:-ifHighSpeed</dd>
<dd>:no_entry_sign:-ifAlias</dd>
<dd>:white_check_mark:-InputUtilization</dd>
<dd>:white_check_mark:-OutputUtilization</dd>
<br>
_Notes_:
<ul>
<li>As the defined extended metrics are computed, we need to add relational needed metrics on the same measurement.</li>
</ul>
<p>We define the Cisco_ifMIB_Basics measurement which will group all metrics. Remember that they are indexed with the name of the interfaces, so we need to set up like this:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>GetMode</th>
<th>Index OID</th>
<th>Tag OID</th>
<th>Index Tag</th>
<th>Index Tag Format</th>
<th>Index as Value</th>
<th>Metric Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_ifMIB_Basics</td>
<td>cisco_ifMib_basics</td>
<td>indexed</td>
<td>.1.3.6.1.2.1.2.2.1.2</td>
<td>&ndash;</td>
<td>portName</td>
<td>&ndash;</td>
<td>false</td>
<td><em>#BASICS</em>:<ul><li>ifHCInOctets</span></li><li>ifHCOutOctets</li> <li>ifHighSpeed</li><li>ifAlias</li></ul><em>#EXTENDED</em>:<ul><li>InputUtilization</li><li>OutputUtilization</li></ul></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifMIB Measurement configuration
</p>
<h3 id="22-cisco-memory-measurement">2.2 Cisco Memory Measurement</h3>
<p>Let&rsquo;s configure the Cisco Memory measurement. As we did on the ifMIB metrics, we need to have clear what metrics are we going to send. In our case, we are interested on send only the % usage of the Memory, so:</p>
<dd>:no_entry_sign:-Cisco_Catalyst_ciscoMemoryPoolUsed </dd>
<dd>:no_entry_sign:-Cisco_Catalyst_ciscoMemoryPoolFree </dd>
<dd>:white_check_mark:-Cisco_ciscoMemoryPool_utilization_percent </dd>
<br/>
<p>So we  create the new Measurement with the following configuration:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>GetMode</th>
<th>Index OID</th>
<th>Tag OID</th>
<th>Index Tag</th>
<th>Index Tag Format</th>
<th>Index as Value</th>
<th>Metric Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_Catalyst_ciscoMemoryPool</td>
<td>cisco_catalyst_ciscoMemoryPool</td>
<td>indexed</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.2</td>
<td>&ndash;</td>
<td>memIndex</td>
<td>&ndash;</td>
<td>false</td>
<td><em>#BASICS</em>:<ul><li>Cisco_Catalyst_ciscoMemoryPoolUsed</li><li>Cisco_Catalyst_ciscoMemoryPoolFree</li></ul><em>#EXTENDED</em>:<ul><li>Cisco_ciscoMemoryPool_utilization_percent</li></ul></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco Memory Measurement configuration
</p>
<h3 id="23-cisco-cpu-measurement">2.3 Cisco CPU Measurement</h3>
<p>Our last measurement: Cisco CPU. This OID is indexed by a double index:</p>
<p>In order to identify the physical entity to which these values correspond, we must poll the following MIB Object : cpmCPUTotalPhysicalIndex:</p>
<table>
<thead>
<tr>
<th>MIB Object</th>
<th>OID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cpmCPUTotalPhysicalIndex</td>
<td>1.3.6.1.4.1.9.9.109.1.1.1.1.2</td>
<td>Returns the index assigned on entPhysicalName</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: cpmCPUTotalPhysicalIndex MIB Object
</p>
With those values we can get the assigned name of each CPU Module from the following OID:
<table>
<thead>
<tr>
<th>MIB Object</th>
<th>OID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entPhysicalName</td>
<td>1.3.6.1.2.1.47.1.1.1.1.7</td>
<td>Returns the name of each CPU Module</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: entPhysicialName MIB Object
</p>
<p>Once we get our double indexed resolved we can configure our measurement&hellip; but before that, we must check out what would happen if the CPU Module are set up with the same name? The SNMPCollector will create 2 points with the same tag/field set, so it will only send 1 value!</p>
<p>In order to solve that, we can add an <code>Index Tag Format</code>. The SNMP Collector generates the following vars each time it does an Indexing operation:</p>
<ul>
<li><code>IndexOID</code> returns <code>$IDX1</code> and <code>$VAL1</code></li>
<li><code>Tag OID</code> returns <code>$IDX2</code> and <code>$VAL2</code></li>
</ul>
<p>So to distinguish some CPU with the same name we must set up the <code>Index Tag Format</code> with <code>$VAL2 - $IDX1</code>.</p>
<p>i.e: Tag set : <code>CPU Module 1 - 8</code></p>
<ul>
<li><code>$VAL2 = CPU Module 1</code> is the result of the entPhysicalName poll</li>
<li><code>$IDX1 = 8</code> is the index of entry table.</li>
</ul>
<p>With all cases checked, we can finally add our measurement:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>GetMode</th>
<th>Index OID</th>
<th>Tag OID</th>
<th>Index Tag</th>
<th>Index Tag Format</th>
<th>Index as Value</th>
<th>Metric Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_Catalyst_CiscoProcessMIB</td>
<td>cisco_catalyst_ciscoProcessMib</td>
<td>indexed_it</td>
<td>.1.3.6.1.4.1.9.9.109.1.1.1.1.2</td>
<td>.1.3.6.1.2.1.47.1.1.1.1.7</td>
<td>physIndex</td>
<td>$VAL2-$IDX1</td>
<td>false</td>
<td><em>#BASICS</em>:<ul><li>Cisco_Catalyst_cpmCPUTotal1minRev</li></ul></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco CPU Measurement configuration
</p>
<h2 id="3-configure-measurement-groups">3. Configure Measurement Groups</h2>
<p>Now, its time to create a template for all Cisco Catalyst switches!</p>
<ul>
<li>Click on <code>Measurement</code> Group from menu item</li>
<li>Press <code>+New</code> button or edit an existing one to access to the configuration form.</li>
</ul>
<p>Measurement Groups is a virtual group of measurements, it allows to have different templates in order to configure devices on a really easy way!</p>
<p>We don&rsquo;t have to  do any especial here, we only must to set up the ID and select the different measurement that are going to be part of our template:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_Catalyst_Template_Basic</td>
<td><ul><li>Cisco_ifMIB_Basics</li><li>Cisco_Catalyst_ciscoMemoryPool</li><li>Cisco_Catalyst_CiscoProcessMIB </li></ul></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco_Catalyst_Template Measurement Group configuration
</p>
<h2 id="4-configure-oid-conditions">4. Configure OID Conditions</h2>
<p>On this point we are now able to poll all data configured in our metrics. But lets do something more complex!
Lets filter what do we want to send, it is time to create some OIDs Conditions!</p>
<p>In our example we will work with the following requirements:</p>
<ul>
<li>(1) We only want the interfaces with UP state</li>
<li>(2) We only want the physical Eth interfaces</li>
</ul>
<p>So the result would be translated as: we only want those that comply with the following <code>(1) &amp;&amp; (2)</code></p>
<p>To do that, we need to create a total of three OID conditions, lets configure all:</p>
<ul>
<li>Click on <code>OID Condtions</code> item on menu</li>
<li>Click <code>+New</code> button. The measurement form will show up.</li>
</ul>
<h3 id="41-interfaces-with-up-status-condition">4.1 Interfaces with UP status condition</h3>
<p>The MIB object that returns that information is the ifOperStatus</p>
<table>
<thead>
<tr>
<th>MIB Object</th>
<th>OID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifOperStatus</td>
<td>1.3.6.1.2.1.2.2.1.8</td>
<td>Return the status of the interface: <dd>up(1), down(2), testing(3)</dd></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifOperStatus MIB Object
</p>
<p>We only want the up interfaces so <code>numerical equal than 1</code>. Let&rsquo;s create a OID Condition with the following configuration:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Is Multiple</th>
<th>OID</th>
<th>CondType</th>
<th>CondValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifOperStatus_UP</td>
<td>false</td>
<td>.1.3.6.1.2.1.2.2.1.8</td>
<td>neq</td>
<td>1</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifOperStatus_UP OID Condition configuration
</p>
<h3 id="42-interfaces-eth-like">4.2 Interfaces ETH like</h3>
<p>The MIB object that returns that information is the ifType</p>
<table>
<thead>
<tr>
<th>MIB Object</th>
<th>OID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifType</td>
<td>1.3.6.1.2.1.2.2.1.3</td>
<td>The type of interface, distinguished according to the physical/link protocol</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifType MIB Object
</p>
<p>The eth are <code>ifType = 6</code>, so we need to configure a new OID Condition:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Is Multiple</th>
<th>OID</th>
<th>CondType</th>
<th>CondValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifType_ETH</td>
<td>false</td>
<td>.1.3.6.1.2.1.2.2.1.3</td>
<td>neq</td>
<td>6</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifType_ETH OID Condition configuration
</p>
### 4.3 Mutiple OID Condition: UP && ETH
<p>In order to apply a multiple condition we need to activate the configuration flag <code>Is Multiple</code> and set the field <code>OID Condition</code> with the logical combination of already created ones:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Is Multiple</th>
<th>OID Condition</th>
<th>CondType</th>
<th>CondValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>interfaces_ETH_UP</td>
<td>true</td>
<td>ifOperStatus_UP &amp;&amp; ifType_ETH</td>
<td>neq</td>
<td>6</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: interfaces_ETH_UP Multiple Condition configuration
</p>
<h2 id="5-configure-measurement-filters">5. Configure Measurement Filters</h2>
<p>Once we have our OID Conditions configured, lets put them on a Measurement Filter. The measurement filter is applied on measurement with Indexed/Tag OIDs.</p>
<p>In our case, we need to create the filter in our ifMIB measurement to only get those interfaces that are UP and are Ethernet like.</p>
<p>To to that, lets create a Measurement Filter:</p>
<ul>
<li>Click on <code>Measurement Filters</code> menu</li>
<li>Click <code>+New</code> button. The filter form will show up.</li>
</ul>
<p>Lets fill our Measurement filter.</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Measurements</th>
<th>Filter Type</th>
<th>OID Condition</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_ifMIB_UP_ETH</td>
<td>Cisco_ifMIB_Basics</td>
<td>OID Condition</td>
<td>interfaces_ETH_UP</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco_ifMIB_UP_ETH Measurement Filter configuration
</p>
<h2 id="6-configure-snmp-device">6. Configure SNMP Device</h2>
<p>Lets do a check what we have done until now:</p>
<ul>
<li>We defined our core basic metrics to get performance and port statistics of our device!</li>
<li>We defined 3 different measurements with complex indexes that allows to get every entry of metric objects without overlapping!</li>
<li>We defined a Basic Template that allows us to configure a new device in less than 1 minute!</li>
<li>We defined 3 OID Conditions and created a filter to only get ETH and UP interfaces!</li>
</ul>
<p>So its time to add our device and attach our already created components:</p>
<p><em>Note</em>:</p>
<ul>
<li>To simplfy the following configuration, we will skip connection data fields.</li>
</ul>
<table>
<thead>
<tr>
<th>ID</th>
<th>ConnectionData</th>
<th>Measurement Groups</th>
<th>Measurement Filters</th>
</tr>
</thead>
<tbody>
<tr>
<td>myCisco_Catalyst</td>
<td>&hellip;.</td>
<td>Cisco_Catalyst_Template_Basic</td>
<td>Cisco_ifMIB_UP_ETH</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco SNMP Device configuration
</p>
<h2 id="7-reload-configuration">7. Reload configuration</h2>
<p>In order to reload configuration you must click on the menu item <code>Reload Config</code>. Once the SNMP Collector will receive the signal and it will try to reload all configuration. During that process you won&rsquo;t be able to navigate until the process is finished.</p>
<h2 id="8-check-your-results">8. Check your results!</h2>
<p>See what are you collecting from the Runtime component!</p>
<ul>
<li>Click on <code>Runtime</code> menu item</li>
<li>Find your device and check  if its actived and connected. If not, check your connection data!</li>
<li>Click  on the eye icon and see what are you collecting!!!</li>
</ul>
<p>You must check the Metrics Info panel:</p>
<ul>
<li>Check that the are our 3 defined Measurements</li>
<li>Click on every measurement and check  the created Metrics and its value</li>
<li>Check the indexes are correct and that the filters are applied correctly on our ifMIB measurement!</li>
</ul>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/toni-moreno/snmpcollector">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 The Docsy Authors All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>






 











<script src="/snmpcollector.org/js/main.min.896cb6dbfd99311917f617f11a34a008f8af4bcb5d6468ae4559425dfffc6ebe.js" integrity="sha256-iWy22/2ZMRkX9hfxGjSgCPivS8tdZGiuRVlCXf/8br4=" crossorigin="anonymous"></script>




  </body>
</html>
