<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=toni-moreno.github.io/snmpcollector.org/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=toni-moreno.github.io/snmpcollector.org/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/toni-moreno.github.io/snmpcollector.org/main.bb749f5013a81b9f8f0ae300ebeac84d81825e31211e2ee03ac9ca077a4afae7bd9c497d50a4c5e3a39f59434c1f6590080497647d4a5f647f1e76f4ef0298e8.css integrity="sha512-u3SfUBOoG5+PCuMA6+rITYGCXjEhHi7gOsnKB3pK+ue9nEl9UKTF46OfWUNMH2WQCASXZH1KX2R/Hnb07wKY6A==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>- snmpcollector</title><meta name=description content><link rel=canonical href=toni-moreno.github.io/snmpcollector.org/docs/examples/example-configuring-cisco-catalyst-switch/><meta name=twitter:card content="summary"><meta name=twitter:title content><meta name=twitter:description content="Example: Configuring Cisco Catalyst with basic metrics This example will show up how to configure a Cisco Catalyst on snmpcollector
0. Prerequisites : What and from we are going to collect our data? 0.1 SNMP Device model In order to select the correct metrics for our device, we must check first what model it is. If you don&rsquo;t know the model, you can pre-add the device on SNMP Device Component and do a test connection."><meta name=twitter:site content="@"><meta name=twitter:creator content="@"><meta property="og:title" content><meta property="og:description" content="Example: Configuring Cisco Catalyst with basic metrics This example will show up how to configure a Cisco Catalyst on snmpcollector
0. Prerequisites : What and from we are going to collect our data? 0.1 SNMP Device model In order to select the correct metrics for our device, we must check first what model it is. If you don&rsquo;t know the model, you can pre-add the device on SNMP Device Component and do a test connection."><meta property="og:type" content="article"><meta property="og:url" content="toni-moreno.github.io/snmpcollector.org/docs/examples/example-configuring-cisco-catalyst-switch/"><meta property="og:site_name" content="snmpcollector"><meta property="article:publisher" content="https://www.facebook.com/"><meta property="article:author" content="https://www.facebook.com/"><meta property="og:locale" content><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"toni-moreno.github.io\/snmpcollector.org"},{"@type":"ListItem","position":3,"name":"Docs","item":"toni-moreno.github.io\/snmpcollector.org\/docs\/"},{"@type":"ListItem","position":4,"name":"Examples","item":"toni-moreno.github.io\/snmpcollector.org\/docs\/examples\/"},{"@type":"ListItem","position":5,"name":"Example Configuring Cisco Catalyst Switch","item":"toni-moreno.github.io\/snmpcollector.org\/docs\/examples\/example-configuring-cisco-catalyst-switch\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=toni-moreno.github.io/snmpcollector.org/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=toni-moreno.github.io/snmpcollector.org/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=toni-moreno.github.io/snmpcollector.org/favicon-16x16.png><link rel=manifest href=toni-moreno.github.io/snmpcollector.org/site.webmanifest></head><body class="docs single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org>snmpcollector</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/toni-moreno/snmpcollector><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class="nav-item active"><a class=nav-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/introduction/>Docs</a></li><li class=nav-item><a class=nav-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/introduction/>Download</a></li><li class=nav-item><a class=nav-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/introduction/>Community</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Prologue</h3><ul class=list-unstyled><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/introduction/>Introduction</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/quick-start/>Quick Start</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/prologue/commands/>Commands</a></li></ul><h3>Components</h3><ul class=list-unstyled><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/variable-catalog/>Variable Catalog</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/influx-servers/>InfluxDB Servers</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/oid-conditions/>OID Conditions</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/snmp-metrics/>SNMP Metrics</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/measurements/>Measurements</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/measurement-groups/>Measurement Groups</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/measurement-filters/>Measurement Filters</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/custom-filters/>Custom filters</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/components/snmp-devices/>SNMP Devices</a></li></ul><h3>Runtime</h3><ul class=list-unstyled><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/runtime/runtime/>Runtime</a></li></ul><h3>Data Management</h3><h3>Troubleshooting</h3><h3>Examples</h3><h3>Public Templates DB</h3><h3>Contributions</h3><h3>Changelog</h3><h3>help</h3><ul class=list-unstyled><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/help/how-to-update/>How to Update</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/help/troubleshooting/>Troubleshooting</a></li><li><a class=docs-link href=toni-moreno.github.io/snmpcollector.org/toni-moreno.github.io/snmpcollector.org/docs/help/faq/>FAQ</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#0-prerequisites--what-and-from-we-are-going-to-collect-our-data>0. Prerequisites : What and from we are going to collect our data?</a><ul><li><a href=#01-snmp-device-model>0.1 SNMP Device model</a></li><li><a href=#02-select-metrics-to-collect-data>0.2 Select metrics to collect data</a></li></ul></li><li><a href=#1-configuring-metrics>1. Configuring Metrics</a><ul><li><a href=#11-configure-basic-metrics>1.1 Configure Basic metrics</a></li><li><a href=#12-configure-extended-metrics>1.2 Configure Extended metrics</a></li></ul></li><li><a href=#2-configuring--measurements>2. Configuring Measurements</a><ul><li><a href=#21-ifmib-measurement>2.1 ifMIB Measurement</a></li><li><a href=#22-cisco-memory-measurement>2.2 Cisco Memory Measurement</a></li><li><a href=#23-cisco-cpu-measurement>2.3 Cisco CPU Measurement</a></li></ul></li><li><a href=#3-configure-measurement-groups>3. Configure Measurement Groups</a></li><li><a href=#4-configure-oid-conditions>4. Configure OID Conditions</a><ul><li><a href=#41-interfaces-with-up-status-condition>4.1 Interfaces with UP status condition</a></li><li><a href=#42-interfaces-eth-like>4.2 Interfaces ETH like</a></li></ul></li><li><a href=#5-configure-measurement-filters>5. Configure Measurement Filters</a></li><li><a href=#6-configure-snmp-device>6. Configure SNMP Device</a></li><li><a href=#7-reload-configuration>7. Reload configuration</a></li><li><a href=#8-check-your-results>8. Check your results!</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1></h1><p class=lead></p><h1 id=example-configuring-cisco-catalyst-with-basic-metrics>Example: Configuring Cisco Catalyst with basic metrics</h1><p>This example will show up how to configure a Cisco Catalyst on snmpcollector</p><h2 id=0-prerequisites--what-and-from-we-are-going-to-collect-our-data>0. Prerequisites : What and from we are going to collect our data?<a href=#0-prerequisites--what-and-from-we-are-going-to-collect-our-data class=anchor aria-hidden=true>#</a></h2><h3 id=01-snmp-device-model>0.1 SNMP Device model<a href=#01-snmp-device-model class=anchor aria-hidden=true>#</a></h3><p>In order to select the correct metrics for our device, we must check first what model it is.
If you don&rsquo;t know the model, you can pre-add the device on SNMP Device Component and do a test connection. To do that:</p><ul><li>Click on <code>SNMP Device</code> menu item</li><li>A table with configured devices will show up. Press &ldquo;New&rdquo; button or edit an existing one to access to the configuration form.</li><li>Fill the device with the basic connection information</li><li>If everything is OK, you will be able to do a &ldquo;Test Connection&rdquo;. This button will show up a console with System information of the Device.</li></ul><h3 id=02-select-metrics-to-collect-data>0.2 Select metrics to collect data<a href=#02-select-metrics-to-collect-data class=anchor aria-hidden=true>#</a></h3><p>The first step is selecting what metrics we want to collect. For this we can check for Cisco docs and defined MIBs like:</p><ul><li><a href=http://www.cisco.com/c/en/us/td/docs/net_mgmt/prime/infrastructure/3-1/user/guide/pi_ug/mon-pol-thresh.html>Cisco Doc</a></li><li><a href=http://www.cisco.com/c/en/us/support/docs/ip/simple-network-management-protocol-snmp/15215-collect-cpu-util-snmp.pdf>Cisco Example</a></li></ul><p>In this example, we are going to collect the following metrics to provide basic interface and performance status of our switch.</p><ul><li><strong>Basic Metrics</strong></li></ul><table><thead><tr><th>Metric Name</th><th>MIB</th><th>OID</th><th>Indexed</th></tr></thead><tbody><tr><td>ifHCInOctets</td><td>IF-MIB</td><td>.1.3.6.1.2.1.31.1.1.1.6</td><td>ifName</td></tr><tr><td>ifHCOutOctets</td><td>IF-MIB</td><td>.1.3.6.1.2.1.31.1.1.1.10</td><td>ifName</td></tr><tr><td>ifHighSpeed</td><td>IF-MIB</td><td>.1.3.6.1.2.1.31.1.1.1.15</td><td>ifName</td></tr><tr><td>ifAlias</td><td>IF-MIB</td><td>.1.3.6.1.2.1.31.1.1.1.18</td><td>ifName</td></tr><tr><td>ciscoMemoryPoolUsed</td><td>CISCO-MEMORY-POOL-MIB</td><td>.1.3.6.1.4.1.9.9.48.1.1.1.5</td><td>ciscoMemoryPoolName</td></tr><tr><td>ciscoMemoryPoolFree</td><td>CISCO-MEMORY-POOL-MIB</td><td>.1.3.6.1.4.1.9.9.48.1.1.1.6</td><td>ciscoMemoryPoolName</td></tr><tr><td>cpmCPUTotal1minRev</td><td>CISCO-MEMORY-POOL-MIB</td><td>.1.3.6.1.4.1.9.9.109.1.1.1.1.7</td><td>cpmCPUTotalPhysicalIndex (depending on model)</td></tr></tbody></table><p align=center>‚ÑπÔ∏è Basic Metrics table</p><p>In order to give more generic information, we will define the following extended metrics. On the next point we will see how to configure them.</p><ul><li><strong>Extended Metrics</strong></li></ul><table><thead><tr><th>Metric Name</th><th>Formula</th><th>Indexed</th></tr></thead><tbody><tr><td>InputUtilization</td><td>((ifHCInOctets * 8)/(ifHighSpeed * 1000000)) * 100</td><td>.1.3.6.1.2.1.31.1.1.1.10</td></tr><tr><td>OutputUtilization</td><td>((ifHCOutOctets * 8)/(ifHighSpeed * 1000000)) * 100</td><td>.1.3.6.1.2.1.31.1.1.1.10</td></tr><tr><td>ciscoMemoryPool_utilization_percent</td><td>(ciscoMemoryPoolUsed/ciscoMemoryPoolFree+ciscoMemoryPoolUsed) * 100</td><td>.1.3.6.1.2.1.31.1.1.1.15</td></tr></tbody></table><p align=center>‚ÑπÔ∏è Extended Metric table</p><h2 id=1-configuring-metrics>1. Configuring Metrics<a href=#1-configuring-metrics class=anchor aria-hidden=true>#</a></h2><p>Once we have defined our metrics its time to configure them on our SNMPCollector Instance:</p><ul><li>Click on <code>SNMP Metric</code> menu item</li><li>Click <code>+New</code> button. The metric form will show up.</li></ul><p><em>Notes:</em></p><ul><li>On <code>Counter32/64</code> metric type you can define <code>COUNTER32/64</code> as DataSrcType, which computes the difference between iterations. It only works with really counter behaivour.</li><li><code>IsTag</code> option allows to set the value as tag. The tag key will be defined as <code>Field Name</code></li><li><code>GetRate</code> option only works when <code>COUNTERNN</code> as DataSrcType. It divides the result of the computed difference by the elapsed time between polls.</li><li>Remember that you can always test your OIDs on SNMP Console from our pre-added SNMP Device</li></ul><p><em>Recomendations:</em></p><ul><li>In order to identify all your components IDs, we recommend you to set some prefix when you are configuring them. This will allow to find faster and set up devices easier. In this example, if.* Metrics are coming from a MIB that can be shared for more than one device type. For the CPU/Mem metrics, we will use the prefix <code>Cisco_Catalyst</code></li></ul><h3 id=11-configure-basic-metrics>1.1 Configure Basic metrics<a href=#11-configure-basic-metrics class=anchor aria-hidden=true>#</a></h3><table><thead><tr><th>ID</th><th>Field Name</th><th>IsTag</th><th>DataSrcType</th><th>GetRate</th><th>Base OID/Extradata</th><th>Scale</th><th>Shift</th></tr></thead><tbody><tr><td>ifHCInOctets</td><td>ifHCInOctets</td><td>false</td><td>COUNTER64</td><td>true</td><td>.1.3.6.1.2.1.31.1.1.1.6</td><td>0</td><td>0</td></tr><tr><td>ifHCOutOctets</td><td>ifHCOutOctets</td><td>false</td><td>COUNTER64</td><td>true</td><td>.1.3.6.1.2.1.31.1.1.1.10</td><td>0</td><td>0</td></tr><tr><td>ifHighSpeed</td><td>ifHighSpeed</td><td>false</td><td>Gauge32</td><td>true</td><td>.1.3.6.1.2.1.31.1.1.1.15</td><td>0</td><td>0</td></tr><tr><td>ifAlias</td><td>ifAlias</td><td>true</td><td>OCTETSTRNG</td><td>&ndash;</td><td>.1.3.6.1.2.1.31.1.1.1.18</td><td>0</td><td>0</td></tr><tr><td>Cisco_Catalyst_ciscoMemoryPoolUsed</td><td>memUsed</td><td>false</td><td>Gauge32</td><td>&ndash;</td><td>.1.3.6.1.4.1.9.9.48.1.1.1.5</td><td>0</td><td>0</td></tr><tr><td>Cisco_Catalyst_ciscoMemoryPoolFree</td><td>memFree</td><td>false</td><td>Gauge32</td><td>&ndash;</td><td>.1.3.6.1.4.1.9.9.48.1.1.1.6</td><td>0</td><td>0</td></tr><tr><td>Cisco_Catalyst_cpmCPUTotal1minRev</td><td>cpuUsed</td><td>false</td><td>Gauge32</td><td>&ndash;</td><td>.1.3.6.1.4.1.9.9.109.1.1.1.1.7</td><td>0</td><td>0</td></tr></tbody></table><p align=center>‚ÑπÔ∏è SNMP Basic Metrics configuration</p><p>Once you get all your basic metrics, it is time to configure the extended ones:</p><h3 id=12-configure-extended-metrics>1.2 Configure Extended metrics<a href=#12-configure-extended-metrics class=anchor aria-hidden=true>#</a></h3><table><thead><tr><th>ID</th><th>Field Name</th><th>IsTag</th><th>DataSrcType</th><th>GetRate</th><th>Base OID/Extradata</th><th>Scale</th><th>Shift</th></tr></thead><tbody><tr><td>InputUtilization</td><td>InputUtilization</td><td>false</td><td>STRINGEVAL</td><td>&ndash;</td><td>((ifHCInOctets * 8)/(ifHighSpeed * 1000000)) * 100</td><td>0</td><td>0</td></tr><tr><td>OutputUtilization</td><td>OutputUtilization</td><td>false</td><td>STRINGEVAL</td><td>&ndash;</td><td>((ifHCOutOctets * 8)/(ifHighSpeed * 1000000)) * 100</td><td>0</td><td>0</td></tr><tr><td>Cisco_ciscoMemoryPool_utilization_percent</td><td>memUtilization</td><td>false</td><td>STRINGEVAL</td><td>&ndash;</td><td>(ciscoMemoryPoolUsed/ciscoMemoryPoolFree+ciscoMemoryPoolUsed) * 100</td><td>0</td><td>0</td></tr></tbody></table><p align=center>‚ÑπÔ∏è SNMP Extended Metrics configuration</p><h2 id=2-configuring--measurements>2. Configuring Measurements<a href=#2-configuring--measurements class=anchor aria-hidden=true>#</a></h2><p>Once we have our metrics configured, its time to define where and how we want to store them in InfluxDB data structure: measurements.</p><p><em>Recomendations:</em></p><ul><li>If a collection of metrics are defined with the same index OID, try to set up them on the same measurement. This will reduce the number of walks to create the indexes and filterings rules.</li><li>Try to define the measurement name with a easy identifier to make configuring the devices easier for you.</li><li>If you are going to define metrics with &lsquo;nonZero&rsquo; report, remember that if the metric is not already defined on InfluxDB you won&rsquo;t be able to query it. We recommend you to create the metrics for few minutes and then change the report status to desired <code>nonZero</code>.</li></ul><p>To create a measurement:</p><ul><li>Click on Measurement menu item</li><li>Click <code>+New</code> button. The measurement form will show up.</li></ul><h3 id=21-ifmib-measurement>2.1 ifMIB Measurement<a href=#21-ifmib-measurement class=anchor aria-hidden=true>#</a></h3><p>The following metrics have the same index on the table and are coming from the same MIB, so we create a new measurement with ifMIB basic + extended metrics.</p><p>In our example, we are only interested of computed metrics, so, we need set the right report status of each one:</p><dd>üö´-ifHCInOctets</dd><dd>üö´-ifHCOutOctets</dd><dd>üö´-ifHighSpeed</dd><dd>üö´-ifAlias</dd><dd>‚úÖ-InputUtilization</dd><dd>‚úÖ-OutputUtilization</dd><br>_Notes_:<ul><li>As the defined extended metrics are computed, we need to add relational needed metrics on the same measurement.</li></ul><p>We define the Cisco_ifMIB_Basics measurement which will group all metrics. Remember that they are indexed with the name of the interfaces, so we need to set up like this:</p><table><thead><tr><th>ID</th><th>Name</th><th>GetMode</th><th>Index OID</th><th>Tag OID</th><th>Index Tag</th><th>Index Tag Format</th><th>Index as Value</th><th>Metric Fields</th></tr></thead><tbody><tr><td>Cisco_ifMIB_Basics</td><td>cisco_ifMib_basics</td><td>indexed</td><td>.1.3.6.1.2.1.2.2.1.2</td><td>&ndash;</td><td>portName</td><td>&ndash;</td><td>false</td><td><em>#BASICS</em>:<ul><li>ifHCInOctets</span></li><li>ifHCOutOctets</li><li>ifHighSpeed</li><li>ifAlias</li></ul><em>#EXTENDED</em>:<ul><li>InputUtilization</li><li>OutputUtilization</li></ul></td></tr></tbody></table><p align=center>‚ÑπÔ∏è ifMIB Measurement configuration</p><h3 id=22-cisco-memory-measurement>2.2 Cisco Memory Measurement<a href=#22-cisco-memory-measurement class=anchor aria-hidden=true>#</a></h3><p>Let&rsquo;s configure the Cisco Memory measurement. As we did on the ifMIB metrics, we need to have clear what metrics are we going to send. In our case, we are interested on send only the % usage of the Memory, so:</p><dd>üö´-Cisco_Catalyst_ciscoMemoryPoolUsed</dd><dd>üö´-Cisco_Catalyst_ciscoMemoryPoolFree</dd><dd>‚úÖ-Cisco_ciscoMemoryPool_utilization_percent</dd><br><p>So we create the new Measurement with the following configuration:</p><table><thead><tr><th>ID</th><th>Name</th><th>GetMode</th><th>Index OID</th><th>Tag OID</th><th>Index Tag</th><th>Index Tag Format</th><th>Index as Value</th><th>Metric Fields</th></tr></thead><tbody><tr><td>Cisco_Catalyst_ciscoMemoryPool</td><td>cisco_catalyst_ciscoMemoryPool</td><td>indexed</td><td>.1.3.6.1.4.1.9.9.48.1.1.1.2</td><td>&ndash;</td><td>memIndex</td><td>&ndash;</td><td>false</td><td><em>#BASICS</em>:<ul><li>Cisco_Catalyst_ciscoMemoryPoolUsed</li><li>Cisco_Catalyst_ciscoMemoryPoolFree</li></ul><em>#EXTENDED</em>:<ul><li>Cisco_ciscoMemoryPool_utilization_percent</li></ul></td></tr></tbody></table><p align=center>‚ÑπÔ∏è Cisco Memory Measurement configuration</p><h3 id=23-cisco-cpu-measurement>2.3 Cisco CPU Measurement<a href=#23-cisco-cpu-measurement class=anchor aria-hidden=true>#</a></h3><p>Our last measurement: Cisco CPU. This OID is indexed by a double index:</p><p>In order to identify the physical entity to which these values correspond, we must poll the following MIB Object : cpmCPUTotalPhysicalIndex:</p><table><thead><tr><th>MIB Object</th><th>OID</th><th>Description</th></tr></thead><tbody><tr><td>cpmCPUTotalPhysicalIndex</td><td>1.3.6.1.4.1.9.9.109.1.1.1.1.2</td><td>Returns the index assigned on entPhysicalName</td></tr></tbody></table><p align=center>‚ÑπÔ∏è cpmCPUTotalPhysicalIndex MIB Object</p>With those values we can get the assigned name of each CPU Module from the following OID:<table><thead><tr><th>MIB Object</th><th>OID</th><th>Description</th></tr></thead><tbody><tr><td>entPhysicalName</td><td>1.3.6.1.2.1.47.1.1.1.1.7</td><td>Returns the name of each CPU Module</td></tr></tbody></table><p align=center>‚ÑπÔ∏è entPhysicialName MIB Object</p><p>Once we get our double indexed resolved we can configure our measurement&mldr; but before that, we must check out what would happen if the CPU Module are set up with the same name? The SNMPCollector will create 2 points with the same tag/field set, so it will only send 1 value!</p><p>In order to solve that, we can add an <code>Index Tag Format</code>. The SNMP Collector generates the following vars each time it does an Indexing operation:</p><ul><li><code>IndexOID</code> returns <code>$IDX1</code> and <code>$VAL1</code></li><li><code>Tag OID</code> returns <code>$IDX2</code> and <code>$VAL2</code></li></ul><p>So to distinguish some CPU with the same name we must set up the <code>Index Tag Format</code> with <code>$VAL2 - $IDX1</code>.</p><p>i.e: Tag set : <code>CPU Module 1 - 8</code></p><ul><li><code>$VAL2 = CPU Module 1</code> is the result of the entPhysicalName poll</li><li><code>$IDX1 = 8</code> is the index of entry table.</li></ul><p>With all cases checked, we can finally add our measurement:</p><table><thead><tr><th>ID</th><th>Name</th><th>GetMode</th><th>Index OID</th><th>Tag OID</th><th>Index Tag</th><th>Index Tag Format</th><th>Index as Value</th><th>Metric Fields</th></tr></thead><tbody><tr><td>Cisco_Catalyst_CiscoProcessMIB</td><td>cisco_catalyst_ciscoProcessMib</td><td>indexed_it</td><td>.1.3.6.1.4.1.9.9.109.1.1.1.1.2</td><td>.1.3.6.1.2.1.47.1.1.1.1.7</td><td>physIndex</td><td>$VAL2-$IDX1</td><td>false</td><td><em>#BASICS</em>:<ul><li>Cisco_Catalyst_cpmCPUTotal1minRev</li></ul></td></tr></tbody></table><p align=center>‚ÑπÔ∏è Cisco CPU Measurement configuration</p><h2 id=3-configure-measurement-groups>3. Configure Measurement Groups<a href=#3-configure-measurement-groups class=anchor aria-hidden=true>#</a></h2><p>Now, its time to create a template for all Cisco Catalyst switches!</p><ul><li>Click on <code>Measurement</code> Group from menu item</li><li>Press <code>+New</code> button or edit an existing one to access to the configuration form.</li></ul><p>Measurement Groups is a virtual group of measurements, it allows to have different templates in order to configure devices on a really easy way!</p><p>We don&rsquo;t have to do any especial here, we only must to set up the ID and select the different measurement that are going to be part of our template:</p><table><thead><tr><th>ID</th><th>Name</th></tr></thead><tbody><tr><td>Cisco_Catalyst_Template_Basic</td><td><ul><li>Cisco_ifMIB_Basics</li><li>Cisco_Catalyst_ciscoMemoryPool</li><li>Cisco_Catalyst_CiscoProcessMIB</li></ul></td></tr></tbody></table><p align=center>‚ÑπÔ∏è Cisco_Catalyst_Template Measurement Group configuration</p><h2 id=4-configure-oid-conditions>4. Configure OID Conditions<a href=#4-configure-oid-conditions class=anchor aria-hidden=true>#</a></h2><p>On this point we are now able to poll all data configured in our metrics. But lets do something more complex!
Lets filter what do we want to send, it is time to create some OIDs Conditions!</p><p>In our example we will work with the following requirements:</p><ul><li>(1) We only want the interfaces with UP state</li><li>(2) We only want the physical Eth interfaces</li></ul><p>So the result would be translated as: we only want those that comply with the following <code>(1) && (2)</code></p><p>To do that, we need to create a total of three OID conditions, lets configure all:</p><ul><li>Click on <code>OID Condtions</code> item on menu</li><li>Click <code>+New</code> button. The measurement form will show up.</li></ul><h3 id=41-interfaces-with-up-status-condition>4.1 Interfaces with UP status condition<a href=#41-interfaces-with-up-status-condition class=anchor aria-hidden=true>#</a></h3><p>The MIB object that returns that information is the ifOperStatus</p><table><thead><tr><th>MIB Object</th><th>OID</th><th>Description</th></tr></thead><tbody><tr><td>ifOperStatus</td><td>1.3.6.1.2.1.2.2.1.8</td><td>Return the status of the interface:<dd>up(1), down(2), testing(3)</dd></td></tr></tbody></table><p align=center>‚ÑπÔ∏è ifOperStatus MIB Object</p><p>We only want the up interfaces so <code>numerical equal than 1</code>. Let&rsquo;s create a OID Condition with the following configuration:</p><table><thead><tr><th>ID</th><th>Is Multiple</th><th>OID</th><th>CondType</th><th>CondValue</th></tr></thead><tbody><tr><td>ifOperStatus_UP</td><td>false</td><td>.1.3.6.1.2.1.2.2.1.8</td><td>neq</td><td>1</td></tr></tbody></table><p align=center>‚ÑπÔ∏è ifOperStatus_UP OID Condition configuration</p><h3 id=42-interfaces-eth-like>4.2 Interfaces ETH like<a href=#42-interfaces-eth-like class=anchor aria-hidden=true>#</a></h3><p>The MIB object that returns that information is the ifType</p><table><thead><tr><th>MIB Object</th><th>OID</th><th>Description</th></tr></thead><tbody><tr><td>ifType</td><td>1.3.6.1.2.1.2.2.1.3</td><td>The type of interface, distinguished according to the physical/link protocol</td></tr></tbody></table><p align=center>‚ÑπÔ∏è ifType MIB Object</p><p>The eth are <code>ifType = 6</code>, so we need to configure a new OID Condition:</p><table><thead><tr><th>ID</th><th>Is Multiple</th><th>OID</th><th>CondType</th><th>CondValue</th></tr></thead><tbody><tr><td>ifType_ETH</td><td>false</td><td>.1.3.6.1.2.1.2.2.1.3</td><td>neq</td><td>6</td></tr></tbody></table><p align=center>‚ÑπÔ∏è ifType_ETH OID Condition configuration</p>### 4.3 Mutiple OID Condition: UP && ETH<p>In order to apply a multiple condition we need to activate the configuration flag <code>Is Multiple</code> and set the field <code>OID Condition</code> with the logical combination of already created ones:</p><table><thead><tr><th>ID</th><th>Is Multiple</th><th>OID Condition</th><th>CondType</th><th>CondValue</th></tr></thead><tbody><tr><td>interfaces_ETH_UP</td><td>true</td><td>ifOperStatus_UP && ifType_ETH</td><td>neq</td><td>6</td></tr></tbody></table><p align=center>‚ÑπÔ∏è interfaces_ETH_UP Multiple Condition configuration</p><h2 id=5-configure-measurement-filters>5. Configure Measurement Filters<a href=#5-configure-measurement-filters class=anchor aria-hidden=true>#</a></h2><p>Once we have our OID Conditions configured, lets put them on a Measurement Filter. The measurement filter is applied on measurement with Indexed/Tag OIDs.</p><p>In our case, we need to create the filter in our ifMIB measurement to only get those interfaces that are UP and are Ethernet like.</p><p>To to that, lets create a Measurement Filter:</p><ul><li>Click on <code>Measurement Filters</code> menu</li><li>Click <code>+New</code> button. The filter form will show up.</li></ul><p>Lets fill our Measurement filter.</p><table><thead><tr><th>ID</th><th>Measurements</th><th>Filter Type</th><th>OID Condition</th></tr></thead><tbody><tr><td>Cisco_ifMIB_UP_ETH</td><td>Cisco_ifMIB_Basics</td><td>OID Condition</td><td>interfaces_ETH_UP</td></tr></tbody></table><p align=center>‚ÑπÔ∏è Cisco_ifMIB_UP_ETH Measurement Filter configuration</p><h2 id=6-configure-snmp-device>6. Configure SNMP Device<a href=#6-configure-snmp-device class=anchor aria-hidden=true>#</a></h2><p>Lets do a check what we have done until now:</p><ul><li>We defined our core basic metrics to get performance and port statistics of our device!</li><li>We defined 3 different measurements with complex indexes that allows to get every entry of metric objects without overlapping!</li><li>We defined a Basic Template that allows us to configure a new device in less than 1 minute!</li><li>We defined 3 OID Conditions and created a filter to only get ETH and UP interfaces!</li></ul><p>So its time to add our device and attach our already created components:</p><p><em>Note</em>:</p><ul><li>To simplfy the following configuration, we will skip connection data fields.</li></ul><table><thead><tr><th>ID</th><th>ConnectionData</th><th>Measurement Groups</th><th>Measurement Filters</th></tr></thead><tbody><tr><td>myCisco_Catalyst</td><td>&mldr;.</td><td>Cisco_Catalyst_Template_Basic</td><td>Cisco_ifMIB_UP_ETH</td></tr></tbody></table><p align=center>‚ÑπÔ∏è Cisco SNMP Device configuration</p><h2 id=7-reload-configuration>7. Reload configuration<a href=#7-reload-configuration class=anchor aria-hidden=true>#</a></h2><p>In order to reload configuration you must click on the menu item <code>Reload Config</code>. Once the SNMP Collector will receive the signal and it will try to reload all configuration. During that process you won&rsquo;t be able to navigate until the process is finished.</p><h2 id=8-check-your-results>8. Check your results!<a href=#8-check-your-results class=anchor aria-hidden=true>#</a></h2><p>See what are you collecting from the Runtime component!</p><ul><li>Click on <code>Runtime</code> menu item</li><li>Find your device and check if its actived and connected. If not, check your connection data!</li><li>Click on the eye icon and see what are you collecting!!!</li></ul><p>You must check the Metrics Info panel:</p><ul><li>Check that the are our 3 defined Measurements</li><li>Click on every measurement and check the created Metrics and its value</li><li>Check the indexes are correct and that the filters are applied correctly on our ifMIB measurement!</li></ul><div class="docs-navigation d-flex justify-content-between"><a href=toni-moreno.github.io/snmpcollector.org/docs/examples/example-cisco-qos/><div class="card my-1"><div class="card-body py-2">&larr;</div></div></a><a class=ms-auto href=toni-moreno.github.io/snmpcollector.org/docs/examples/examples/><div class="card my-1"><div class="card-body py-2">&rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=/toni-moreno.github.io/snmpcollector.org/js/highlight.min.5c9528a6a1c07a12ee5032cb94e4c7bef72740593cde4b26300995d7e94526b35ea2b5b6981f7ac317032690ad6c5318f3ff17d6117f383c0346b3cd7a7771a2.js integrity="sha512-XJUopqHAehLuUDLLlOTHvvcnQFk83ksmMAmV1+lFJrNeorW2mB96wxcDJpCtbFMY8/8X1hF/ODwDRrPNendxog==" crossorigin=anonymous defer></script><script src=/toni-moreno.github.io/snmpcollector.org/main.min.398009e84eec0d0056c796393dd59c0fc1256540b3c6ebcd70d26840a1b2691113affd7d2d9d9e37aa22e3877e8a95b26b19dcd28341036f26390ee91ded7d25.js integrity="sha512-OYAJ6E7sDQBWx5Y5PdWcD8ElZUCzxuvNcNJoQKGyaRETr/19LZ2eN6oi44d+ipWyaxnc0oNBA28mOQ7pHe19JQ==" crossorigin=anonymous defer></script><script src=/toni-moreno.github.io/snmpcollector.org/index.min.37ececb1bdf358eb15c15d491ed044f194c680c9df72770cb05fdfd7c0dd24803b0c6854c5f63c3a380e9b4c979e93789223241c62167bdc3aa98739d16a1291.js integrity="sha512-N+zssb3zWOsVwV1JHtBE8ZTGgMnfcncMsF/f18DdJIA7DGhUxfY8OjgOm0yXnpN4kiMkHGIWe9w6qYc50WoSkQ==" crossorigin=anonymous defer></script></body></html>