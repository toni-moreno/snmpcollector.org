<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.79.1" /><link rel="canonical" type="text/html" href="https://toni-moreno.github.io/snmpcollector.org/docs/">
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon" href="/snmpcollector.org/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/snmpcollector.org/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/snmpcollector.org/favicons/android-192x192.png" sizes="192x192">

<title>Documentation | SnmpCollector</title><meta property="og:title" content="Documentation" />
<meta property="og:description" content="SnmpCollector Documentation Site" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://toni-moreno.github.io/snmpcollector.org/docs/" />
<meta property="og:site_name" content="SnmpCollector" />
<meta itemprop="name" content="Documentation">
<meta itemprop="description" content="SnmpCollector Documentation Site">
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Documentation"/>
<meta name="twitter:description" content="SnmpCollector Documentation Site"/>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-00000000-0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>






<link rel="preload" href="/snmpcollector.org/scss/main.min.dc02de46d72d920d6e138b26f521fe130fed76e2d7d4255dc58caad42ea30557.css" as="style">
<link href="/snmpcollector.org/scss/main.min.dc02de46d72d920d6e138b26f521fe130fed76e2d7d4255dc58caad42ea30557.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>



<link rel="stylesheet" href="/snmpcollector.org/css/shortcodes.css"/>


  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/snmpcollector.org/">
		<span class="navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zM197.0804 232.033c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zM197.0839 232.0372c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zM197.0804 177.6188c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zM197.0839 177.623c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zM197.5309 286.4723c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zM197.5344 286.4765c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zM197.0804 340.5784c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zM197.0839 340.5826c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">SnmpCollector</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/snmpcollector.org/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/snmpcollector.org/downloads/" ><span>Downloads</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
<input type="search" class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete="off">

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/snmpcollector.org/docs/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Documentation</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-6e17e09fffc1050f46600282def85180">Overview</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-93aadc1aba179e6928539400a09b9e4e">Getting Started</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-932ffc3fce2c0d53176b7aab42dd4377">Components</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1: <a href="#pg-2ed908ec0403807c373f97e7088cd9d0">Variable Catalog</a></li>


    
  
    
    
	
<li>3.2: <a href="#pg-ee7593b8312fb112f6eadded6e973ff1">InfluxDB Servers</a></li>


    
  
    
    
	
<li>3.3: <a href="#pg-17194248b4e48ffaf50500c56de1fc49">OID Conditions</a></li>


    
  
    
    
	
<li>3.4: <a href="#pg-0fa749381cb8f5663dde598b51b53ff6">SNMP Metrics</a></li>


    
  
    
    
	
<li>3.5: <a href="#pg-daf69d2f5e0b50c8f64e6be2a2cee861">Measurements</a></li>


    
  
    
    
	
<li>3.6: <a href="#pg-671acd2f0e66e3202a46d5eeb5934592">Measurement Groups</a></li>


    
  
    
    
	
<li>3.7: <a href="#pg-945a4dd3a380a22644205041d4929a54">Measurement Filters</a></li>


    
  
    
    
	
<li>3.8: <a href="#pg-fee52b9179a2be221706b69513ab80b3">Custom filters</a></li>


    
  
    
    
	
<li>3.9: <a href="#pg-6d26fca9683a2feabd2302dc677e117f">SNMP Devices</a></li>


    
  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-294d94bbf833bcc4308deea69b572771">Runtime</a></li>


    
  
    
    
	
<li>5: <a href="#pg-fe572f0081db30d87dad1bb9f4f963ee">Data Management</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>5.1: <a href="#pg-ea173074f44cd460a38e6246191bd278">Import</a></li>


    
  
    
    
	
<li>5.2: <a href="#pg-2ee6ccf5bafcd55d77825059e1918e29">Export</a></li>


    
  

    </ul>
    
  
    
    
	
<li>6: <a href="#pg-6342c6ce985f24cf77e31aac9b1cdc33">Troubleshooting</a></li>


    
  
    
    
	
<li>7: <a href="#pg-fb0f854c53f1ba28ad4c2ccf8d24df34">Examples</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>7.1: <a href="#pg-0eecdc864a95f5c7c01cd168dadaaf7a">Retrieve metrics from Cisco QoS - CISCO-CLASS-BASED-QOS-MIB</a></li>


    
  
    
    
	
<li>7.2: <a href="#pg-f36a5fdcc98c0bf39b8b1adf455af28d">Configuring Cisco Catalyst with basic metrics</a></li>


    
  

    </ul>
    
  
    
    
	
<li>8: <a href="#pg-8df6ea6904416b571ff9bc73afb50933">Reference</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>8.1: <a href="#pg-b4844bf7ad55d40af2d1321689461651">Public Device Dashboard templates</a></li>


    
  

    </ul>
    
  

    </ul>


<div class="content">
      

<div class="pageinfo pageinfo-primary">
<p>This is a placeholder page that shows you how to use this template site.</p>

</div>

<p>This section is where the user documentation for your project lives - all the information your users need to understand and successfully use your project.</p>
<p>For large documentation sets we recommend adding content under the headings in this section, though if some or all of them don’t apply to your project feel free to remove them or add your own. You can see an example of a smaller Docsy documentation site in the <a href="https://docsy.dev/docs/">Docsy User Guide</a>, which lives in the <a href="https://github.com/google/docsy/tree/master/userguide">Docsy theme repo</a> if you&rsquo;d like to copy its docs section.</p>
<p>Other content such as marketing material, case studies, and community updates should live in the <a href="/about/">About</a> and <a href="/community/">Community</a> pages.</p>
<p>Find out how to use the Docsy theme in the <a href="https://docsy.dev/docs/">Docsy User Guide</a>. You can learn more about how to organize your documentation (and how we organized this site) in <a href="https://docsy.dev/docs/best-practices/organizing-content/">Organizing Your Content</a>.</p>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6e17e09fffc1050f46600282def85180">1 - Overview</h1>
    <div class="lead">Here&rsquo;s where your user finds out if your project is for them.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This is a placeholder page that shows you how to use this template site.</p>

</div>

<p>The Overview is where your users find out about your project. Depending on the size of your docset, you can have a separate overview page (like this one) or put your overview contents in the Documentation landing page (like in the Docsy User Guide).</p>
<p>Try answering these questions for your user in this page:</p>
<h2 id="what-is-it">What is it?</h2>
<p>Introduce your project, including what it does or lets you do, why you would use it, and its primary goal (and how it achieves it). This should be similar to your README description, though you can go into a little more detail here if you want.</p>
<h2 id="why-do-i-want-it">Why do I want it?</h2>
<p>Help your user know if your project will help them. Useful information can include:</p>
<ul>
<li>
<p><strong>What is it good for?</strong>: What types of problems does your project solve? What are the benefits of using it?</p>
</li>
<li>
<p><strong>What is it not good for?</strong>: For example, point out situations that might intuitively seem suited for your project, but aren&rsquo;t for some reason. Also mention known limitations, scaling issues, or anything else that might let your users know if the project is not for them.</p>
</li>
<li>
<p><strong>What is it <em>not yet</em> good for?</strong>: Highlight any useful features that are coming soon.</p>
</li>
</ul>
<h2 id="where-should-i-go-next">Where should I go next?</h2>
<p>Give your users next steps from the Overview. For example:</p>
<ul>
<li><a href="/docs/getting-started/">Getting Started</a>: Get started with $project</li>
<li><a href="/docs/examples/">Examples</a>: Check out some example code!</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-93aadc1aba179e6928539400a09b9e4e">2 - Getting Started</h1>
    
	<p>SnmpCollector is a full featured Generic SNMP data collector with Web Administration Interface Open Source tool which has as main goal simplify  the configuration for getting data from any  device which snmp protocol support and send resulting data to an influxdb backend.</p>
<p>For complete information on installation from binary package and configuration you could read the <a href="https://github.com/toni-moreno/snmpcollector/wiki">snmpcollector wiki</a>.</p>
<p>If you wish to compile from source code you can follow the next steps</p>
<h2 id="run-from-master">Run from master</h2>
<p>If you want to build a package yourself, or contribute. Here is a guide for how to do that.</p>
<h3 id="dependencies">Dependencies</h3>
<ul>
<li>Go 1.5 for snmpcollector &lt; 0.8</li>
<li>Go 1.11 for snmpcollector &gt;= 0.8</li>
<li>NodeJS &gt;=6.2.1</li>
</ul>
<h3 id="get-code-and--setup-example-config">Get Code and  setup example config</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">git clone https://github.com/toni-moreno/snmpcollector.git
<span style="color:#204a87">cd</span> snmpcollector
cp conf/sample.config.toml conf/config.toml
</code></pre></div><h3 id="building-the-backend">Building the backend</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">go run build.go build           
</code></pre></div><h3 id="building-frontend-and-backend-in-production-mode">Building frontend and backend in production mode</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm install
<span style="color:#000">PATH</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">$(</span>npm bin<span style="color:#204a87;font-weight:bold">)</span>:<span style="color:#000">$PATH</span>            <span style="color:#8f5902;font-style:italic"># or export PATH=$(npm bin):$PATH depending on your shell</span>
npm run build:prod               <span style="color:#8f5902;font-style:italic"># will build fronted and backend</span>
</code></pre></div><h3 id="creating-minimal-package-targz">Creating minimal package tar.gz</h3>
<p>After building frontend and backend you wil do</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm run postbuild <span style="color:#8f5902;font-style:italic">#will build fronted and backend</span>
</code></pre></div><h3 id="creating-rpm-and-deb-packages">Creating rpm and deb packages</h3>
<p>you  will need previously installed the fpm/rpm and deb packaging tools.
After building frontend and backend  you will do.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">go run build.go latest
</code></pre></div><h3 id="running-first-time">Running first time</h3>
<p>To execute without any configuration you need a minimal config.toml file on the conf directory.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cp conf/sample.config.toml conf/config.toml
./bin/snmpcollector
</code></pre></div><p>This will create a default user with username <em>adm1</em> and password <em>adm1pass</em> (don&rsquo;t forget to change them!).</p>
<h3 id="recompile-backend-on-source-change-only-for-developers">Recompile backend on source change (only for developers)</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">go get github.com/unknwon/bra
npm start
</code></pre></div><p>will init a change autodetect webserver with angular-cli (ng serve) and also a autodetect and recompile process with bra for the backend</p>
<h4 id="online-config">Online config</h4>
<p>Now you wil be able to configure metrics/measuremnets and devices from the builting web server at  http://localhost:8090 or http://localhost:4200 if working in development mode (npm start)</p>
<h3 id="offline-configuration">Offline configuration.</h3>
<p>You will be able also insert data directly on the sqlite db that snmpcollector has been created at first execution on config/snmpcollector.db examples on example_config.sql</p>
<pre><code>cat conf/example_config.sql |sqlite3 conf/snmpcollector.db
</code></pre>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-932ffc3fce2c0d53176b7aab42dd4377">3 - Components</h1>
    <div class="lead">Low level reference docs for your project.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-2ed908ec0403807c373f97e7088cd9d0">3.1 - Variable Catalog</h1>
    <div class="lead">The variable catalog let us to define variable names ( and its default values if not redefined before) to use on STRINGEVAL metric types, These variables could be redefined on each device maintaining the metric formula definition across devices.</div>
	<h2 id="view">View</h2>
<p>Available Variables are shown as table. This will appear every time you navigate from menu.</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/variable-catalog/images/variable_catalog_edit.JPG">
    
    <img src="/snmpcollector.org/docs/components/variable-catalog/images/variable_catalog_edit_hu1d6e9a85264afb4fb71d0c8b3e4a7d01_30373_1200x800_fit_q100_catmullrom.JPG"
         width="614" height="349"
         alt="" />
    
  </a>
  <figcaption></figcaption>
</figure>
<h2 id="addedit-variables-to-the-catalog">Add/Edit Variables to the catalog</h2>
<ul>
<li>
<p><strong>Add</strong>: In the catalog list click on new button <img src="images/new_button.JPG" alt="New Button"></p>
</li>
<li>
<p><strong>Edit</strong>: In the catalog list click the edit&rsquo;s button <img src="images/edit_button.JPG" alt="Edit Button"></p>
</li>
</ul>
<p>The Create/Modify form will show up:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/variable-catalog/images/variable_catalog_edit.JPG">
    
    <img src="/snmpcollector.org/docs/components/variable-catalog/images/variable_catalog_edit_hu1d6e9a85264afb4fb71d0c8b3e4a7d01_30373_1200x800_fit_q100_catmullrom.JPG"
         width="614" height="349"
         alt="Edit variables" />
    
  </a>
  <figcaption>Edit variables</figcaption>
</figure>
<h3 id="configuration-parameters">Configuration Parameters</h3>
<p>These are the following parameters, that let you create an usable Variable</p>
<table>
<thead>
<tr>
<th>Type of settings</th>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Variable settings</td>
<td>ID</td>
<td>Text String that uniquely identify the variable ( and will be placed on STRINGEVAL formulas)</td>
</tr>
<tr>
<td></td>
<td>type</td>
<td>The type of the variable ( STRINGEVAL could be used to generate numbers as well as strings, as the evaluation engine let us a lot of expresions see !  <a href="https://github.com/Knetic/govaluate/blob/master/MANUAL.md">EVALUATION MANUAL</a></td>
</tr>
<tr>
<td></td>
<td>Value</td>
<td>The default value if not redefined elsewhere</td>
</tr>
<tr>
<td>Extra settings</td>
<td>Description</td>
<td>Some useful description to administrators</td>
</tr>
</tbody>
</table>
<h3 id="variable-redefinition">Variable Redefinition</h3>
<p>All variables could be redefined on the host definition as &ldquo;Device Variables&rdquo; with its custom value , if not redefined but used on any of the measurements defined in the device the default value will be taken.</p>
<h3 id="multi-edit-in-variable-catalog">Multi edit in Variable Catalog</h3>
<p>Multi edit has 2 options: Remove and Change property</p>
<ol>
<li>
<p>Remove: Allows to remove all the selected items</p>
</li>
<li>
<p>Change property: Allows to change the selected property of all the selected items. The properties are the same defined in the configuration.</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Options/Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type</td>
<td>Input</td>
<td>Type of the new variable</td>
</tr>
<tr>
<td>Value</td>
<td>Input</td>
<td>Value of the new variable</td>
</tr>
</tbody>
</table>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ee7593b8312fb112f6eadded6e973ff1">3.2 - InfluxDB Servers</h1>
    <div class="lead">Defined InfluxDB Servers where collected metrics are stored.</div>
	<h2 id="view">View</h2>
<p>Configured Influx Servers are shown as table. This will appear every time you navigate from menu.</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/influx-servers/images/config_influx_servers_list.jpg">
    
    <img src="/snmpcollector.org/docs/components/influx-servers/images/config_influx_servers_list_hu82e3f6c6c97ebdb26a2e898e120058c6_36288_1200x800_fit_q100_catmullrom.jpg"
         width="1093" height="176"
         alt="influx servers list" />
    
  </a>
  <figcaption>influx servers list</figcaption>
</figure>
<h2 id="addedit-influxdb-output-databases">Add/Edit InfluxDB output databases</h2>
<ul>
<li>
<p><strong>Add</strong>: In the InfluxDB Servers list click on new button <img src="images/new_button.JPG" alt="New Button"></p>
</li>
<li>
<p><strong>Edit</strong>: Click on InfluxDB edit&rsquo;s button <img src="images/edit_button.JPG" alt="Edit Button"></p>
</li>
</ul>
<p>The Create/Modify form will show up:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/influx-servers/images/config_influx_servers_edit.jpg">
    
    <img src="/snmpcollector.org/docs/components/influx-servers/images/config_influx_servers_edit_hue0bf08791cb000fad2621cb3473e381e_53462_1200x800_fit_q100_catmullrom.jpg"
         width="608" height="642"
         alt="New button" />
    
  </a>
  <figcaption>New button</figcaption>
</figure>
<h3 id="configuration-parameters">Configuration Parameters</h3>
<p>These are the following parameters, that let you create an HTTP based InfluxDB Connection</p>
<table>
<thead>
<tr>
<th>Type of Settings</th>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Server settings</td>
<td>ID</td>
<td>Text String that uniquely identify the influxdb connection</td>
</tr>
<tr>
<td></td>
<td>Host</td>
<td>The hostname/IP to connect</td>
</tr>
<tr>
<td></td>
<td>Port</td>
<td>The port to connect</td>
</tr>
<tr>
<td></td>
<td>Timeout</td>
<td>Connection timeout</td>
</tr>
<tr>
<td>Database settings</td>
<td>DB</td>
<td>InfluxDB database&rsquo;s Name</td>
</tr>
<tr>
<td></td>
<td>User</td>
<td>Username with <code>WRITE</code> privileges on selected InfluxDB database</td>
</tr>
<tr>
<td></td>
<td>Password</td>
<td>Password of related User</td>
</tr>
<tr>
<td></td>
<td>Retention Policy</td>
<td>Database retention policy name</td>
</tr>
<tr>
<td></td>
<td>Timestamp Precision</td>
<td>Time units of the Timestamp</td>
</tr>
<tr>
<td>Extra settings</td>
<td>User Agent</td>
<td>HTTP user agent sent to the database backend ( useful to debug input data from de backend view), if not set the agent will send as user agent <em>snmpCollector-<code>&lt;InstanceID&gt;</code></em> (from the [general] config.toml section)</td>
</tr>
<tr>
<td></td>
<td>Description</td>
<td>Some useful description to administrators</td>
</tr>
</tbody>
</table>
<h3 id="dummy-server">Dummy Server</h3>
<p>Until the user doesn&rsquo;t set up any database, an internal <code>dummy server</code> is created to send data from all gathered devices discarding data at the end of poll.</p>
<h3 id="the-default-server">The &ldquo;default&rdquo; Server</h3>
<p>SnmpCollector is able to send its own stats to InfluxDB: it will look for an InfluxDB Server named &ldquo;default&rdquo; to use as output backend, if it doesn&rsquo;t exist It will send over the <code>Dummy Server</code>.</p>
<p>(Pending define default and dummy influxservers)</p>
<h3 id="multi-edit-in-influx-servers">Multi edit in Influx Servers</h3>
<p>Multi edit has 2 options: Remove and Change property</p>
<ol>
<li>
<p>Remove: Allows to remove all the selected items</p>
</li>
<li>
<p>Change property: Allows to change the selected property of all the selected items. The properties are the same defined in the configuration.</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Options/Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>Precision</td>
<td>Selector</td>
<td>h,m,s,ms,u,ns</td>
</tr>
<tr>
<td>Retention</td>
<td>Input</td>
<td>Retention policy name</td>
</tr>
<tr>
<td>Timeout</td>
<td>Input</td>
<td>&ldquo;X&rdquo; s</td>
</tr>
</tbody>
</table>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-17194248b4e48ffaf50500c56de1fc49">3.3 - OID Conditions</h1>
    <div class="lead">This component allows the user define some conditions based on OID query and rules. Those Conditions can be used on <code>SNMP Metrics</code> to create counters and to create <code>Measurement Filters</code></div>
	<h2 id="view">View</h2>
<p>Configured <strong>OID Conditions</strong> are shown as table. This will appear every time you navigate from menu.</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/oid-conditions/images/config_oid_conditions_list.JPG">
    
    <img src="/snmpcollector.org/docs/components/oid-conditions/images/config_oid_conditions_list_hu82bd64d1bf55143c2d3098751e5fafe9_63114_1200x800_fit_q100_catmullrom.JPG"
         width="1096" height="325"
         alt="" />
    
  </a>
  <figcaption></figcaption>
</figure>
<h2 id="addedit-oid-conditions">Add/Edit OID Conditions</h2>
<ul>
<li>
<p><strong>Add</strong>: In the OID Conditions list click on new button <img src="images/new_button.JPG" alt="New Button"></p>
</li>
<li>
<p><strong>Edit</strong>: Click on OID Condition edit&rsquo;s button <img src="images/edit_button.JPG" alt="Edit Button"></p>
</li>
</ul>
<p>The Create/Modify form will show up:</p>
<p><img src="images/config_oid_conditions_edit.jpg" alt="Edit/Modify OID Conditions"></p>
<h3 id="configuration-parameters">Configuration Parameters</h3>
<p>These are the following parameters that allow you to create an OID Condition to be applied as Measurement Filter on Measurement definitions</p>
<blockquote>
<p>Note: on 0.8.1+, the <code>match</code> condition works with all SNMP types. Prior to 0.8.1 only works on <code>OctetString</code> SNMP type results</p>
</blockquote>
<table>
<thead>
<tr>
<th>Type of settings</th>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Basic settings</td>
<td>ID</td>
<td>Text String that uniquely identify the OIDCondition</td>
</tr>
<tr>
<td></td>
<td>IsMultiple</td>
<td>Select if the OID must apply multiple or not: <ul><li> <code>true</code>: apply logical syntax with existing OIDs Conditions </li> <li> <code>false</code>: apply the set condition on OID query</li></ul></td>
</tr>
<tr>
<td>OID Condition settings</td>
<td>OID/OID Condition</td>
<td>Depending on isMultiple value: <ul><li>Base OID to get data from</li><li>Logical syntax using existing OID Conditions</td>
</tr>
<tr>
<td></td>
<td>Condition Type</td>
<td>(Only applied on <code>Multiple: false</code>) All possible conditions <br/><br/><ul><li><strong>neq</strong>: returns true if value is equal (number evaluation)</li><li><strong>nin</strong>: returns true if values separated by comma are equal (multiple number evaluation)</li><li><strong>nlt</strong>:returns true if value is less than (number evaluation)</li><li><strong>ngt</strong>:returns true if value is greather than (number evaluation)</li><li><strong>nge</strong>:returns true if value is greater or equal than (number evaluation)</li><li><strong>nle</strong>:returns true if value is less or equal  (number evaluation)</li><li><strong>match</strong>:returns true if value match (regex string evaluation)</li><li><strong>nomatch</strong>:returns true if value not match (regex string evaluation)</li></ul></td>
</tr>
<tr>
<td></td>
<td>Condition Value</td>
<td>the number or regex will apply to filter result from queried SNMP OID&rsquo;s</td>
</tr>
<tr>
<td>Extra settings</td>
<td>Description</td>
<td>Some useful description to administrators</td>
</tr>
</tbody>
</table>
<h3 id="multi-edit-in-oid-conditions">Multi edit in OID Conditions</h3>
<p>Multi edit has 1 option: Remove</p>
<ol>
<li>Remove: Allows to remove all the selected items</li>
</ol>
<h2 id="examples">Examples:</h2>
<h3 id="a-creating-new-multiple-oid-condition">A. Creating new Multiple OID Condition</h3>
<p>Lets filter all interfaces that are UP and are Ethernet like:</p>
<h4 id="a1-add-single-oid-conditions-the-result-must-be-like">A.1 Add single OID Conditions, the result must be like:</h4>
<table>
<thead>
<tr>
<th>ID</th>
<th>Is Multiple</th>
<th>OIDCond</th>
<th>CondType</th>
<th>CondValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>cond_if_status_up</td>
<td>false</td>
<td>.1.3.6.1.2.1.2.2.1.8</td>
<td>neq</td>
<td>1</td>
</tr>
<tr>
<td>cond_if_name_match_eth</td>
<td>false</td>
<td>.1.3.6.1.2.1.31.1.1.1.1</td>
<td>match</td>
<td>eth.*</td>
</tr>
</tbody>
</table>
<h4 id="a2-add-a-oid-condition-with-ismultiple--true">A.2 Add a OID Condition with <code>IsMultiple = true</code></h4>
<p>Now the <code>OID Condition</code> field must be filled with a logical expression that uses already defined conditions:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Is Multiple</th>
<th>OIDCond</th>
</tr>
</thead>
<tbody>
<tr>
<td>cond_if_status_if_eth</td>
<td>true</td>
<td>cond_if_name_match_eth &amp;&amp; cond_if_status_up</td>
</tr>
</tbody>
</table>
<h4 id="a3-result">A.3 Result</h4>
<p>The OID Condition list must be like:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Is Multiple</th>
<th>OIDCond</th>
<th>CondType</th>
<th>CondValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>cond_if_status_up</td>
<td>false</td>
<td>.1.3.6.1.2.1.2.2.1.8</td>
<td>neq</td>
<td>1</td>
</tr>
<tr>
<td>cond_if_name_match_eth</td>
<td>false</td>
<td>.1.3.6.1.2.1.31.1.1.1.1</td>
<td>match</td>
<td>eth.*</td>
</tr>
<tr>
<td>cond_if_status_if_eth</td>
<td>true</td>
<td>cond_if_name_match_eth &amp;&amp; cond_if_status_up</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0fa749381cb8f5663dde598b51b53ff6">3.4 - SNMP Metrics</h1>
    <div class="lead">This component allows the user define core metrics to be collected from the device.</div>
	<h2 id="view">View</h2>
<p>Configured <strong>SNMP Metrics</strong> are shown as table. This will appear every time you navigate from menu.</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/snmp-metrics/images/config_snmp_metrics_list.jpg">
    
    <img src="/snmpcollector.org/docs/components/snmp-metrics/images/config_snmp_metrics_list_hub6549057966fefb9fed083126c7aa190_182033_1200x800_fit_q100_catmullrom.jpg"
         width="1100" height="723"
         alt="SNMP Metric List" />
    
  </a>
  <figcaption>SNMP Metric List</figcaption>
</figure>
<h2 id="addedit-snmp-metrics">Add/Edit SNMP Metrics</h2>
<ul>
<li>
<p><strong>Add</strong>: In the SNMP Metrics list click on new button <img src="images/new_button.JPG" alt="New Button"></p>
</li>
<li>
<p><strong>Edit</strong>: Click on SNMP Metric edit&rsquo;s button <img src="images/edit_button.JPG" alt="Edit Button"></p>
</li>
</ul>
<p>The Create/Modify form will show up:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/snmp-metrics/images/config_snmp_metrics_edit.jpg">
    
    <img src="/snmpcollector.org/docs/components/snmp-metrics/images/config_snmp_metrics_edit_hu77b98c891206eb9264212256389120a5_57963_1200x800_fit_q100_catmullrom.jpg"
         width="617" height="637"
         alt="Create/Modify SNMP Metrics" />
    
  </a>
  <figcaption>Create/Modify SNMP Metrics</figcaption>
</figure>
<h3 id="configuration-parameters">Configuration Parameters</h3>
<table>
<thead>
<tr>
<th>Type of settings</th>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core settings</td>
<td>ID</td>
<td>Text String that uniquely identify the metric recommended use the MIB Name, should be unique in the database</td>
</tr>
<tr>
<td></td>
<td>FieldName</td>
<td>Set the &ldquo;field&rdquo; name inside a Influx measurement, could be the same of id or not, should be unique inside the measurement where the metric will be sent.</td>
</tr>
<tr>
<td>Metric settings</td>
<td>DataSrcType</td>
<td>Origin data type could be one of these:<br/><ul><li>(SNMP SMI Type) INTEGER</li><li>(SNMP SMI Type) Integer32 </li><li>(SNMP SMI Type) Gauge32</li><li>(SNMP SMI Type) UInteger32</li><li>(SNMP SMI Type) Unsigned32</li><li>(SNMP SMI Type) Counter32 </li><li>(SNMP SMI Type) Counter64 </li><li>(SNMP SMI Type) TimeTicks</li><li>(SNMP SMI Type) OCTETSTRING</li><li>(SNMP SMI Type) IpAddress</li><li>(Cooked type) TIMETICKS [Compute TimeTicks to seconds]</li><li>(SNMP SMI Type) BIT STRING (needs a named-number enumeration in extradata) </li><li>(Cooked type) COUNTER32 [Compute increments for 32 bit counters]</li><li>(Cooked type) COUNTER64 [Compute increments for 64 bit counters]</li><li>(Cooked type) COUNTERXX [Compute increments only if it really increments &ndash; as NON_NEGATIVE_DERIVATIVE does&ndash;]</li><li>(Cooked type) HWADDR [ Translate Hardware Address (MAC) from STRING]</li><li>(Cooked type) STRINGPARSER [ Compute values from Regex ]</li><li>(Cooked type) STRINGEVAL [evaluate data from other metrics]</li><li>(Cooked type) CONDITIONEVAL [evaluate OID table with boolean conditions and get number of true values]</li><li>(Cooked type) BIT STRING CHECK [needs the number bit to check in extradata , returns 1 or 0]</li><li>(Cooked type) ENUM - [needs named-number enumeration on extradata]</li><li>(Cooked type) MULTI-STRINGPARSER  [generates multiple fields or tags from an snmp returned string and an Regular expression with multiple capturing groups]</li></ul></td>
</tr>
<tr>
<td></td>
<td>IsTag</td>
<td>If true data will be sent as a Influxdb &ldquo;TAG&rdquo;. (default is false)</td>
</tr>
<tr>
<td></td>
<td>BaseOID</td>
<td>Snmp OID for this metric ( could be the base OID when it belongs to a snmp indexed table), could not be set only if datasrctype is of type &ldquo;String Eval&rdquo;.</td>
</tr>
<tr>
<td></td>
<td>ExtraData</td>
<td>data needed to special data types as String Eval(evaluated expression needed), String Parser(regex needed) or OctetString to add a trim function (0.8.2+)</td>
</tr>
<tr>
<td></td>
<td>GetRate</td>
<td>Only useful on  COUNTER64/32/XX types , if true value sent will be the computed difference and after divided by the number of elapsed seconds between snmp calls</td>
</tr>
<tr>
<td></td>
<td>Conversion</td>
<td>before 0.8.0 version all data was sent as FLOAT64 numbers, from new 0.8.0 version could select output format depending on the DataSrcType, usually FLOAT ( float64 ) , INTEGER (int64) , BOOLEAN or STRING. Not all conversions all available on all input datasources. Unsigned Integer conversion not supported yet.</td>
</tr>
<tr>
<td>Metric autoscale</td>
<td>Scale</td>
<td>if set (as a floating point value) computed data will be scaled before sent.</td>
</tr>
<tr>
<td></td>
<td>Shift</td>
<td>if set (as a floating point value) computed data will be shifted before sent.</td>
</tr>
<tr>
<td>Extra settings</td>
<td>Description</td>
<td>any useful discretion to understand data gathered for this metric ( recommended place here units of the measurement).</td>
</tr>
</tbody>
</table>
<p><em><strong>Notes</strong></em>:
The SnmpCollector Metric engine computes all its data and sent them as floating point values to the database, except for tags that will be sent as text strings</p>
<h3 id="multi-edit-in-snmp-metrics">Multi edit in SNMP Metrics</h3>
<p>Multi edit has 2 options: Remove and Change property</p>
<ol>
<li>
<p>Remove: Allows to remove all the selected items</p>
</li>
<li>
<p>Change property: Allows to change the selected property of all the selected items. The properties are the same defined in the configuration.</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Options/Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>DataSrcType</td>
<td>Selector</td>
<td><li>Int,Int32,Gauge32,UInt32,Unsigned32,Counter32,Counter64</li><li>TimeTicks, OCTETSTRING, IpAddress</li><li>COUNTER32, COUNTER64, COUNTERXX</li><li>HWADDR, STRINGPARSER,STRINGEVAL, CONDITIONEVAL</li></ul></td>
</tr>
<tr>
<td>Scale</td>
<td>Input</td>
<td>Any number</td>
</tr>
<tr>
<td>Shift</td>
<td>Input</td>
<td>Any number</td>
</tr>
<tr>
<td>IsTag</td>
<td>Selector</td>
<td>True / False</td>
</tr>
<tr>
<td><img width=50/></td>
<td><img width=50/></td>
<td><img width=50/></td>
</tr>
</tbody>
</table>
<h2 id="about-octetstringhex-string">About OCTETSTRING/Hex-String</h2>
<p>From 0.8.0 version, you could use OCTETSTRING as datasource Types for Integers codified as Hex-String, in this case you should enable conversion to INTEGER.</p>
<blockquote>
<p>If updated from release &lt; 0.8.0 to  release &gt;= 0.8.0 version you should do a manual upgrade of your database `update snmp_metric_cfg set Conversion=3 where datasrctype=&lsquo;OCTETSTRING&rsquo;; if not done any OCTETSTRING data won&rsquo;t be collected.</p>
</blockquote>
<p>From 0.8.2 version, it is possible to apply trim functions on octet-string metric based on <code>ExtraData</code></p>
<p>Available options:</p>
<ul>
<li>trimright(&lsquo;xyz&rsquo;): removes trailing characters defined by &lsquo;xyz&rsquo;</li>
<li>trimleft(&lsquo;xyz&rsquo;): removes leading characters defined by &lsquo;xyz&rsquo;</li>
<li>trim(&lsquo;xyz&rsquo;): removes trailing and leading characters defined by &lsquo;xyz&rsquo;</li>
<li>trimspace : remove all leading and trailing tabs, whitespaces, newlines and return carriage this is (\t \n\r)</li>
</ul>
<p>Example:</p>
<pre><code>OID &gt; .1.2.3.4.5

.1.2.3.4.5.1 = &quot;   Test string with blank spaces   &quot;

ExtraData: trimspace

Output:
.1.2.3.4.5.1 = &quot;Test string with blank spaces&quot;
</code></pre><h2 id="about-bit-string-and-bit-string-check-metric-type">About BIT STRING and BIT STRING CHECK Metric Type</h2>
<p>From 0.7.2 version , there is the way to get data from BIT STRING OID&rsquo;s.  BITS is a pseudo data type that specifies a collection of labelled bits as explained here !(<a href="https://www.webnms.com/snmp/help/snmpapi/snmpv3/using_mibs_in_applns/bits_datatype.html">https://www.webnms.com/snmp/help/snmpapi/snmpv3/using_mibs_in_applns/bits_datatype.html</a>)</p>
<p>If you want config a BIT STRING you should also provide the bit-&gt;label comma separated array, in the ExtraData Field.</p>
<p>By example:<code>sunday(0), monday(1), tuesday(2), wednesday(3), thursday(4), friday(5), saturday(6)</code></p>
<p>if data got on the snmpquery is this bitstring , The output will be an concatenated labeled array sent as and string to the influxDB.
Examples:</p>
<table>
<thead>
<tr>
<th>Snmp query Out</th>
<th>value sent</th>
</tr>
</thead>
<tbody>
<tr>
<td>&lsquo;011001B&rsquo;</td>
<td>&ldquo;monday,tuesday,saturday&rdquo;</td>
</tr>
<tr>
<td>&lsquo;100001B&rsquo;</td>
<td>&ldquo;sunday,saturday&rdquo;</td>
</tr>
<tr>
<td>&lsquo;010000B&rsquo;</td>
<td>&ldquo;monday&rdquo;</td>
</tr>
<tr>
<td>&lsquo;01B&rsquo;</td>
<td>&ldquo;monday&rdquo;</td>
</tr>
</tbody>
</table>
<p>If we would like to know only if certain bit has been check  we can use the Cooked Type BIT STRING CHECK &ldquo;BITSCHECK&rdquo;. Suppose you can get with a BIT STRING the state of one device and the bit,label map is</p>
<table>
<thead>
<tr>
<th>bit number</th>
<th>label</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>up</td>
</tr>
<tr>
<td>1</td>
<td>down</td>
</tr>
<tr>
<td>2</td>
<td>restoring</td>
</tr>
<tr>
<td>3</td>
<td>failed</td>
</tr>
</tbody>
</table>
<p>You can check if the device is ok by only check that the byte &ldquo;0&rdquo; is set ( the device will be up) , in this case the metric will send 1  floating point number if the selected byte is set or 0 if not.</p>
<h2 id="about-enum-metric-type">About ENUM Metric Type</h2>
<p>From 0.7.7 version , there is the way to map enum
values and send it to InfluxDB as STRING (as Tag or Field). The enum-named values can be defined on the ExtraData field with the following syntax:
<code>&lt;CUSTOM_DESCRIPTION&gt;(&lt;ENUM&gt;)</code></p>
<p>If a returned value by the OID query is not mapped on the extradata, the value will be sent directly as a STRING.</p>
<p>By example, the following OID query <code>ifType OID - 1.3.6.1.2.1.2.2.1.3</code> would return the type of interfaces. The ENUM metric Type would allow the user to map those results and add custom text to clarify its meaning:</p>
<p>With the following Metric:</p>
<pre><code>SNMP possible results: 6,24,135

Base OID : 1.3.6.1.2.1.2.2.1.3
ExtraData: EthernetLike interfaces (6), SubInterfaces L2VLAN (135)
</code></pre><p>Would generate the following output to InfluxDB:</p>
<table>
<thead>
<tr>
<th>Snmp query Out</th>
<th>ExtraData</th>
<th>value  sent</th>
</tr>
</thead>
<tbody>
<tr>
<td>6</td>
<td>EthernetLike interfaces (6)</td>
<td>&ldquo;EthernetLike interfaces (6)&rdquo;</td>
</tr>
<tr>
<td>24</td>
<td>(non mapped)</td>
<td>&ldquo;24&rdquo;</td>
</tr>
<tr>
<td>135</td>
<td>SubInterfaces L2VLAN (135)</td>
<td>&ldquo;SubInterfaces L2VLAN (135)&rdquo;</td>
</tr>
</tbody>
</table>
<h2 id="about-multistringparser-metrics">About MULTISTRINGPARSER Metrics</h2>
<p>From 0.7.6 version , there is  a new metric type and the first capable to generate more than one field/tag with only one metric definition.
Will parse data with regex with capturing groups and each capture group will be attached to a definition  ITEM, each definition ITEM will generate a Field or a Tag. We assume that the origin got data from devices are readable strings.</p>
<p>Configuration will be placed in:</p>
<ul>
<li><strong>FieldName:</strong> Comma separated value of ITEM definitions</li>
<li><strong>ExtraData:</strong> Regular expression with multiple capturing groups</li>
</ul>
<p>by example:</p>
<ul>
<li><strong>FieldName:</strong> <code>F|field_name_1|CONV1,F|field_name_2|CONV2,T|tag_name1|CONV3</code></li>
<li><strong>ExtraData:</strong> <code>'([^;]*);([^;]*);([^;]*);' &lt;-regexp</code></li>
</ul>
<p>Is necessary configure as many ITEMS as capturing groups.</p>
<p>Each ITEM  in  the FieldName needs for 3 parameters before to be sent.</p>
<p><code>TYPE|NAME|CONVERSION</code></p>
<table>
<thead>
<tr>
<th>configuration</th>
<th>what means</th>
</tr>
</thead>
<tbody>
<tr>
<td>TYPE</td>
<td>F = Field , T = Tag ( this parameter invalidates the use of isTag flag in the metric definition)</td>
</tr>
<tr>
<td>NAME</td>
<td>Field/Tag Name will be sent to the InfluxDB</td>
</tr>
<tr>
<td>CONVERSION</td>
<td>how should evaluate the returned string? possible values (STR,INT,FP,BL)</td>
</tr>
</tbody>
</table>
<p>Fields/Tag definitions will be evaluated as:</p>
<table>
<thead>
<tr>
<th>CONVERSORS</th>
<th>Conversion type (from String)</th>
</tr>
</thead>
<tbody>
<tr>
<td>STR</td>
<td>to maintain as string ( no conversion will be done)</td>
</tr>
<tr>
<td>INT</td>
<td>to convert as and 64bits integer</td>
</tr>
<tr>
<td>FP</td>
<td>to convert as and 64 bits floating point</td>
</tr>
<tr>
<td>BL</td>
<td>to convert as a boolean</td>
</tr>
</tbody>
</table>
<h2 id="about-stringeval-metrics">About STRINGEVAL Metrics</h2>
<p>The StringEval Metric type let us compute any value from an &ldquo;expression evaluation&rdquo; , the expression could be mathematical or logical. Available documentation  on what kind of evaluations could snmpcollector do could be read here <a href="https://github.com/Knetic/govaluate/blob/master/MANUAL.md">EXPRESSION TUTORIAL</a></p>
<p><strong>Important defining <code>FieldNames</code> that contains characters like [0-9], [-], or something else, needs to be escaped using brackets on the formula. Example: [1m_ifHCInOctets] * [ifHighSpeed]</strong></p>
<h3 id="usable-variables">Usable Variables</h3>
<p>What variables could I use on  my expressions?, Here the variables</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>FieldNames</td>
<td>Any of the fieldNames placed on the same measurement</td>
</tr>
<tr>
<td>NF</td>
<td>especial variable that could be used to get the &ldquo;number of fields&rdquo; in the measurement (as in AWK)</td>
</tr>
<tr>
<td>NR</td>
<td>especial variable that could be used to get the &ldquo;number of rows&rdquo; in the measurement (after all filters has been applied), on scalar/value measurements, NR will be always 1 . On tabular/Indexed measurements NR will be the current number of rows (after filters applied)</td>
</tr>
<tr>
<td>NFR(&gt;0.7.6)</td>
<td>especial variable  that could be used to get the&quot;non filtered rows&quot;, that counts the &ldquo;number of rows&rdquo; as the below NR but before all filters has been applied.</td>
</tr>
<tr>
<td>Catalog Vars( &gt; 0.7.5)</td>
<td>Any of the defined variables in the catalog</td>
</tr>
</tbody>
</table>
<h3 id="about-check">About Check</h3>
<p>When defining a new STRINGEVAL metric, the formula in extra data is stored on the configuration database but not evaluated yet since it needs to be placed into a measurement to check if expression its ok (validating all variables used in the expression are in the before table</p>
<h2 id="examples">Examples</h2>
<h3 id="acreating-new-stringeval-metric">A.Creating new StringEval Metric</h3>
<p>Let&rsquo;s create a SNMP Metric that computes the <code>TotalOctets</code> on each port. The formula follows as:</p>
<pre><code>TotalOctets = (InBytes + OutBytes)
</code></pre><h4 id="a1-add-needed-metrics-to-get-our-new-string-eval-metric">A.1 Add needed metrics to get our new string eval metric:</h4>
<table>
<thead>
<tr>
<th>ID</th>
<th>FieldName</th>
<th>BaseOID</th>
<th>DataSrcType</th>
<th>ExtraData</th>
<th>GetRate</th>
<th>Scale</th>
<th>Shift</th>
<th>IsTag</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifHCInOctets</td>
<td>InBytes</td>
<td>.1.3.6.1.2.1.31.1.1.1.6</td>
<td>COUNTER64</td>
<td></td>
<td>false</td>
<td>0</td>
<td>0</td>
<td>false</td>
</tr>
<tr>
<td>ifHCOutOctets</td>
<td>OutBytes</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
<td>COUNTER64</td>
<td></td>
<td>false</td>
<td>0</td>
<td>0</td>
<td>false</td>
</tr>
<tr>
<td><img width=25/></td>
<td><img width=50/></td>
<td><img width=50/></td>
<td><img width=50/></td>
<td><img width=50/></td>
<td><img width=50/></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="a2-add-totaloctets-metric">A.2 Add <code>TotalOctets</code> metric:</h4>
<table>
<thead>
<tr>
<th>ID</th>
<th>FieldName</th>
<th>BaseOID</th>
<th>DataSrcType</th>
<th>ExtraData</th>
<th>GetRate</th>
<th>Scale</th>
<th>Shift</th>
<th>IsTag</th>
</tr>
</thead>
<tbody>
<tr>
<td>TotalOctets</td>
<td>TotalOctets</td>
<td></td>
<td>STRINGEVAL</td>
<td>ifHCInOctets + ifHCOutOctets</td>
<td></td>
<td>0</td>
<td>0</td>
<td>false</td>
</tr>
</tbody>
</table>
<h4 id="a3-result">A.3 Result</h4>
<p>The SNMP Metric list must be like:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>FieldName</th>
<th>BaseOID</th>
<th>DataSrcType</th>
<th>ExtraData</th>
<th>GetRate</th>
<th>Scale</th>
<th>Shift</th>
<th>IsTag</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifHCInOctets</td>
<td>InBytes</td>
<td>.1.3.6.1.2.1.31.1.1.1.6</td>
<td>COUNTER64</td>
<td></td>
<td>false</td>
<td>0</td>
<td>0</td>
<td>false</td>
</tr>
<tr>
<td>ifHCOutOctets</td>
<td>OutBytes</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
<td>COUNTER64</td>
<td></td>
<td>false</td>
<td>0</td>
<td>0</td>
<td>false</td>
</tr>
<tr>
<td>TotalOctets</td>
<td>TotalOctets</td>
<td></td>
<td>STRINGEVAL</td>
<td>InBytes + OutBytes</td>
<td></td>
<td>0</td>
<td>0</td>
<td>false</td>
</tr>
</tbody>
</table>
<h3 id="b-creating-new-stringparser-metric">B. Creating new StringParser Metric</h3>
<p>Some OIDs results are full strings that contains on some part of its texts the value that we wants to capture.
In this example we will work with an Infoblox device and the following OID that gives us Fan1 RPM: <code>.1.3.6.1.4.1.7779.3.1.1.2.1.10.1.3.28</code>, with an output as: <code>FAN 1: 8725 RPM</code></p>
<h4 id="b1-define-the-regex-that-would-capture-the-group">B.1 Define the regex that would capture the group:</h4>
<p>We need to capture the RPM speed, so we define the capture group as: <code>.*: *([0-9]*)* *RPM</code></p>
<h4 id="b2-add-new-stringparser-metric">B.2 Add new StringParser metric</h4>
<table>
<thead>
<tr>
<th>ID</th>
<th>FieldName</th>
<th>BaseOID</th>
<th>DataSrcType</th>
<th>ExtraData</th>
<th>GetRate</th>
<th>Scale</th>
<th>Shift</th>
<th>IsTag</th>
</tr>
</thead>
<tbody>
<tr>
<td>Infoblox_FanState1</td>
<td>fanState1</td>
<td></td>
<td>STRINGPARSER</td>
<td><code>.*: *([0-9]*)* *RPM</code></td>
<td></td>
<td>0</td>
<td>0</td>
<td>false</td>
</tr>
</tbody>
</table>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-daf69d2f5e0b50c8f64e6be2a2cee861">3.5 - Measurements</h1>
    <div class="lead"><a href="https://docs.influxdata.com/influxdb/v1.1/concepts/glossary/#measurement">Measurements</a> are the basic Influxdb structure let us group series of the  same type/origin.</div>
	<!-- Images references -->
<!-- https://github.com/toni-moreno/snmpcollector/blob/ -->
<h1 id="measurements">Measurements</h1>
<p>When data are gathered from  SNMP devices we can group them together as we wish when snmp data are scalar objects but is mandatory  group snmp tabular objects in the same measurement.</p>
<h2 id="view">View</h2>
<p>Configured <strong>Measurements</strong> are shown as table. This will appear every time you navigate from menu.</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/config_measurements_list.JPG">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/config_measurements_list_hu3d3982a9069d08030fb495d48265db1c_132706_1200x800_fit_q100_catmullrom.JPG"
         width="1098" height="667"
         alt="SNMP Measurements List" />
    
  </a>
  <figcaption>SNMP Measurements List</figcaption>
</figure>
<h2 id="addedit-measurements">Add/Edit Measurements</h2>
<ul>
<li>
<p><strong>Add</strong>: In the Measurements list click on new button <img src="images/new_button.JPG" alt="New Button" title="New Button"></p>
</li>
<li>
<p><strong>Edit</strong>: Click on Measurement edit&rsquo;s button <img src="images/edit_button.JPG" alt="Edit Button" title="Edit Button"></p>
</li>
</ul>
<p>The Create/Modify form will show up:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/config_measurements_edit.JPG">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/config_measurements_edit_huf6a27cb785e9ef76c8fa56db66ba7964_58237_1200x800_fit_q100_catmullrom.JPG"
         width="611" height="570"
         alt="Create/Modify Measurements" />
    
  </a>
  <figcaption>Create/Modify Measurements</figcaption>
</figure>
<h3 id="multi-edit-in-measurements">Multi edit in Measurements</h3>
<p>Multi edit has 2 options: Remove and Change property</p>
<ol>
<li>
<p>Remove: Allows to remove all the selected items</p>
</li>
<li>
<p>Change property: Allows to change the selected property of all the selected items. The properties are the same defined in the configuration.</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Options/Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>IndexTag</td>
<td>Input</td>
<td>Tag Name (string)</td>
</tr>
<tr>
<td>IndexAsValue</td>
<td>Selector</td>
<td>True/False</td>
</tr>
</tbody>
</table>
<h3 id="configuration-parameters">Configuration Parameters</h3>
<h4 id="core-settings">Core Settings</h4>
<table>
<thead>
<tr>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>Text String that uniquely identify the measurement recommended use the MIB Name prefixed/suffixed with some other string data we can easily identify (as manufacturer or model) that will help us to look in the Measurement config section, should be unique in the database</td>
</tr>
<tr>
<td>Name</td>
<td>This will be the Measurement name created in the Database when sending data, will let us to query data with  &ldquo;SELECT * from <Name>&hellip;&rdquo;</td>
</tr>
</tbody>
</table>
<h4 id="measurement-settings">Measurement Settings</h4>
<p>The behaviour of a measurement and its related metrics is given by the field <code>GetMode</code></p>
<h4 id="direct-value">Direct Value</h4>
<p>The <code>Value</code> type measurement doesn&rsquo;t go over any OID and it won&rsquo;t generate any tag to identify its metrics
Only non-indexed metrics should be added</p>
<table>
<thead>
<tr>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fields</td>
<td>A list of MetricID which will be part of this measurement and what to do with the value. On <code>Value</code> measurements only metrics that are not-indexed should be added</td>
</tr>
<tr>
<td>Report Fields</td>
<td>All metrics can be configured to be sent or not to the backend:<br><ul><li><strong>Report always:</strong>in this mode the vale gathered for this Metric by the agent will be sent to the output db</li><li><strong>Never report:</strong>in this mode the value gathered for this metric will not be sent, it has sense when we need this value as a input parameter for computed metrics (metrics of type String-Eval) </li> <li><strong>Report if non zero:</strong>in this  mode the value is not sent if the result cooked or captured is <code>0</code></li><ul></td>
</tr>
</tbody>
</table>
<h4 id="indexed-with-direct-tag">Indexed with direct TAG</h4>
<p>The <code>Indexed with direct Tag</code> measurement iterates over a table (<code>IndexOID</code>) and maps the index and result to be used as tags.
All attached metrics will be identified by that index, so all the metrics should be, or share, on the same table/index</p>
<table>
<thead>
<tr>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>IndexOID</td>
<td>(only required for SNMP Table based data) The OID will be queried to get row Tag Values of the table. Only metrics that shares the same table/index should be added</td>
</tr>
<tr>
<td>IndexTag</td>
<td>(only required for SNMP Table based data) the tag name will be sent to distinguish among different rows</td>
</tr>
<tr>
<td>IndexTagFormat</td>
<td>(only required for SNMP Table based data) enable custom format for TAGS based on parameters from values and indexes from IndexOID (parameters as <code>$IDX1</code> and <code>$VAL1</code>) <br> Default format is <code>$VAL1</code>.<br/> example: <code>[$IDX1]-$VAL1</code> will be sent as tag a &ldquo;[1]-eth0 (see IndexTagFormat below for more detailed info)&rdquo;</td>
</tr>
<tr>
<td>Fields</td>
<td>A list of MetricID which will be part of this measurement and what to do with the value. On <code>Value</code> measurements only metrics that are not-indexed should be added</td>
</tr>
<tr>
<td>Report Fields</td>
<td>All metrics can be configured to be sent or not to the backend:<br><ul><li><strong>Report always:</strong>in this mode the vale gathered for this Metric by the agent will be sent to the output db</li><li><strong>Never report:</strong>in this mode the value gathered for this metric will not be sent, it has sense when we need this value as a input parameter for computed metrics (metrics of type String-Eval) </li> <li><strong>Report if non zero:</strong>in this  mode the value is not sent if the result cooked or captured is <code>0</code></li><ul></td>
</tr>
</tbody>
</table>
<p>Example of valid tables:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/schema_indexed.jpg">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/schema_indexed_hub1ef4fd42de0515f33fdbfaf2d44e0de_77025_1200x800_fit_q100_catmullrom.jpg"
         width="1200" height="428"
         alt="Indexed Schema" />
    
  </a>
  <figcaption>Indexed Schema</figcaption>
</figure>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Measurement Config: 
Index OID: ifXTable.IfName - 1.3.6.1.2.1.31.1.1.1.1

Index Process:
1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>eth0<span style="color:#4e9a06">`</span>
1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>eth1<span style="color:#4e9a06">`</span>
1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>eth2<span style="color:#4e9a06">`</span>
1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.4<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>eth3<span style="color:#4e9a06">`</span>
1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.5<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>eth4<span style="color:#4e9a06">`</span>


Metrics:
ifXTable.ifHCInOctets - 1.3.6.1.2.1.31.1.1.1.6
1.3.6.1.2.1.31.1.1.1.6.<span style="color:#ce5c00;font-weight:bold">[</span>1:eth0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val1
1.3.6.1.2.1.31.1.1.1.6.<span style="color:#ce5c00;font-weight:bold">[</span>2:eth1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val2
1.3.6.1.2.1.31.1.1.1.6.<span style="color:#ce5c00;font-weight:bold">[</span>3:eth2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val3
1.3.6.1.2.1.31.1.1.1.6.<span style="color:#ce5c00;font-weight:bold">[</span>4:eth3<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val4
1.3.6.1.2.1.31.1.1.1.6.<span style="color:#ce5c00;font-weight:bold">[</span>5:eth4<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val5

ifXTable.ifHCInOctets - 1.3.6.1.2.1.31.1.1.1.10
1.3.6.1.2.1.31.1.1.1.10.<span style="color:#ce5c00;font-weight:bold">[</span>1:eth0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val1<span style="color:#4e9a06">&#39;
</span><span style="color:#4e9a06">1.3.6.1.2.1.31.1.1.1.10.[2:eth1] = val2&#39;</span>
1.3.6.1.2.1.31.1.1.1.10.<span style="color:#ce5c00;font-weight:bold">[</span>3:eth2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val3<span style="color:#4e9a06">&#39;
</span><span style="color:#4e9a06">1.3.6.1.2.1.31.1.1.1.10.[4:eth3] = val4&#39;</span>
1.3.6.1.2.1.31.1.1.1.10.<span style="color:#ce5c00;font-weight:bold">[</span>5:eth4<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val5<span style="color:#a40000">&#39;</span>
</code></pre></div><h4 id="indexed-with-indirect-tag">Indexed with indirect TAG</h4>
<p>The <code>Indexed with indirect TAG</code> measurements iterates over a table that has as value the related index to retrieve the tag (an indirect index). The related table will be retrieved and used as tags.
All attached metrics will be identified by the <code>IndexOID</code>, so all the metrics should be, or share, on the same table/index</p>
<table>
<thead>
<tr>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>IndexOID</td>
<td>(only required for SNMP Table based data) The OID will be queried to get row Tag Values of the table. Only metrics that shares the same table/index should be added</td>
</tr>
<tr>
<td>IndexTag</td>
<td>(only required for SNMP Table based data) the tag name will be sent to distinguish among different rows</td>
</tr>
<tr>
<td>TagOID</td>
<td>(only required for SNMP indirect Tag based data) the OID will be queried to get TAG value names from other table.</td>
</tr>
<tr>
<td>IndexTagFormat</td>
<td>(only required for SNMP Table based data) enable custom format for TAGS based on parameters from values and indexes from IndexOID ( parameters as <code>$IDX1</code> and <code>$VAL1</code>) or TagOID when measurement is defined as indirect indexes defined ( parameters <code>$IDX2</code> and <code>$VAL2</code>). <br/> Default format is <code>$VAL2</code>.<br/> example: <code>[$IDX1]-$VAL1-$VAL2</code> will be sent as tag a <code>[1]-4-eth0</code> (see IndexTagFormat below for more detailed info)&quot;</td>
</tr>
<tr>
<td>Fields</td>
<td>A list of MetricID which will be part of this measurement and what to do with the value. On <code>Value</code> measurements only metrics that are not-indexed should be added</td>
</tr>
<tr>
<td>Report Fields</td>
<td>All metrics can be configured to be sent or not to the backend:<br><ul><li><strong>Report always:</strong>in this mode the vale gathered for this Metric by the agent will be sent to the output db</li><li><strong>Never report:</strong>in this mode the value gathered for this metric will not be sent, it has sense when we need this value as a input parameter for computed metrics (metrics of type String-Eval) </li> <li><strong>Report if non zero:</strong>in this  mode the value is not sent if the result cooked or captured is <code>0</code></li><ul></td>
</tr>
</tbody>
</table>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/schema_indexed_it.jpg">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/schema_indexed_it_hu7415ec7d24bcf5094049bcef69649d57_115166_1200x800_fit_q100_catmullrom.jpg"
         width="1200" height="454"
         alt="schema indexed it" />
    
  </a>
  <figcaption>schema indexed it</figcaption>
</figure>
<p>Example of valid tables:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Measurement Config:
IndexOID: cpmCPUTotalPhysicalIndex - 1.3.6.1.4.1.9.9.109.1.1.1.1.2
TagOID: entPhysicalTable.entPhysicalName - 1.3.6.1.2.1.47.1.1.1.1.7

Index Process:

Index OID:
1.3.6.1.4.1.9.9.109.1.1.1.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7051<span style="color:#4e9a06">`</span>
1.3.6.1.4.1.9.9.109.1.1.1.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7052<span style="color:#4e9a06">`</span>
1.3.6.1.4.1.9.9.109.1.1.1.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7053<span style="color:#4e9a06">`</span>
1.3.6.1.4.1.9.9.109.1.1.1.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.4<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7054<span style="color:#4e9a06">`</span>
1.3.6.1.4.1.9.9.109.1.1.1.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.5<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7055<span style="color:#4e9a06">`</span>

1.3.6.1.2.1.47.1.1.1.1.7<span style="color:#ce5c00;font-weight:bold">[</span>.7051<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>cpu R0/0<span style="color:#4e9a06">`</span>
1.3.6.1.2.1.47.1.1.1.1.7<span style="color:#ce5c00;font-weight:bold">[</span>.7052<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>cpu R1/0<span style="color:#4e9a06">`</span>
1.3.6.1.2.1.47.1.1.1.1.7<span style="color:#ce5c00;font-weight:bold">[</span>.7053<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>cpu R2/0<span style="color:#4e9a06">`</span>
1.3.6.1.2.1.47.1.1.1.1.7<span style="color:#ce5c00;font-weight:bold">[</span>.7054<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>cpu R3/0<span style="color:#4e9a06">`</span>
1.3.6.1.2.1.47.1.1.1.1.7<span style="color:#ce5c00;font-weight:bold">[</span>.7055<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>cpu R4/0<span style="color:#4e9a06">`</span>

Index result:
<span style="color:#ce5c00;font-weight:bold">[</span>.1:cpu R0/0<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#ce5c00;font-weight:bold">[</span>.2:cpu R1/0<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#ce5c00;font-weight:bold">[</span>.3:cpu R2/0<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#ce5c00;font-weight:bold">[</span>.4:cpu R3/0<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#ce5c00;font-weight:bold">[</span>.5:cpu R4/0<span style="color:#ce5c00;font-weight:bold">]</span>

Metrics:

cpmCPUTotalTable.cpmCPUTotal1minRev - .1.3.6.1.4.1.9.9.109.1.1.1.1.7
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.<span style="color:#ce5c00;font-weight:bold">[</span>1:cpu R0/0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val1
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.<span style="color:#ce5c00;font-weight:bold">[</span>2:cpu R1/0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val2
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.<span style="color:#ce5c00;font-weight:bold">[</span>3:cpu R2/0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val3
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.<span style="color:#ce5c00;font-weight:bold">[</span>4:cpu R3/0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val4
.1.3.6.1.4.1.9.9.109.1.1.1.1.7.<span style="color:#ce5c00;font-weight:bold">[</span>5:cpu R4/0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val5

cpmCPUTotalTable.cpmCPUTotal5minRev - .1.3.6.1.4.1.9.9.109.1.1.1.1.8
.1.3.6.1.4.1.9.9.109.1.1.1.1.8.<span style="color:#ce5c00;font-weight:bold">[</span>1:cpu R0/0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val1<span style="color:#4e9a06">&#39;
</span><span style="color:#4e9a06">.1.3.6.1.4.1.9.9.109.1.1.1.1.8.[2:cpu R1/0] = val2&#39;</span>
.1.3.6.1.4.1.9.9.109.1.1.1.1.8.<span style="color:#ce5c00;font-weight:bold">[</span>3:cpu R2/0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val3<span style="color:#4e9a06">&#39;
</span><span style="color:#4e9a06">.1.3.6.1.4.1.9.9.109.1.1.1.1.8.[4:cpu R3/0] = val4&#39;</span>
.1.3.6.1.4.1.9.9.109.1.1.1.1.8.<span style="color:#ce5c00;font-weight:bold">[</span>5:cpu R4/0<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val5<span style="color:#a40000">&#39;</span>
</code></pre></div><h4 id="indexed-with-multiple-indirect-tag">Indexed with multiple indirect TAG</h4>
<p>The <code>Indexed with multiple indirect TAG</code> measurements iterates N times over different tables to be retrieving the values that relates those tables until the tag is retrieved. The final related table will be retrieved and used as tags.
All attached metrics will be identified by the <code>IndexOID</code>, so all the metrics should be, or share, on the same table/index</p>
<table>
<thead>
<tr>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>IndexOID</td>
<td>(only required for SNMP Table based data) The OID will be queried to get row Tag Values of the table. Only metrics that shares the same table/index should be added. The final index will contain the first queried indexes of the table</td>
</tr>
<tr>
<td>IndexTag</td>
<td>(only required for SNMP Table based data) the tag name will be sent to distinguish among different rows</td>
</tr>
<tr>
<td>Multiple TagOID</td>
<td>The multiples OIDs <strong>in order</strong> that will be queried to retrieve the tag value. The value will be extracted and formatted from the last queried table. Each <code>MultipleTagOID</code> has: <ul><li>TagOID: the OID will be queried to get the value to iterate over the next one</li><li>Index Format: the index format using <code>IndexTagFormat</code> syntax to allow match and keep iterating over the tables</li></ul> See examples section for an extended example of multiple tagoid. <strong>TagOIDs must be defined with order</strong></td>
</tr>
<tr>
<td>IndexTagFormat</td>
<td>(only required for SNMP Table based data) enable custom format for TAGS based on parameters from values and indexes from IndexOID ( parameters as <code>$IDX1</code> and <code>$VAL1</code>) or TagOID when measurement is defined as indirect indexes defined ( parameters <code>$IDX2</code> and <code>$VAL2</code>). <br/> Default format is <code>$VAL2</code>.<br/> example: <code>[$IDX1]-$VAL1-$VAL2</code> will be sent as tag a <code>[1]-4-eth0</code> (see IndexTagFormat below for more detailed info)&quot;</td>
</tr>
<tr>
<td>Fields</td>
<td>A list of MetricID which will be part of this measurement and what to do with the value. On <code>Value</code> measurements only metrics that are not-indexed should be added</td>
</tr>
<tr>
<td>Report Fields</td>
<td>All metrics can be configured to be sent or not to the backend:<br><ul><li><strong>Report always:</strong>in this mode the vale gathered for this Metric by the agent will be sent to the output db</li><li><strong>Never report:</strong>in this mode the value gathered for this metric will not be sent, it has sense when we need this value as a input parameter for computed metrics (metrics of type String-Eval) </li> <li><strong>Report if non zero:</strong>in this  mode the value is not sent if the result cooked or captured is <code>0</code></li><ul></td>
</tr>
</tbody>
</table>
<p><strong>Mutiple TagOID manipulation</strong></p>
<p>Use the following button to add a new TagOID <img src="images/add_button.jpg" alt="add_button" title="Add button"></p>
<p>The following buttons allow to reorder and delete defined TagOIDs:</p>
<ul>
<li>Remove: <img src="images/remove_button.jpg" alt="remove_button" title="Remove button"></li>
<li>Promote: <img src="images/promote_button.jpg" alt="promote_button" title="Promote button"></li>
<li>Demote: <img src="images/demote_button.jpg" alt="demote_button" title="Demote button"></li>
</ul>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/multi_tagoid_example.jpg">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/multi_tagoid_example_hu0c3d9b0bd5c9f94896244fe94b9a99eb_28709_1200x800_fit_q100_catmullrom.jpg"
         width="1200" height="276"
         alt="Multi Tag OID Example" />
    
  </a>
  <figcaption>Multi Tag OID Example</figcaption>
</figure>
<p><strong>Example of valid tables</strong>:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/schema_indexed_mit.jpg">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/schema_indexed_mit_hu54fe98ea40114543c090995fdd54d58a_128013_1200x800_fit_q100_catmullrom.jpg"
         width="1200" height="541"
         alt="" />
    
  </a>
  <figcaption></figcaption>
</figure>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Measurement Config:
IndexOID: indexedExample - 1.2.3.5.1
MultiTagOID
        0: - TagOID: example1 - 1.2.3.6.1
           - IndexFormat: <span style="color:#4e9a06">&#34;&#34;</span>

        1: - TagOID: example2 - 1.2.3.7.1
           - IndexFormat: <span style="color:#4e9a06">&#34;&#34;</span>

        2: - TagOID: example3 - 1.2.3.8.1
           - IndexFormat: <span style="color:#4e9a06">&#34;&#34;</span>


Index Process:
IndexOID - indexExample:

1.2.3.5.1<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7051<span style="color:#4e9a06">`</span>
1.2.3.5.1<span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7052<span style="color:#4e9a06">`</span>
1.2.3.5.1<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7053<span style="color:#4e9a06">`</span>
1.2.3.5.1<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7054<span style="color:#4e9a06">`</span>
1.2.3.5.1<span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>7055<span style="color:#4e9a06">`</span>

TagOID <span style="color:#0000cf;font-weight:bold">0</span> - example1

1.2.3.6.1<span style="color:#ce5c00;font-weight:bold">[</span>.7051<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>5001<span style="color:#4e9a06">`</span>
1.2.3.6.1<span style="color:#ce5c00;font-weight:bold">[</span>.7052<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>5002<span style="color:#4e9a06">`</span>
1.2.3.6.1<span style="color:#ce5c00;font-weight:bold">[</span>.7053<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>5003<span style="color:#4e9a06">`</span>
1.2.3.6.1<span style="color:#ce5c00;font-weight:bold">[</span>.7054<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>5004<span style="color:#4e9a06">`</span>
1.2.3.6.1<span style="color:#ce5c00;font-weight:bold">[</span>.7055<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>5005<span style="color:#4e9a06">`</span>

TagOID <span style="color:#0000cf;font-weight:bold">1</span> - example2


1.2.3.7.1<span style="color:#ce5c00;font-weight:bold">[</span>.5001<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>601<span style="color:#4e9a06">`</span>
1.2.3.7.1<span style="color:#ce5c00;font-weight:bold">[</span>.5002<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>602<span style="color:#4e9a06">`</span>
1.2.3.7.1<span style="color:#ce5c00;font-weight:bold">[</span>.5003<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>603<span style="color:#4e9a06">`</span>
1.2.3.7.1<span style="color:#ce5c00;font-weight:bold">[</span>.5004<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>604<span style="color:#4e9a06">`</span>
1.2.3.7.1<span style="color:#ce5c00;font-weight:bold">[</span>.5005<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>605<span style="color:#4e9a06">`</span>

TagOID <span style="color:#0000cf;font-weight:bold">2</span> - example3

1.2.3.8.1<span style="color:#ce5c00;font-weight:bold">[</span>.601<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>label0<span style="color:#4e9a06">`</span>
1.2.3.8.1<span style="color:#ce5c00;font-weight:bold">[</span>.602<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>label1<span style="color:#4e9a06">`</span>
1.2.3.8.1<span style="color:#ce5c00;font-weight:bold">[</span>.603<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>label2<span style="color:#4e9a06">`</span>
1.2.3.8.1<span style="color:#ce5c00;font-weight:bold">[</span>.604<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>label3<span style="color:#4e9a06">`</span>
1.2.3.8.1<span style="color:#ce5c00;font-weight:bold">[</span>.605<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">`</span>label4<span style="color:#4e9a06">`</span>

Index result:
<span style="color:#ce5c00;font-weight:bold">[</span>.1:label1<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#ce5c00;font-weight:bold">[</span>.2:label2<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#ce5c00;font-weight:bold">[</span>.3:label3<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#ce5c00;font-weight:bold">[</span>.4:label4<span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#ce5c00;font-weight:bold">[</span>.5:label5<span style="color:#ce5c00;font-weight:bold">]</span>

Metric:

myMetricExample - 1.2.3.10.1

1.2.3.10.1.<span style="color:#ce5c00;font-weight:bold">[</span>1:label1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val1
1.2.3.10.1.<span style="color:#ce5c00;font-weight:bold">[</span>2:label2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val2
1.2.3.10.1.<span style="color:#ce5c00;font-weight:bold">[</span>3:label3<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val3
1.2.3.10.1.<span style="color:#ce5c00;font-weight:bold">[</span>4:label4<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val4
1.2.3.10.1.<span style="color:#ce5c00;font-weight:bold">[</span>5:label5<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val5

myMetricExample - 1.2.3.10.2

1.2.3.10.1.<span style="color:#ce5c00;font-weight:bold">[</span>1:label1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val1<span style="color:#4e9a06">&#39;
</span><span style="color:#4e9a06">1.2.3.10.1.[2:label2] = val2&#39;</span>
1.2.3.10.1.<span style="color:#ce5c00;font-weight:bold">[</span>3:label3<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val3<span style="color:#4e9a06">&#39;
</span><span style="color:#4e9a06">1.2.3.10.1.[4:label4] = val4&#39;</span>
1.2.3.10.1.<span style="color:#ce5c00;font-weight:bold">[</span>5:label5<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> val5<span style="color:#a40000">&#39;</span>
</code></pre></div><h4 id="multiple-indexes">Multiple Indexes</h4>
<p>The multiple indexes measurement allows the user to define different internal measurements that will create the map of index/value and can have dependencies to share its information between them
To see an example go to examples section</p>
<table>
<thead>
<tr>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Multi Index Measurements</td>
<td>The array of indexes measurements (direct, indirect and multi indirect) to create a complex index with tags embebbed</td>
</tr>
<tr>
<td>Result</td>
<td>Custom final index that will be used to match fields OIDs. The syntax is explained on section below</td>
</tr>
</tbody>
</table>
<p>Each <code>Multi Index Measurement</code> can be identified by its index (position in array)</p>
<p>The options available on the <code>Multi Index Measurements</code> are the same as defined above, depending of the type (<code>GetMode</code>) and the added one.</p>
<table>
<thead>
<tr>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>The internal name of the index</td>
</tr>
<tr>
<td>Index Description</td>
<td>The internal description of the index</td>
</tr>
<tr>
<td>Index Dependency</td>
<td>The dependency syntax to heridate tags from other index based on the following syntax: <code>IDX{&lt;index&gt;};DOT[NN:MM];FILL(XXX)|SKIP</code>. The syntax is explained on section below</td>
</tr>
</tbody>
</table>
<p><strong>Mutiple Index manipulation</strong></p>
<p>Select the type of Index to add a new one, click on the following button to add a index <img src="images/add_button.jpg" alt="add_button" title="Add button">.
Available indexes are:</p>
<ul>
<li>(snmp Table) Indexed with direct TAG - indexed</li>
<li>(snmp Table) Indexed with indirect TAG - indexed_it</li>
<li>(snmp Table) Indexed with multi indirect tag - indexed_mit</li>
</ul>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/multi_index_options.jpg">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/multi_index_options_hud48e021442ae8a12d645247984cb0d89_23468_1200x800_fit_q100_catmullrom.jpg"
         width="660" height="114"
         alt="Multi Index Options" />
    
  </a>
  <figcaption>Multi Index Options</figcaption>
</figure>
<p>The following buttons allow to reorder and delete defined Multi Indexes:</p>
<ul>
<li>Remove: <img src="images/remove_button.jpg" alt="remove_button" title="Remove button"></li>
<li>Promote: <img src="images/promote_button.jpg" alt="promote_button" title="Promote button"></li>
<li>Demote: <img src="images/demote_button.jpg" alt="demote_button" title="Demote button"></li>
</ul>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/multi_index_example.jpg">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/multi_index_example_hu1e3a31dbc2ecdd480bb412afa2b55f40_51844_1200x800_fit_q100_catmullrom.jpg"
         width="1200" height="337"
         alt="Multi Index Example" />
    
  </a>
  <figcaption>Multi Index Example</figcaption>
</figure>
<h4 id="multi-indexes-dependencies-and-result">Multi Indexes: Dependencies and Result</h4>
<p>Multi Indexes allows the user to define several internal measurements to retrieve different tags and identifies and build a custom index to use it on metrics</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/schema_indexed_multiple.jpg">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/schema_indexed_multiple_hu70658924b1ddabc91aaa367e1aa4a03f_204852_1200x800_fit_q100_catmullrom.jpg"
         width="1200" height="726"
         alt="Multiple Indexed Schema" />
    
  </a>
  <figcaption>Multiple Indexed Schema</figcaption>
</figure>
<p><strong>Dependency</strong></p>
<p>The dependency system between indexes allows the index to heridate already retrieved tags from other indexes and attach them to the current one
The syntax follows as:</p>
<pre><code>IDX{IM};DOT[XX:YY];SKIP
</code></pre><p>If the user defines only <code>IDX{IM}</code>, a FILL(&quot;&quot;) strategy will be applied with an entire index match</p>
<p>The <code>IDX{IM}</code> references to another index, based on its position of the array. Example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Index <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth0&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>
        <span style="color:#000;font-weight:bold">|</span>   Index <span style="color:#000">Tag</span> <span style="color:#ce5c00;font-weight:bold">=</span> portName
--------
Index <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> up
        <span style="color:#000;font-weight:bold">|</span>
        <span style="color:#000;font-weight:bold">|</span>   Index <span style="color:#000">Tag</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;ifStatus&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>   Dependency IDX<span style="color:#ce5c00;font-weight:bold">{</span>0<span style="color:#ce5c00;font-weight:bold">}</span>
        <span style="color:#000;font-weight:bold">|</span>       --&gt; <span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;up|eht0&#34;</span> <span style="color:#ce5c00;font-weight:bold">[</span>ifStatus, portName<span style="color:#ce5c00;font-weight:bold">]</span>
</code></pre></div><p>The <code>DOT[XX:YY]</code> allows to change the check option to heridate tags from another index, this is useful if the tables doesn&rsquo;t have the same dimension, but it shares a common index. Example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Index <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth0&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>
        <span style="color:#000;font-weight:bold">|</span>   Index <span style="color:#000">Tag</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;portName&#34;</span>
--------
Index <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.1.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> up
        <span style="color:#000;font-weight:bold">|</span>
        <span style="color:#000;font-weight:bold">|</span>   Index <span style="color:#000">Tag</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;ifStatus&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>   Dependency IDX<span style="color:#ce5c00;font-weight:bold">{</span>0<span style="color:#ce5c00;font-weight:bold">}</span><span style="color:#000;font-weight:bold">;</span>DOT<span style="color:#ce5c00;font-weight:bold">[</span>0:0<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">;</span>FILL<span style="color:#ce5c00;font-weight:bold">()</span>
        <span style="color:#000;font-weight:bold">|</span>       --&gt; <span style="color:#ce5c00;font-weight:bold">[</span>1.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;up|eht0&#34;</span> <span style="color:#ce5c00;font-weight:bold">[</span>ifStatus, portName<span style="color:#ce5c00;font-weight:bold">]</span>
</code></pre></div><p>The <code>FILL(XX)|SKIP</code> section defines the strategy of non match index:</p>
<ul>
<li>The <code>FILL(XX)</code> allows the user to define a custom tag value (<code>XXX</code>) if the dependency index has no the current index on it.</li>
<li>The <code>SKIP</code> deletes the current point if it doesn&rsquo;t match with the current index</li>
</ul>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Index <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth0&#34;</span>
---------
Index <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.1.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;up&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.2.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;down&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>    
        <span style="color:#000;font-weight:bold">|</span>   Dependency: IDX<span style="color:#ce5c00;font-weight:bold">{</span>0<span style="color:#ce5c00;font-weight:bold">}</span><span style="color:#000;font-weight:bold">;</span>DOT<span style="color:#ce5c00;font-weight:bold">[</span>0:0<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">;</span>FILL<span style="color:#ce5c00;font-weight:bold">(</span>no value present<span style="color:#ce5c00;font-weight:bold">)</span>
        <span style="color:#000;font-weight:bold">|</span>       --&gt; <span style="color:#ce5c00;font-weight:bold">[</span>1.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;up|eth0&#34;</span> <span style="color:#ce5c00;font-weight:bold">[</span>ifStatus, portName<span style="color:#ce5c00;font-weight:bold">]</span>
        <span style="color:#000;font-weight:bold">|</span>       --&gt; <span style="color:#ce5c00;font-weight:bold">[</span>2.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;down|no value present&#34;</span>
</code></pre></div><pre><code>Index 0 |   [.1] = &quot;eth0&quot;
---------
Index 1 |   [.1.1] = &quot;up&quot;
        |   [.2.1] = &quot;down&quot;
        |
        |   Index Tag = &quot;ifStatus&quot;
        |   Dependency: IDX{0};DOT[0:0];SKIP
        |       --&gt; [1.1] = &quot;up|eth0&quot; [ifStatus, portName]
        |       &lt; DELETED [2.1]&gt;
</code></pre><p><strong>Result</strong></p>
<p>The result allows the user to create a totally custom index to be set up with attached fields.
The syntax follows as:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">IDX<span style="color:#ce5c00;font-weight:bold">{</span>IM<span style="color:#ce5c00;font-weight:bold">}</span><span style="color:#000;font-weight:bold">;</span>DOT<span style="color:#ce5c00;font-weight:bold">[</span>XX:YY<span style="color:#ce5c00;font-weight:bold">]]</span>.&lt;number&gt;.&lt;IDX<span style="color:#ce5c00;font-weight:bold">{</span>IM<span style="color:#ce5c00;font-weight:bold">}</span><span style="color:#000;font-weight:bold">;</span>DOT<span style="color:#ce5c00;font-weight:bold">[</span>XX:YY<span style="color:#ce5c00;font-weight:bold">]</span>&gt;.&lt;...&gt;
</code></pre></div><p>If several IDX{IM} are found, it will create a big index using the scalar product between them heridating its tags</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Index <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth0&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth1&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>   &lt;No dependency configured&gt;
---------
Index <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;up&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>   <span style="color:#ce5c00;font-weight:bold">[</span>.4<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;down&#34;</span>
        <span style="color:#000;font-weight:bold">|</span>   &lt;No dependency configured&gt;
</code></pre></div><p>Result: <code>IDX{0}.IDX{1}</code></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Final Index <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>.1.3<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth0 | up&#34;</span> 
            <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>.1.4<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth0 | down&#34;</span>
            <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>.2.3<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth1 | up&#34;</span>
            <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>.2.4<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth1 | down&#34;</span>
</code></pre></div><p>Result: <code>.35.IDX{0}</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Final Index <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>.35.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth0&#34;</span> 
            <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>.35.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;eth0&#34;</span>
</code></pre></div><p>Result: <code>.35.IDX{1}.42</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Final Index <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>.35.3.42<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;up&#34;</span> 
            <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>.35.3.42<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;down&#34;</span>
</code></pre></div><h2 id="notes">Notes</h2>
<hr>
<h3 id="indextagformat-definition">IndexTagFormat Definition</h3>
<p>Enable user define a custom format for TAGS based on parameters from values and indexes from IndexOID or TagOID when measurement is defined as indirect indexes defined</p>
<p>Current variable inputs are only IDX1,VAL1 for direct indexed measurements and also IDX2,VAL2 when indirect indexed measurements.</p>
<p>To refer to these variables you could prepend a &lsquo;$&rsquo; to the variable name. If not definition exist,default format will be $VAL1 for direct indexed tables and $VAL2 for indirect indexed.</p>
<p>User can also take parts of each variable and apply transformation to get desired tag name by only use the following  syntax</p>
<p><code>${VAR|SELECTOR|TRANSFORMATOR}</code></p>
<ul>
<li>VAR : the variable source, could be referenced several times in the same definition</li>
<li>SELECTOR: (by default the complete variable string) will select a bit of the VARIABLE, could be void string and the default value will be selected</li>
<li>TRANSFORMATOR (by default STRING) will apply a transformation on the previously selected bit of variable, could be void string and the default value will be selected</li>
</ul>
<p>$VAR will be equivalent to ${VAR|ALL|STRING} and also to ${VAR||}</p>
<h4 id="defined-selectors">Defined selectors</h4>
<ul>
<li><strong>ALL</strong>: complete string</li>
<li><strong>DOT[X:Y]</strong> : splits variable in an array of numbers and select only from the Xth to the Yth value, if X is omitted 0 will be chosen , if  Y is omitted the last element on the splitted array will be chosen , in this mode DOT[0:] is equivalent to ALL. Counter always begins from 0 and both X and Y position will be included in the final selection</li>
<li><strong>REGEX/regex-expression/substitution-expression/</strong>: (since 0.7.3) Regex based Substitution pattern , each section is described in the following table</li>
</ul>
<table>
<thead>
<tr>
<th>regex section</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>regex-expresion</strong></td>
<td>could be any valid <a href="https://github.com/google/re2/wiki/Syntax">golang based regular expressions</a>. These regular expressions should have defined <a href="http://www.regular-expressions.info/refcapture.html">capturing groups</a><br/> <strong>Limitation</strong>:  we can not use the &ldquo;|&rdquo; character because of this character would alter the <code>${VAR\|SELECTOR\|TRANSFORMATOR}</code> struct.  ( In the future would should improve syntax to avoid this limitation).</td>
</tr>
<tr>
<td><strong>substitution-expression</strong></td>
<td>any string containing valid <a href="http://www.regular-expressions.info/refcapture.html">back references</a> ie &ldquo;\1, \2, \3, &hellip;.. etc&rdquo;, for previously defined capturing groups</td>
</tr>
</tbody>
</table>
<h4 id="defined-transformations">Defined transformations</h4>
<ul>
<li><strong>STRING</strong> : return the selected value as an string</li>
<li><strong>DEC2ASCII</strong>: decode a dotted separated string with numbers as ascii bytes of a string (&ldquo;100.101.102.97.117.108.116&rdquo; will be &ldquo;default&rdquo;)</li>
<li><strong>MAC</strong>: decode a string  as MAC address.( .1.3.6.1.2.1.10.127.1.3.3.1.2.89 = STRING: 60:2a:d0:40:42:1a ) will be decoded as MAC with this format <code>:${VAL1|DOT[0:]|MAC}</code> (&gt;version 0.10)</li>
</ul>
<h4 id="example">Example</h4>
<p>We can use inetCidrRouteIfIndex as example:
The following is the output from one row of the table with &ldquo;snmpwalk&rdquo;.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">IP-FORWARD-MIB::inetCidrRouteIfIndex.ipv4.<span style="color:#4e9a06">&#34;0.0.0.0&#34;</span>.0.2.0.0.ipv4.<span style="color:#4e9a06">&#34;10.0.2.2&#34;</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: <span style="color:#0000cf;font-weight:bold">2</span>
</code></pre></div><p>equivalent to that.(I&rsquo;ve separated baseOID from Index)</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">BaseOID<span style="color:#ce5c00;font-weight:bold">[</span>1.3.6.1.2.1.4.24.7.1.7<span style="color:#ce5c00;font-weight:bold">]</span>+ INDEX<span style="color:#ce5c00;font-weight:bold">[</span>.1.4.0.0.0.0.0.2.0.0.1.4.10.0.2.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: <span style="color:#0000cf;font-weight:bold">2</span>
</code></pre></div><p>when looking for index info here inetCidrRouteEntry (<a href="http://oid-info.com/get/1.3.6.1.2.1.4.24.7.1),">http://oid-info.com/get/1.3.6.1.2.1.4.24.7.1),</a> we have found the following</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">INDEX <span style="color:#ce5c00;font-weight:bold">{</span>
inetCidrRouteDestType, ipv4<span style="color:#ce5c00;font-weight:bold">(</span>1<span style="color:#ce5c00;font-weight:bold">)</span>, ipv6<span style="color:#ce5c00;font-weight:bold">(</span>2<span style="color:#ce5c00;font-weight:bold">)</span>, ipv4z<span style="color:#ce5c00;font-weight:bold">(</span>3<span style="color:#ce5c00;font-weight:bold">)</span>, ipv6z<span style="color:#ce5c00;font-weight:bold">(</span>4<span style="color:#ce5c00;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1</span>
inetCidrRouteDest,	<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">4</span> - 0.0.0.0
inetCidrRoutePfxLen,    <span style="color:#ce5c00;font-weight:bold">=</span> 0.2
inetCidrRoutePolicy,    <span style="color:#ce5c00;font-weight:bold">=</span> 0.0
<span style="color:#000">inetCidrRouteNextHopType</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">1</span>
<span style="color:#000">inetCidrRouteNextHop</span>  <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">4</span> -&gt; 10.0.2.2
<span style="color:#ce5c00;font-weight:bold">}</span>

<span style="color:#4e9a06">````</span>bash
In this <span style="color:#204a87;font-weight:bold">case</span> we would like by example take RouteDest and RouteNextHop as IndexTAG with

<span style="color:#4e9a06">```</span>bash
<span style="color:#4e9a06">${</span><span style="color:#000">IDX1</span><span style="color:#000;font-weight:bold">|DOT[2:</span><span style="color:#000">5</span><span style="color:#000;font-weight:bold">]|STRING</span><span style="color:#4e9a06">}</span> -&gt; <span style="color:#4e9a06">${</span><span style="color:#000">IDX1</span><span style="color:#000;font-weight:bold">|DOT[12:</span><span style="color:#000">15</span><span style="color:#000;font-weight:bold">]|STRING</span><span style="color:#4e9a06">}</span>
</code></pre></div><p>this will equivalent to</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#4e9a06">${</span><span style="color:#000">IDX1</span><span style="color:#000;font-weight:bold">|DOT[2:</span><span style="color:#000">5</span><span style="color:#000;font-weight:bold">]|</span><span style="color:#4e9a06">}</span> -&gt; <span style="color:#4e9a06">${</span><span style="color:#000">IDX1</span><span style="color:#000;font-weight:bold">|DOT[12:</span><span style="color:#000">15</span><span style="color:#000;font-weight:bold">]|</span><span style="color:#4e9a06">}</span>
</code></pre></div><p>And the output result will be</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">0.0.0.0 -&gt; 10.0.2.2
</code></pre></div><hr>
<h1 id="examples">Examples</h1>
<h2 id="example-of-indexed-with-multiple-indirect-tag">Example of Indexed with multiple indirect TAG</h2>
<p>Lets assume that we want to retrieve the following values of the following metrics
The base OID from those are <code>1.1</code> and they have a double index, [X,Y] which gives us the following information:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">X</span><span style="color:#ce5c00;font-weight:bold">=</span>related interface
<span style="color:#000">Y</span><span style="color:#ce5c00;font-weight:bold">=</span>related object
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">myMetricTable: 1.1 <span style="color:#ce5c00;font-weight:bold">[</span>X,Y<span style="color:#ce5c00;font-weight:bold">]</span>
1.1<span style="color:#ce5c00;font-weight:bold">[</span>.1.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">51</span>
1.1<span style="color:#ce5c00;font-weight:bold">[</span>.2.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">52</span>
1.1<span style="color:#ce5c00;font-weight:bold">[</span>.3.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">53</span>
1.1<span style="color:#ce5c00;font-weight:bold">[</span>.4.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">54</span>
1.3<span style="color:#ce5c00;font-weight:bold">[</span>.1.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">21</span>
1.3<span style="color:#ce5c00;font-weight:bold">[</span>.2.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">22</span>
1.3<span style="color:#ce5c00;font-weight:bold">[</span>.3.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">23</span>
1.3<span style="color:#ce5c00;font-weight:bold">[</span>.4.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">24</span>
</code></pre></div><p>To identify those metrics, we need to retrieve the tag value on <code>myFinalRealTagTable - 1.5</code>, but we need a double index iteration to retrieve the desired tag and it is indexed by <code>M</code>.
The process would be:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">1.2.<span style="color:#ce5c00;font-weight:bold">[</span>X.Y<span style="color:#ce5c00;font-weight:bold">]</span> --&gt; <span style="color:#ce5c00;font-weight:bold">[</span>Z<span style="color:#ce5c00;font-weight:bold">]</span> --&gt; 1.10.<span style="color:#ce5c00;font-weight:bold">[</span>X.Z<span style="color:#ce5c00;font-weight:bold">]</span> --&gt; <span style="color:#ce5c00;font-weight:bold">[</span>M<span style="color:#ce5c00;font-weight:bold">]</span> --&gt; 1.5.<span style="color:#ce5c00;font-weight:bold">[</span>M<span style="color:#ce5c00;font-weight:bold">]</span> --&gt; tag
</code></pre></div><div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">myIndexTagTable: .1.2<span style="color:#ce5c00;font-weight:bold">[</span>X.Y<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>Z<span style="color:#ce5c00;font-weight:bold">]</span>
.1.2.<span style="color:#ce5c00;font-weight:bold">[</span>1.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">2</span>
.1.2.<span style="color:#ce5c00;font-weight:bold">[</span>2.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">2</span>
.1.2.<span style="color:#ce5c00;font-weight:bold">[</span>3.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">2</span>
.1.2.<span style="color:#ce5c00;font-weight:bold">[</span>4.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">2</span>
---
myRealTagTable: .1.10.<span style="color:#ce5c00;font-weight:bold">[</span>X.Z<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>M<span style="color:#ce5c00;font-weight:bold">]</span>
.1.10.1.2 <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">90</span>
.1.10.2.2 <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">91</span>
.1.10.3.2 <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">92</span>
.1.10.4.2 <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">93</span>
---
myFinalRealTagTable: .1.5.<span style="color:#ce5c00;font-weight:bold">[</span>M<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>TagValue<span style="color:#ce5c00;font-weight:bold">]</span>
.1.5.94 <span style="color:#000;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;eth1&#34;</span>
.1.5.95 <span style="color:#000;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;eth2&#34;</span>
.1.5.96 <span style="color:#000;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;eth3&#34;</span>
.1.5.97 <span style="color:#000;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;eth4&#34;</span>
</code></pre></div><p>As we can see we need to go over 3 different tables and different indexes to retrieve values that can identify each value of pair [X.Y].
To achieve that, we create the following measuement:</p>
<p>As we need to match with the metrics, we need to go over <code>myIndexTagTable</code> to retrieve and store indexes <code>[X.Y]</code>, so we configure the <code>IndexOID</code> as <code>1.2</code>. The output of this table will be used as the next one:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Def:
IndexOID: <span style="color:#4e9a06">&#34;1.2&#34;</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>X.Y<span style="color:#ce5c00;font-weight:bold">]</span>
Result: <span style="color:#4e9a06">&#34;2, 2, 2, 2 | [Z]
</span></code></pre></div><p>To retrieve the second table, we cannot use the value given <code>Z</code> becouse we need also the var <code>X</code> in order to match the index. As the <code>X</code> is present on table <code>myIndexTagTable</code> and <code>myRealTagTable</code>, we can format the index to achieve the desired [X.Z]</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Def:
TagOID: <span style="color:#4e9a06">&#34;.1.10&#34;</span>,
IndexFormat: <span style="color:#4e9a06">&#34;</span><span style="color:#4e9a06">${</span><span style="color:#000">IDX1</span><span style="color:#000;font-weight:bold">|DOT[0:</span><span style="color:#000">0</span><span style="color:#000;font-weight:bold">]|STRING</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">.</span><span style="color:#000">$VAL1</span><span style="color:#4e9a06">&#34;</span> --&gt; <span style="color:#ce5c00;font-weight:bold">[</span>X.Z<span style="color:#ce5c00;font-weight:bold">]</span>
Result: <span style="color:#4e9a06">&#34;90, 91, 92, 93&#34;</span>
</code></pre></div><p>With the matched value of <code>M</code>, we can retrieve the final table, in this case, we don&rsquo;t need to setup a format as the required index is directly indexed by [M]</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Def:
TagOID: <span style="color:#4e9a06">&#34;.1.5&#34;</span>,
IndexFormat: <span style="color:#4e9a06">&#34;&#34;</span>
Result: <span style="color:#4e9a06">&#34;eth1, eth2, eth3, eth4&#34;</span>
</code></pre></div><p>On this point, we will have map that relates our initial [X.Y] to our desired tags
Remember that on multiple inderect measurement, the final index is equal than the IndexOID to be equal than the metrics</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">1.1 <span style="color:#000;font-weight:bold">|</span> eth1
1.2 <span style="color:#000;font-weight:bold">|</span> eth2
1.3 <span style="color:#000;font-weight:bold">|</span> eth3
1.4 <span style="color:#000;font-weight:bold">|</span> eth4
</code></pre></div><h2 id="example-of-multiindex-ifmib">Example of MultiIndex: ifMIB</h2>
<p>All the metric of IfMIB are based on <code>IfIndex OID: 1.3.6.1.2.1.2.2.1.1</code>. According to its description:</p>
<blockquote>
<p>A unique value for each interface. Its value ranges between 1 and the value of ifNumber. The value for each interface must remain constant at least from one re-initialization of the entity&rsquo;s network management system to the next re-initialization.</p>
</blockquote>
<p>As all related metrics shares the same index, we can define a simple <code>Direct Index</code> measurement to retrieve those metrics, but, for this case, metrics that are constants, like tags, doesn&rsquo;t need to be polled every frequency, it can be gathered on filter freq.</p>
<p>On this example, we will use the following metrics that are, in some way, static for each interface:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>OID</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifDesc</td>
<td>.1.3.6.1.2.1.2.2.1.2</td>
</tr>
<tr>
<td>ifName</td>
<td>.1.3.6.1.2.1.31.1.1.1.1</td>
</tr>
<tr>
<td>ifAlias</td>
<td>.1.3.6.1.2.1.31.1.1.1.18</td>
</tr>
</tbody>
</table>
<p>The related fields that we want to gather are defined as SNMP Metrics:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>FieldName</th>
<th>BaseOID</th>
<th>DataSrcType</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifHCInOctets</td>
<td>ifHCInOctets</td>
<td>.1.3.6.1.2.1.31.1.1.1.6</td>
<td>COUNTER64</td>
</tr>
<tr>
<td>ifHCOutOctets</td>
<td>ifHCOutOctets</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
<td>COUNTER64</td>
</tr>
</tbody>
</table>
<p>A simple walk over those metrics gives us the follow index/value:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ifHCInOctets &gt;
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">3</span>
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">4</span>
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">20</span>


ifHCOutOctets &gt;
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">5</span>
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">7</span>
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">35</span>
</code></pre></div><p>In order to identify those metrics with <code>ifAlias</code>, <code>ifName</code>, <code>ifDesc</code> tags, we create a create a <code>Multi Index Measurement</code>,with 3 different indexes. As the indexes <strong>don&rsquo;t need to be ordered</strong> we will define it in a non-logic order</p>
<table>
<thead>
<tr>
<th>Index</th>
<th>Type</th>
<th>Label</th>
<th>Index Description</th>
<th>Index Base OID</th>
<th>Index Tag</th>
<th>Index Tag Format</th>
<th>Index Dependency</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Indexed with direct Tag</td>
<td>ifName</td>
<td>Index to retrieve ifName tag</td>
<td>.1.3.6.1.2.1.31.1.1.1.1</td>
<td>ifName</td>
<td>&ndash;</td>
<td>&quot;&quot;</td>
</tr>
<tr>
<td>1</td>
<td>Indexed with direct Tag</td>
<td>ifDesc</td>
<td>Index to retrieve ifDesc</td>
<td>.1.3.6.1.2.1.2.2.1.2</td>
<td>ifDesc</td>
<td>&ndash;</td>
<td>IDX{2};DOT[0:0];SKIP  (note that it references with an index that is greater than the current one. Remember that the order is not needed)</td>
</tr>
<tr>
<td>2</td>
<td>Indexed with direct Tag</td>
<td>ifAlias</td>
<td>Index to retrieve ifAlias</td>
<td>.1.3.6.1.2.1.31.1.1.1.18</td>
<td>ifAlias</td>
<td>&ndash;</td>
<td>IDX{0};DOT[0:0];SKIP</td>
</tr>
</tbody>
</table>
<p>As each index refers to a single measurement and it has its own lifecycle, the Dependency is used only to create the final result. In this case, we want to retrieve the final tags from IDX{1} (it will heridate the IDX{2} and IDX{0}) so:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Result: <span style="color:#4e9a06">&#34;IDX{1}&#34;</span>
</code></pre></div><p>Example of measurement definition:</p>
<p>![ifMIB_MultiIndex]</p>
<p>Each index will save on its own structure the gathered data based on its definition:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Index <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#000;font-weight:bold">|</span> ifName &gt;
.1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;Te1/0/1&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName
.1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;Te1/0/2&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName
.1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;Te1/0/3&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName

Index <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#000;font-weight:bold">|</span> ifDesc &gt;
.1.3.6.1.2.1.2.2.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;TenGigabitEthernet1/0/1&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifDesc
.1.3.6.1.2.1.2.2.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;TenGigabitEthernet1/0/2&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifDesc
.1.3.6.1.2.1.2.2.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;TenGigabitEthernet1/0/3&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifDesc

Index <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#000;font-weight:bold">|</span> ifAlias &gt;
.1.3.6.1.2.1.31.1.1.1.18<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;To home&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifAlias
.1.3.6.1.2.1.31.1.1.1.18<span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;-- &lt;null, not defined!&gt;&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifAlias
.1.3.6.1.2.1.31.1.1.1.18<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;To shop&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifAlias

</code></pre></div><p>When building the result, all the measurements will be ordered based on dependencies, so, it will processed on the following order:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">0<span style="color:#000;font-weight:bold">|</span> Index <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#000;font-weight:bold">|</span> ifName  <span style="color:#000;font-weight:bold">|</span> Not dependency
1<span style="color:#000;font-weight:bold">|</span> Index <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#000;font-weight:bold">|</span> ifAlias <span style="color:#000;font-weight:bold">|</span> Dependency on Index <span style="color:#0000cf;font-weight:bold">0</span>
2<span style="color:#000;font-weight:bold">|</span> Index <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#000;font-weight:bold">|</span> ifDesc <span style="color:#000;font-weight:bold">|</span> Dependency on old Index <span style="color:#0000cf;font-weight:bold">2</span>
</code></pre></div><p>The building index schema follows as:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/measurements/images/schema_example_multiple_indexes_ifmib.jpg">
    
    <img src="/snmpcollector.org/docs/components/measurements/images/schema_example_multiple_indexes_ifmib_huea05135d6d1eef14f705592bd75ca3ca_122954_1200x800_fit_q100_catmullrom.jpg"
         width="1200" height="714"
         alt="Example IfMib Multiple Indexes" />
    
  </a>
  <figcaption>Example IfMib Multiple Indexes</figcaption>
</figure>
<p>When a dependency exist, it tries to heridate the tags that matches the current OID. If it doesn&rsquo;t match, it applies the strategy, in this case <code>SKIP</code></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Index <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#000;font-weight:bold">|</span> ifAlias - IDX<span style="color:#ce5c00;font-weight:bold">{</span>0<span style="color:#ce5c00;font-weight:bold">}</span><span style="color:#000;font-weight:bold">;</span>DOT<span style="color:#ce5c00;font-weight:bold">[</span>0:0<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">;</span>SKIP &gt;
.1.3.6.1.2.1.31.1.1.1.18<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;Tel1/0/1|To home&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName, ifAlias 
.1.3.6.1.2.1.31.1.1.1.18<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span> <span style="color:#4e9a06">&#34;Te1/0/3|To shop&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName, ifAlias

---
index <span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> it has been skipped due it doesn<span style="color:#a40000">&#39;</span>t exist on ifAlias and it will be skipped
</code></pre></div><p>The Index 2 dependency will use the new Index 1:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Index <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#000;font-weight:bold">|</span> ifDesc - IDX<span style="color:#ce5c00;font-weight:bold">{</span>2<span style="color:#ce5c00;font-weight:bold">}</span><span style="color:#000;font-weight:bold">;</span>DOT<span style="color:#ce5c00;font-weight:bold">[</span>0:0<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">;</span>SKIP
.1.3.6.1.2.1.2.2.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;Tel1/0/1|To home|TenGigabitEthernet1/0/1&#34;</span>
.1.3.6.1.2.1.2.2.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;Te1/0/3|To shop|TenGigabitEthernet1/0/3&#34;</span>

---
index <span style="color:#ce5c00;font-weight:bold">[</span>.2<span style="color:#ce5c00;font-weight:bold">]</span> it has been skipped due it doesn<span style="color:#a40000">&#39;</span>t exist on processed Index <span style="color:#0000cf;font-weight:bold">1</span> and it will be skipped
</code></pre></div><p>The result (<code>IDX{1}</code>) will be directly the Index 1- ifAlias with the new heridated tags:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">.1.3.6.1.2.1.2.2.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;Tel1/0/1|To home|TenGigabitEthernet1/0/1&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName <span style="color:#000;font-weight:bold">|</span> ifAlias <span style="color:#000;font-weight:bold">|</span> ifDesc
.1.3.6.1.2.1.2.2.1.2<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span>  <span style="color:#4e9a06">&#34;Te1/0/3|To shop|TenGigabitEthernet1/0/3&#34;</span>  <span style="color:#ce5c00;font-weight:bold">||</span> ifName <span style="color:#000;font-weight:bold">|</span> ifAlias <span style="color:#000;font-weight:bold">|</span> ifDesc
</code></pre></div><p>So, the final gathered metrics will be:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">ifHCInOctets &gt;
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">3</span>   <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">ifName</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Tel1/0/1&#34;</span>,ifAlias<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;To home&#34;</span>,ifDesc<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;TenGigabitEthernet1/0/1&#34;</span>
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">20</span>  <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">ifName</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Te1/0/3&#34;</span>,ifAlias<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;To shop&#34;</span>,ifDesc<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;TenGigabitEthernet1/0/3&#34;</span>

ifHCOutOctets &gt;
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">5</span>   <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">ifName</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Tel1/0/1&#34;</span>,ifAlias<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;To home&#34;</span>,ifDesc<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;TenGigabitEthernet1/0/1&#34;</span>
.1.3.6.1.2.1.31.1.1.1.6<span style="color:#ce5c00;font-weight:bold">[</span>.3<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#000;font-weight:bold">|</span> <span style="color:#0000cf;font-weight:bold">35</span>  <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">ifName</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Te1/0/3&#34;</span>,ifAlias<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;To shop&#34;</span>,ifDesc<span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;TenGigabitEthernet1/0/3&#34;</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-671acd2f0e66e3202a46d5eeb5934592">3.6 - Measurement Groups</h1>
    <div class="lead">A Measurement Group is a collection  of measurements, and its main goal is to act as a &ldquo;Product&rdquo; or &ldquo;Device Model&rdquo; Template. Once defined should be easy creating new devices and only adding this measurement group. You can add as many measurements as you wish.</div>
	<h2 id="view">View</h2>
<p>Configured <strong>Measurement Groups</strong> are shown as table. This will appear every time you navigate from menu.</p>
<p><img src="images/config_meas_groups_list.JPG" alt="Measurement Groups list"></p>
<h2 id="addedit-influxdb-output-databases">Add/Edit InfluxDB output databases</h2>
<ul>
<li>
<p><strong>Add</strong>: In the InfluxDB Servers list click on new button <img src="images/new_button.JPG" alt="New Button"></p>
</li>
<li>
<p><strong>Edit</strong>: Click on InfluxDB edit&rsquo;s button <img src="images/edit_button.JPG" alt="Edit Button"></p>
</li>
</ul>
<p>The Create/Modify form will show up:</p>
<p><img src="images/config_meas_groups_edit.JPG" alt="New button"></p>
<h3 id="configuration-parameters">Configuration Parameters</h3>
<table>
<thead>
<tr>
<th>Type of settings</th>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>MeasurementGroups settings</td>
<td>ID</td>
<td>Text String that uniquely identify the measurement group recommended use the Product/Device Name/model as, should be unique in the database</td>
</tr>
<tr>
<td></td>
<td>Measurements</td>
<td>A list of measurement id&rsquo;s</td>
</tr>
<tr>
<td>Extra settings</td>
<td>Description</td>
<td>A description text for the  measurement group.</td>
</tr>
</tbody>
</table>
<h3 id="multi-edit-in-measurement-groups">Multi edit in Measurement Groups</h3>
<p>Multi edit has 1 option: Remove</p>
<ol>
<li>Remove: Allows to remove all the selected items</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-945a4dd3a380a22644205041d4929a54">3.7 - Measurement Filters</h1>
    <div class="lead">Filters allows to filter collected data from different Measurements. The filters can be configured using a file, OID Condition or Custom filter.</div>
	<h2 id="view">View</h2>
<p>Configured Measurement Filters are shown as table. This will appear every time you navigate from menu.</p>
<p><img src="images/config_meas_filters_list.JPG" alt="SNMP Metric List"></p>
<h2 id="addedit-measurement-filters">Add/Edit Measurement Filters</h2>
<ul>
<li>
<p><strong>Add</strong>: In the Measurement Filters list click on new button <img src="images/new_button.JPG" alt="New Button"></p>
</li>
<li>
<p><strong>Edit</strong>: Click on Measurement Filter edit&rsquo;s button <img src="images/edit_button.JPG" alt="Edit Button"></p>
</li>
</ul>
<p>The Create/Modify form will show up:</p>
<p><img src="images/config_meas_filters_edit.JPG" alt="Create/Modify SNMP Metrics"></p>
<h3 id="configuration-parameters">Configuration Parameters</h3>
<table>
<thead>
<tr>
<th>Type of settings</th>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core settings</td>
<td>ID</td>
<td>Text String for each</td>
</tr>
<tr>
<td></td>
<td>MeasurementID</td>
<td>The measurement on which filter could be applied if selected in the device.</td>
</tr>
<tr>
<td>Filter settings</td>
<td>Filter Type</td>
<td><ul><li>OID Condition</li><li>File Condition</li><li>Custom Filter</li></ul></td>
</tr>
<tr>
<td></td>
<td>File Name</td>
<td>Depending on Filter Type: <ul><li>File: the file name by example (&ldquo;my_filer_file_for_device_xxxxx.txt&rdquo;)</li><li>OID Condition: ID of defined OID Condition </li><li>Custom Fiter: ID of defined Custom Filter</li></ul></td>
</tr>
<tr>
<td></td>
<td>Enable Alias</td>
<td>(Only apply on the File Filter or Custom Filter type) after filtering it takes 2on column if defined as a TAG for the measurement better than the original name (in the first column)</td>
</tr>
<tr>
<td>Extra settings</td>
<td>Description</td>
<td>Useful description for the administrator</td>
</tr>
</tbody>
</table>
<h3 id="multi-edit-in-measurement-filters">Multi edit in Measurement Filters</h3>
<p>Multi edit has 1 option: Remove</p>
<ol>
<li>Remove: Allows to remove all the selected items</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fee52b9179a2be221706b69513ab80b3">3.8 - Custom filters</h1>
    <div class="lead">Create a filter directly from OID queries on related SNMP Device and related Measurement.</div>
	<h2 id="view">View</h2>
<p>Configured <strong>Custom Filters</strong> are shown as table. This will appear every time you navigate from menu.</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/custom-filters/images/customfilter_overview.JPG">
    
    <img src="/snmpcollector.org/docs/components/custom-filters/images/customfilter_overview_huf3fe23c7da3bc7da0f7b93a863f2688b_28227_1200x800_fit_q100_catmullrom.JPG"
         width="760" height="320"
         alt="Custom Filters" />
    
  </a>
  <figcaption>Custom Filters</figcaption>
</figure>
<h2 id="addedit-custom-filters">Add/Edit Custom Filters</h2>
<ul>
<li>
<p><strong>Add</strong>: In the Custom Filters list click on new button <img src="images/new_button.JPG" alt="New Button"></p>
</li>
<li>
<p><strong>Edit</strong>: Click on Custom Filter edit&rsquo;s button <img src="images/edit_button.JPG" alt="Edit Button"></p>
</li>
</ul>
<p>A modal will shown up with some steps that the user must complete:</p>
<h3 id="1-select-related-snmp-device">1. Select related SNMP Device:</h3>
<p><strong><em>Note:</em></strong>: Only valid when creating a new Custom Filter</p>
<p><strong><em>Note:</em></strong>: The user can change the related device clicking on <code>pen</code> on the modal top</p>
<p>Select the <code>SNMP Device</code> to do the query:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/custom-filters/images/customfilter_new_modal_init.JPG">
    
    <img src="/snmpcollector.org/docs/components/custom-filters/images/customfilter_new_modal_init_huf3fe23c7da3bc7da0f7b93a863f2688b_16853_1200x800_fit_q100_catmullrom.JPG"
         width="1079" height="146"
         alt="Select Device" />
    
  </a>
  <figcaption>Select Device</figcaption>
</figure>
<h3 id="2-select-related-measurement">2. Select related Measurement:</h3>
<p>If it has connection available, select the Measurement Group and Measurement to load the indexed OID:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/custom-filters/images/customfilter_connectiondata_panel.JPG">
    
    <img src="/snmpcollector.org/docs/components/custom-filters/images/customfilter_connectiondata_panel_huf3fe23c7da3bc7da0f7b93a863f2688b_19616_1200x800_fit_q100_catmullrom.JPG"
         width="499" height="172"
         alt="Connection data panel" />
    
  </a>
  <figcaption>Connection data panel</figcaption>
</figure>
<h3 id="3-select-values">3. Select values</h3>
<p>Click on <code>Send Query</code> button and query values will shown. After that, the user can add values from query result and from custom values:</p>
<h4 id="a-query-result">a. Query Result</h4>
<p>Select the values on the checkbox</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/custom-filters/images/customfilter_queryresult_panel.JPG">
    
    <img src="/snmpcollector.org/docs/components/custom-filters/images/customfilter_queryresult_panel_huf3fe23c7da3bc7da0f7b93a863f2688b_19554_1200x800_fit_q100_catmullrom.JPG"
         width="529" height="164"
         alt="Query Result" />
    
  </a>
  <figcaption>Query Result</figcaption>
</figure>
<h4 id="b-custom-values">b. Custom Values</h4>
<p>Click on <code>Add Values</code> and Custom values form will appear:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/custom-filters/images/customfilter_customitems_panel.JPG">
    
    <img src="/snmpcollector.org/docs/components/custom-filters/images/customfilter_customitems_panel_huf3fe23c7da3bc7da0f7b93a863f2688b_12784_1200x800_fit_q100_catmullrom.JPG"
         width="339" height="78"
         alt="Query Result" />
    
  </a>
  <figcaption>Query Result</figcaption>
</figure>
<h3 id="configuration-parameters">Configuration Parameters</h3>
<table>
<thead>
<tr>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>Text String for each</td>
</tr>
<tr>
<td>Description</td>
<td>The measurement on which filter could be applied if selected in the device.</td>
</tr>
<tr>
<td>Items</td>
<td>Items to filter <ul><li>TagID - Value to filter</li><li>Alias to apply on filter</li></ul></td>
</tr>
</tbody>
</table>
<h3 id="creating-measurement-filter">Creating Measurement Filter</h3>
<p>Once a Custom Filter is added, the user can create a new Measurement Filter and assign the related Measurement and Custom filter to it</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/custom-filters/images/customfilter_newfilter_filled.JPG">
    
    <img src="/snmpcollector.org/docs/components/custom-filters/images/customfilter_newfilter_filled_huf3fe23c7da3bc7da0f7b93a863f2688b_28816_1200x800_fit_q100_catmullrom.JPG"
         width="592" height="351"
         alt="Measurement Filter" />
    
  </a>
  <figcaption>Measurement Filter</figcaption>
</figure>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6d26fca9683a2feabd2302dc677e117f">3.9 - SNMP Devices</h1>
    <div class="lead">The core component: SNMP Devices. The user will define Devices to poll data from using SNMP protocol.</div>
	<h1 id="snmp-devices">SNMP Devices</h1>
<p>The core component: SNMP Devices. The user will define Devices to poll data from using SNMP protocol.</p>
<h2 id="view">View</h2>
<p>Configured <strong>SNMP Devices</strong> are shown as table. This will appear every time you navigate from menu.</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/snmp-devices/images/config_snmp_devices_list.jpg">
    
    <img src="/snmpcollector.org/docs/components/snmp-devices/images/config_snmp_devices_list_hu8956f4e6ec8a03497b95d1535eb1341f_74517_1200x800_fit_q100_catmullrom.jpg"
         width="1107" height="536"
         alt="" />
    
  </a>
  <figcaption></figcaption>
</figure>
<h2 id="addedit-snmp-devices">Add/Edit SNMP Devices</h2>
<ul>
<li>
<p><strong>Add</strong>: In the SNMP Devices list click on new button <img src="images/new_button.JPG" alt="New Button"></p>
</li>
<li>
<p><strong>Edit</strong>: Click on SNMP Devices edit&rsquo;s button <img src="images/edit_button.JPG" alt="Edit Button"></p>
</li>
</ul>
<p>The Create/Modify form will show up:</p>
<p>



<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/snmp-devices/images/config_snmp_devices_edit_1.jpg">
    
    <img src="/snmpcollector.org/docs/components/snmp-devices/images/config_snmp_devices_edit_1_hu7306542692575bffd75d3c6884c10697_121516_1200x800_fit_q100_catmullrom.jpg"
         width="305" height="800"
         alt="" />
    
  </a>
  <figcaption></figcaption>
</figure>
<br/></p>
<h3 id="configuration-parameters">Configuration Parameters</h3>
<table>
<thead>
<tr>
<th>Type of settings</th>
<th>Config Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Core settings</td>
<td>ID</td>
<td>Text String that uniquely identify the device , should be unique in the config db, it can be hostname, serial number or any other text id</td>
</tr>
<tr>
<td></td>
<td>Active</td>
<td>let device begin gathering process on agent boot process</td>
</tr>
<tr>
<td>Device settings</td>
<td>Host</td>
<td>the network direction the agent will  use to do snmp connection , could be IP or fqdn name</td>
</tr>
<tr>
<td></td>
<td>Port</td>
<td>the network port where the agent will use to do snmp connections</td>
</tr>
<tr>
<td></td>
<td>Timeout</td>
<td>sets de timeout for each SNMP query</td>
</tr>
<tr>
<td></td>
<td>Retries</td>
<td>sets the number of retries to attempt within Timeout</td>
</tr>
<tr>
<td></td>
<td>Alternate System OID&rsquo;s</td>
<td>Set OID to get like MIB-2::System Info for non MIB-2 based devices</td>
</tr>
<tr>
<td>Debug settings</td>
<td>LogLevel</td>
<td>enable use select verbosity of the device log</td>
</tr>
<tr>
<td></td>
<td>SnmpDebug</td>
<td>if this option is set all snmp low level protocol queries with detailed info on this device will be written on a file with name &ldquo;snmpdebug_XXXXXX.log&rdquo;</td>
</tr>
<tr>
<td>Polling settings</td>
<td>Snmpversion</td>
<td>could be any of these [1,2c,3]</td>
</tr>
<tr>
<td></td>
<td>Disable snmpbulk</td>
<td>if true the bulk feature won&rsquo;t be used ( these feature is needed to query IBM XIV disk arrays, which has a  snmpv2/v3 agent with a buggy bulk support)</td>
</tr>
<tr>
<td></td>
<td>MaxRepetitions</td>
<td>set The MaxRepetitions parameter for BULKWALK SNMP queries</td>
</tr>
<tr>
<td></td>
<td>Community</td>
<td>the snmp version 2 community</td>
</tr>
<tr>
<td></td>
<td>v3seclevel</td>
<td>(only for snmpv3) define the level of security needed for the connection valid values are.<br/><br/><ul><li>NoAuthNoPriv</li><li>AuthNoPriv</li><li>AuthPriv</li></ul></td>
</tr>
<tr>
<td></td>
<td>v3authuser</td>
<td>(snmpv3 only) the username that will establish the snmp query</td>
</tr>
<tr>
<td></td>
<td>v3authpass</td>
<td>(snmpv3 only) the authentication password</td>
</tr>
<tr>
<td></td>
<td>v3authprot</td>
<td>(snmpv3 only) the Authentication Protocol  values should be any of &ldquo;MD5&rdquo;, &ldquo;SHA&rdquo;</td>
</tr>
<tr>
<td></td>
<td>v3privpass</td>
<td>(snmpv3 only) Privacy password</td>
</tr>
<tr>
<td></td>
<td>v3privprot</td>
<td>(snmpv3 only) Privacy Protocol values should be any of [ &ldquo;DES&rdquo;, &ldquo;AES&rdquo;]</td>
</tr>
<tr>
<td></td>
<td>v3ContextEngineID</td>
<td>SNMPV3 ContextEngineID in ScopedPDU (equivalent to the net-snmp -E paramenter)</td>
</tr>
<tr>
<td></td>
<td>v3ContextName</td>
<td>SNMPV3 ContextName in ScopedPDU ( equivalent to the net-snmp -n parameter)</td>
</tr>
<tr>
<td></td>
<td>Freq</td>
<td>Frequency of polling in seconds ( default 30 sec if not set)</td>
</tr>
<tr>
<td></td>
<td>UpdateFltFreq</td>
<td>Number pof complete polls that agent will wait before perform snmp table index/filter updates , the final update time will be  Freq*FilterUpdate ( in seconds) Default 60 ( 1h elapsed time)</td>
</tr>
<tr>
<td></td>
<td>ConcurrentGather</td>
<td>Open a new SNMP Connection for each measurement and send concurrent queries over the device.</td>
</tr>
<tr>
<td>Data settings</td>
<td>InfluxDB Server</td>
<td>let you select over which database you will send data.</td>
</tr>
<tr>
<td></td>
<td>DeviceTagName</td>
<td>Tag name the agent will send to the output db  (default : &ldquo;device&rdquo;), could be any of the other more explicit tagname depending on the device type, context , by example  (router,switch,firewall,dns..etc)</td>
</tr>
<tr>
<td></td>
<td>DeviceTagValue</td>
<td>could be one of these:<br><ul><li><strong>id</strong>: will send as device tag the configured ID for this measurement</li><li><strong>Host</strong>will send as device tag data configured in the Host configuration (name or IP).</td>
</tr>
<tr>
<td></td>
<td>ExtraTags</td>
<td>an array of tags for this device that will be sent on all its measurements.</td>
</tr>
<tr>
<td></td>
<td>Override Device Vars</td>
<td>List of var catalog to override the default set value</td>
</tr>
<tr>
<td></td>
<td>Measurement Groups</td>
<td>an array of Measurement Group ID.</td>
</tr>
<tr>
<td></td>
<td>Measurement Filters</td>
<td>an array for configured filters</td>
</tr>
<tr>
<td>Extra settings</td>
<td>Description</td>
<td>add here all important information over this device</td>
</tr>
</tbody>
</table>
<h3 id="test-connection">Test Connection</h3>
<p>When editing or adding a SNMPDevice there is the option to send a query and check its connectivity and send OID queries from already defined components.</p>
<p>To access on the Test Connection Modal, click on <code>Test Connection</code></p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/snmp-devices/images/config_test_connection_list.JPG">
    
    <img src="/snmpcollector.org/docs/components/snmp-devices/images/config_test_connection_list_huf3fe23c7da3bc7da0f7b93a863f2688b_48533_1200x800_fit_q100_catmullrom.JPG"
         width="1071" height="362"
         alt="" />
    
  </a>
  <figcaption></figcaption>
</figure>
<p>The user can select the <code>OID Source</code>:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/snmp-devices/images/config_test_connection_components.JPG">
    
    <img src="/snmpcollector.org/docs/components/snmp-devices/images/config_test_connection_components_huf3fe23c7da3bc7da0f7b93a863f2688b_23500_1200x800_fit_q100_catmullrom.JPG"
         width="537" height="238"
         alt="" />
    
  </a>
  <figcaption></figcaption>
</figure>
<p>The OID related on selected component will load and the user will be able to send query to see those results:</p>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/snmp-devices/images/config_test_connection_oid.JPG">
    
    <img src="/snmpcollector.org/docs/components/snmp-devices/images/config_test_connection_oid_huf3fe23c7da3bc7da0f7b93a863f2688b_19505_1200x800_fit_q100_catmullrom.JPG"
         width="525" height="177"
         alt="" />
    
  </a>
  <figcaption></figcaption>
</figure>




<figure class="post-figure">
  <a href="/snmpcollector.org/docs/components/snmp-devices/images/config_test_connection_result.JPG">
    
    <img src="/snmpcollector.org/docs/components/snmp-devices/images/config_test_connection_result_huf3fe23c7da3bc7da0f7b93a863f2688b_24782_1200x800_fit_q100_catmullrom.JPG"
         width="1061" height="174"
         alt="" />
    
  </a>
  <figcaption></figcaption>
</figure>
<h3 id="filter-connection">Filter Connection</h3>
<p>As the user is editing or adding a new Device it a Custom Filter can be created directly from its form.
To access, click on &ldquo;Filter Connection&rdquo; button and the form will shown up.</p>
<p>For more information, check Component: Custom Filters</p>
<h3 id="multi-edit-in-snmp-devices">Multi edit in SNMP Devices</h3>
<p>Multi edit has 3 options: Remove,Change property or Append Property</p>
<ol>
<li>
<p>Remove: Allows to remove all the selected items</p>
</li>
<li>
<p>Change property: Allows to change the selected property of all the selected items. The properties are the same defined in the configuration.</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Options/Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>Active</td>
<td>Selector</td>
<td>True /False</td>
</tr>
<tr>
<td>LogLevel</td>
<td>Selector</td>
<td>Panic/ Fatal/ Error/ Warning/ Info /Debug</td>
</tr>
<tr>
<td>Concurrent Gather</td>
<td>Selector</td>
<td>True /False</td>
</tr>
<tr>
<td>Disable Bulk</td>
<td>Selector</td>
<td>True /False</td>
</tr>
<tr>
<td>SNMPDebug</td>
<td>Selector</td>
<td>True /False</td>
</tr>
<tr>
<td>Timeout</td>
<td>Input</td>
<td>Time in seconds</td>
</tr>
<tr>
<td>Retries</td>
<td>Input</td>
<td>Any number</td>
</tr>
<tr>
<td>Freq</td>
<td>Input</td>
<td>Any number in Hz</td>
</tr>
<tr>
<td>Max Repetitions</td>
<td>Input</td>
<td>Any number</td>
</tr>
<tr>
<td>Device Tag Name</td>
<td>Input</td>
<td>Any string</td>
</tr>
<tr>
<td>MeasurementGroup</td>
<td>Selector</td>
<td>List of all measurement groups</td>
</tr>
<tr>
<td>MeasFilters</td>
<td>Selector</td>
<td>List of all the filters</td>
</tr>
<tr>
<td>ExtraTags</td>
<td>Input</td>
<td>Any tag (string)</td>
</tr>
</tbody>
</table>
<ol start="3">
<li>Append Property: Allows to append a new measurement, filter o extra tags in the selected devices.</li>
</ol>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Options/Values</th>
</tr>
</thead>
<tbody>
<tr>
<td>MeasurementGroup</td>
<td>Selector</td>
<td>List of all measurement groups</td>
</tr>
<tr>
<td>MeasFilters</td>
<td>Selector</td>
<td>List of all the filters</td>
</tr>
<tr>
<td>ExtraTags</td>
<td>Input</td>
<td>Any tag (string)</td>
</tr>
</tbody>
</table>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-294d94bbf833bcc4308deea69b572771">4 - Runtime</h1>
    <div class="lead">Runtime Options.</div>
	<p>SNMPCollector has an embedded online device state and data measurement viewer, which help us to monitor how data has been gathered for each device.
On the device list you will see if device is active <img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Runtime/active_button.JPG" alt="devactive"> or have been stoped <img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Runtime/desactived_button.JPG" alt="devnotactive"> by the administrator. You can also see if there is any connectivity problems <img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Runtime/notConnected_button.JPG" alt="notconnected"></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Runtime/runtime_device_listt.JPG" alt="Device List"></p>
<h2 id="system-description">System description</h2>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Runtime/runtime_device_info_operations.JPG" alt="Host Info"></p>
<h2 id="runtime-operations">Runtime Operations</h2>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>SNMP State</td>
<td>Enable or disable online the selected SNMP Device</td>
</tr>
<tr>
<td>Force Gather</td>
<td>Execute a Complete Gathering process,  useful for testing on not active devices or force again</td>
</tr>
<tr>
<td>SNMP Debug</td>
<td>Enable or disable SNMP Debugging</td>
</tr>
<tr>
<td>Log Level</td>
<td>Change Log level online</td>
</tr>
<tr>
<td>Force Flt Update</td>
<td>Force filter update on the next poll</td>
</tr>
<tr>
<td>Download Log File</td>
<td>Download the log file related with device</td>
</tr>
<tr>
<td>Force SNMP Reset (soft)</td>
<td>only restarts snmp connection for current established measurements and  with current indexed states an filter states.</td>
</tr>
<tr>
<td>Force SNMP Reset (hard)</td>
<td>stop all snmp communications and restart them again, remap again all measurement map, indexes in the same way a restart is done.</td>
</tr>
</tbody>
</table>
<h2 id="measurement-online-data">Measurement online data</h2>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Runtime/runtime_device_measurement_data_explorer.JPG" alt="Meas Online data"></p>
<p>Tooltip detail of one metric:</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Runtime/runtime_metric_definition_info.JPG" alt="Meas Detailed Info"></p>
<p>Tooltip detail of one metric value:</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Runtime/runtime_device_data_tooltip_detail.JPG" alt="Meas Detailed Info"></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fe572f0081db30d87dad1bb9f4f963ee">5 - Data Management</h1>
    
	<h1 id="importing-a-file">IMPORTING A FILE</h1>
<p>To import a file the option &ldquo;Import&rdquo; in the menu will be used.</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/import-export-select.jpg" alt="Menu import"></p>
<p>This option allows the user to select a file ( in this case a JSON file) and select two options:</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/import-file.jpg" alt="Import file"></p>
<ul>
<li>AutoRename -&gt; It allows to change the name of the file, is useful if u want to copy a device, measurement, etc and rename it.</li>
<li>Overwrite -&gt; It allows to overwrite the current file in the SNMP collector with the same name as the imported file.</li>
</ul>
<p>By default both options are false.</p>
<p>If one of the options is true, the other will be locked.</p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ea173074f44cd460a38e6246191bd278">5.1 - Import</h1>
    <div class="lead">Create a filter directly from OID queries on related SNMP Device and related Measurement.</div>
	<h1 id="importing-a-file">IMPORTING A FILE</h1>
<p>To import a file the option &ldquo;Import&rdquo; in the menu will be used.</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/import-export-select.jpg" alt="Menu import"></p>
<p>This option allows the user to select a file ( in this case a JSON file) and select two options:</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/import-file.jpg" alt="Import file"></p>
<ul>
<li>AutoRename -&gt; It allows to change the name of the file, is useful if u want to copy a device, measurement, etc and rename it.</li>
<li>Overwrite -&gt; It allows to overwrite the current file in the SNMP collector with the same name as the imported file.</li>
</ul>
<p>By default both options are false.</p>
<p>If one of the options is true, the other will be locked.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2ee6ccf5bafcd55d77825059e1918e29">5.2 - Export</h1>
    
	<h1 id="exporting-a-file">EXPORTING A FILE</h1>
<p>To export a file the option &ldquo;Export data&rdquo; in the menu will be used.</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/import-export-select.jpg" alt="Menu export"></p>
<p>This option allows the user to select different files to export. The steps will be the following:</p>
<h2 id="1-select-type">1. Select type:</h2>
<p>The user can select one type at the same time of the following options:</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/export-file-1.jpg" alt="Imagen select type"></p>
<h2 id="2-select-items-of-type">2. Select Items of type:</h2>
<p>The user can select one or more items of the selected type and click on the arrow to add them to the exported file.</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/export-file-2.jpg" alt="Imagen select items type"></p>
<h2 id="3-items-ready-to-export">3. Items ready to export:</h2>
<p>All the selected files will be shown in the menu. The user can select other types, like the selected in step 1, to add more files.</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/export-file-3.jpg" alt="Imagen ready to export"></p>
<p>The recursive option allows the user to select one field and export all their children associated</p>
<ul>
<li>Example of recursive option:</li>
</ul>
<p>We have defined the measurement linux_cpu with 4 metricss. If we use the recursive option when we select linux_cpu we will export all the childrens with it.</p>
<p>The following tree is how it works:</p>
<pre><code>linux_cpu
│   linux_cpu_used_percent
│   linux_cpu_idle_percent
│   linux_cpu_system_percent
│   linux_cpu_user_percent
</code></pre><p>And this is the result we obtain when we export the file at the end:</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/recursive.jpg" alt="Img recursive"></p>
<h2 id="4-export">4. Export:</h2>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/DataManagement/export-file-4.jpg" alt="Imagen final expoort"></p>
<ul>
<li>&lsquo;Tags&rsquo; field is used to identify the exported data</li>
</ul>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6342c6ce985f24cf77e31aac9b1cdc33">6 - Troubleshooting</h1>
    
	<h1 id="review-logs">Review Logs</h1>
<p>snmpcollector has a complete set of log files to review all what is happening while gathering snmp data from our infrastructure. All logs are located in the same directory LOG_DIR.</p>
<p>Default LOG_DIR is at <code>/var/log/snmpcollector</code> if snmpcollector has been installed with  debian and redhat based packages. is  at <code>/opt/snmpcollector/log</code> in docker and always can be set with -log option  passed to the snmpcollector binary.</p>
<p>If installed with debian/redhat packages you can also tune this parameters in these files</p>
<ul>
<li>rpm /etc/sysconfig/snmpcollector</li>
<li>deb /etc/default/snmpcollector</li>
</ul>
<h3 id="main-agent-logs">Main agent logs</h3>
<p><code>$LOG_DIR/snmpcollector.log</code></p>
<p>Show basic initialisation process and the result of runtime administration from the web ui
Default Level: set in the main config.toml file under the general section
Supported Levels:  panic,fatal,error,warn,info,debug
Can be changed online?: no</p>
<h3 id="http-access-logs">HTTP access logs</h3>
<p><code>$LOG_DIR/http_access.log</code></p>
<p>Show us all http access request the result and response time. This log has not levelling support</p>
<h3 id="device-specific-logs">Device specific logs</h3>
<p><code>$LOG_DIR/&lt;device_id&gt;.log</code></p>
<p>This is the main log when you if you have problems with only a set of devices and only under certain conditions.</p>
<p>Default Level: set in the device configuration section on the configuration database
Supported Levels:  panic,fatal,error,warn,info,debug
Can be changed online?: yes in the runtime webui</p>
<h3 id="snmp-debug-logs">SNMP debug logs</h3>
<p><code>$LOG_DIR/snmpdebug_&lt;device_id&gt;_&lt;measurement_id&gt;.log</code></p>
<p>This log is disabled by default and can be enabled online on the webui , when stabilising snmp links with remote devices snmpcollector has one link by measurement. When enabling snmpdebug log each measurement on the device will create a new file with snmp protocol related debug. This debug will help us to review connection and or snmp protocol related problems.</p>
<h3 id="sql-debug-log">SQL debug log</h3>
<p><code>$LOG_DIR/sql.log</code></p>
<p>This log is disabled by default.</p>
<p>Default Level: set in the main config.toml file under the general section
Supported Levels:  on/off ( debug = true /  debug = false)
Can be changed online?: no</p>
<h1 id="self-monitoring">Self Monitoring</h1>
<p>When snmpcollector has self-monitoring activate it can send data from itself to the &ldquo;default&rdquo; backend (you should have both selfmon active and one influx backend configured with id = &ldquo;default&rdquo;.</p>
<p>You can activate on the main config file config.toml on the [selfmon] section.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#000;font-weight:bold">[</span><span style="color:#000">selfmon</span><span style="color:#000;font-weight:bold">]</span>
 <span style="color:#8f5902;font-style:italic">#enable true/false enable/disable self monitoring</span>
 <span style="color:#000">enabled</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">true</span>
 <span style="color:#8f5902;font-style:italic">#send data Frequency</span>
 <span style="color:#000">freq</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">60</span>
 <span style="color:#8f5902;font-style:italic">#prefix for measurement naming</span>
 <span style="color:#000">prefix</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;&#34;</span>
 <span style="color:#8f5902;font-style:italic">#inherit device tags (only apply to the selfmon_device_stats measurmentes)</span>
 <span style="color:#000">inheritdevicetags</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">true</span>
 <span style="color:#8f5902;font-style:italic">#adds extra tags to the measurement config should be set as a csv - tag=value1,tag2=value2,...,tagN=valN</span>
 <span style="color:#000">extratags</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span> <span style="color:#4e9a06">&#34;instance=snmpcollector01&#34;</span> <span style="color:#000;font-weight:bold">]</span>
</code></pre></div><p>When active it will send 2 measurements.</p>
<h3 id="defined-measurements">defined measurements</h3>
<p>These are the defined measurements, where user can add prefix in the config.toml if needed.</p>
<table>
<thead>
<tr>
<th>measurement</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><prefix>selfmon_gvm</td>
<td>send statistics about the Go Virtual Machine.</td>
</tr>
<tr>
<td><prefix>selfmon_device_stats</td>
<td>send statistic data form each gathering device</td>
</tr>
<tr>
<td><prefix>selfmon_outdb_stats</td>
<td>statistics measurement for each output db</td>
</tr>
</tbody>
</table>
<h4 id="selfmon_gvm">selfmon_gvm</h4>
<table>
<thead>
<tr>
<th>FieldName</th>
<th>Source</th>
<th>Unit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>runtime_goroutines</strong></td>
<td>runtime.NumGoroutine()</td>
<td>number</td>
<td>Number of currently running goroutines</td>
</tr>
<tr>
<td><strong>mem.alloc</strong></td>
<td>runtime.ReadMemStats.Alloc</td>
<td>bytes</td>
<td>Total bytes allocated</td>
</tr>
<tr>
<td><strong>mem.mallocs</strong></td>
<td>runtime.ReadMemStats.Mallocs</td>
<td>mallocs per second</td>
<td>Number of Mallocs issued to the system</td>
</tr>
<tr>
<td><strong>mem.frees</strong></td>
<td>runtime.ReadMemStats.Frees</td>
<td>frees per second</td>
<td>Number of frees issued to the system</td>
</tr>
<tr>
<td><strong>mem.heapAlloc</strong></td>
<td>runtime.ReadMemStats.HeapAlloc</td>
<td>bytes</td>
<td>allocated heap objects.</td>
</tr>
<tr>
<td><strong>mem.stackInuse</strong></td>
<td>runtime.ReadMemStats.StackInuse</td>
<td></td>
<td>bytes in stack spans.  In-use stack spans have at least one stack in them. These spans can only be used for other stacks of the same size. There is no StackIdle because unused stack spans are returned to the heap (and hence counted toward HeapIdle).</td>
</tr>
<tr>
<td><strong>gc.total_pause_ns</strong></td>
<td>memStats.PauseTotalNs</td>
<td>ms</td>
<td>accumulated paused in ms</td>
</tr>
<tr>
<td><strong>gc.pause_per_interval</strong></td>
<td>memStats.PauseTotalNs</td>
<td>ms/interval</td>
<td>accumulated paused in ms since last gathered statistic</td>
</tr>
<tr>
<td><strong>gc.pause_per_second</strong></td>
<td>memStats.PauseTotalNs</td>
<td>ms/second</td>
<td>accumulated paused in ms per second (normalized)</td>
</tr>
<tr>
<td><strong>gc.gc_per_interval</strong></td>
<td>memStats.NumGC</td>
<td>#gc/second</td>
<td>number of gc&rsquo;s since last gathered statistic</td>
</tr>
<tr>
<td><strong>gc.gc_per_second</strong></td>
<td>memStats.NumGC</td>
<td>#gc/second</td>
<td>number of gc&rsquo;s per second ( normalized)</td>
</tr>
</tbody>
</table>
<h4 id="selfmon_device_stats">selfmon_device_stats</h4>
<table>
<thead>
<tr>
<th>FieldName</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>snmp_oid_get_all</strong></td>
<td>All Gathered snmp metrics ( sum of snmpget oid&rsquo;s and all received oid&rsquo;s in snmpwalk queries)</td>
</tr>
<tr>
<td><strong>snmp_oid_get_processed</strong></td>
<td>Gathered and processed snmp metrics after filters are applied ( not always sent to the backend it depends on the report flag)</td>
</tr>
<tr>
<td><strong>snmp_oid_get_errors</strong></td>
<td>number of  oid with errors for all measurements</td>
</tr>
<tr>
<td><strong>cycle_gather_start_time</strong></td>
<td>Last gathered time in unix timestamp</td>
</tr>
<tr>
<td><strong>cycle_gather_duration</strong></td>
<td>elapsed time taken to get all measurement info in seconds</td>
</tr>
<tr>
<td><strong>filter_start_time</strong></td>
<td>Last Applied Filter time  in unix timestamp</td>
</tr>
<tr>
<td><strong>filter_duration</strong></td>
<td>elapsed time taken to compute all applicable filters on the device in seconds</td>
</tr>
<tr>
<td><strong>backend_sent_start_time</strong></td>
<td>Last sent time to the internal output buffer</td>
</tr>
<tr>
<td><strong>backend_sent_Duration</strong></td>
<td>elapsed time taken to send data to the internal output buffer backend</td>
</tr>
<tr>
<td><strong>metric_sent</strong></td>
<td>number of metrics sent (taken as fields) for all measurements</td>
</tr>
<tr>
<td><strong>metric_sent_errors</strong></td>
<td>number of metrics  (taken as fields) with errors for all measurements</td>
</tr>
<tr>
<td><strong>measurement_sent</strong></td>
<td>(number of  measurements build to send as a single request sent to the backend)</td>
</tr>
<tr>
<td><strong>measurement_sent_errors</strong></td>
<td>number of metrics  (taken as fields) with errors for all measurements</td>
</tr>
</tbody>
</table>
<h4 id="selfmon_outdb_stats">selfmon_outdb_stats</h4>
<table>
<thead>
<tr>
<th>field</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>write_sent</strong></td>
<td>number of HTTP writes sent to the DB (each write sends a batchPoint) on the last period</td>
</tr>
<tr>
<td><strong>write_error</strong></td>
<td>number of HTTP write errors on the period</td>
</tr>
<tr>
<td><strong>points_sent</strong></td>
<td>number of Points sent on each Write (on each BatchPoint) on the last period</td>
</tr>
<tr>
<td><strong>points_sent_max</strong></td>
<td>max number of points sent on all writes on the last period</td>
</tr>
<tr>
<td><strong>points_sent_avg</strong></td>
<td>(only if write_sent &gt; 0) averaged points sent for all writes on the last period</td>
</tr>
<tr>
<td><strong>write_time</strong></td>
<td>sum of all HTTP response times on  all writes on the last period</td>
</tr>
<tr>
<td><strong>write_time_max</strong></td>
<td>max HTTP response time in all writes on the last period</td>
</tr>
<tr>
<td><strong>write_time_avg</strong></td>
<td>(only if write_sent &gt; 0) average response time for all writes on the last period</td>
</tr>
<tr>
<td><strong>fields_sent</strong></td>
<td>number of fields sent to the DB on the last period</td>
</tr>
<tr>
<td><strong>fields_sent_max</strong></td>
<td>max number of fields sent to the DB on the last period</td>
</tr>
<tr>
<td><strong>buffer_percent_used</strong></td>
<td>percent of the usage of the total buffer used for each.</td>
</tr>
</tbody>
</table>
<p>Use this <a href="https://raw.githubusercontent.com/toni-moreno/snmpcollector/gh-pages/dashboards/GRAFANA_SNMPCOLLECTOR_DEVICESTATISTICS.json">GRAFANA SNMPCOLLECTOR DEVICE STATISTICS DASHBOARD</a> to see your device stats and  this <a href="https://raw.githubusercontent.com/toni-moreno/snmpcollector/gh-pages/dashboards/GRAFANA_SNMPCOLLECTOR_GVM.json">GRAFANA SNMPCOLLECTOR GVM STATISTICS DASHBOARD </a> to see internal Golang Virtual Machine evolution</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fb0f854c53f1ba28ad4c2ccf8d24df34">7 - Examples</h1>
    
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-0eecdc864a95f5c7c01cd168dadaaf7a">7.1 - Retrieve metrics from Cisco QoS - CISCO-CLASS-BASED-QOS-MIB</h1>
    
	<!-- Images Rel -->
<!-- CM -->
<!--TS -->
<!-- END -->
<h1 id="example-retrieve-metrics-from-cisco-qos---cisco-class-based-qos-mib">Example: Retrieve metrics from Cisco QoS - CISCO-CLASS-BASED-QOS-MIB</h1>
<p>This example will show up how to retrieve QoS metrics from a Cisco Device, based on one of the most complex MIB - <code>CISCO-CLASS-BASED-QOS-MIB</code>
<strong>Only valid on 0.9</strong></p>
<hr>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li>0 Prerequisites : What and from we are going to collect our data?
<ul>
<li>0.1 SNMP Device model</li>
<li>0.2 Select metrics to collect data
<ul>
<li>0.2.1 Available object tables</li>
<li>0.2.2 Objects identifiers</li>
<li>0.2.3 Tags - Indexes definition</li>
</ul>
</li>
<li>0.3 Measurements</li>
</ul>
</li>
<li>1 CMStats
<ul>
<li>1.1 Configuring metrics</li>
<li>1.2 Configuring measurements
<ul>
<li>1.2.1 Overview</li>
<li>1.2.2 Index 0 | Service Policy Index Tag: cbQosIfIndex</li>
<li>1.2.3 Index 1 | Service Policy Index Tag: cbQosPolicyDirection</li>
<li>1.2.4 Index 2 | ClassMap Tag: cbQosCMName</li>
<li>1.2.5 Index 3 | PolicyName Tag: cbQosPolicyMapName</li>
<li>1.2.6 Index 4 | ClassMap Tag: cbQosCMInfo</li>
<li>1.2.7 Result</li>
</ul>
</li>
<li>1.3 Configuring filters
<ul>
<li>1.3.1 OID Condition - Filter classmap</li>
<li>1.3.2 MeasurementFilter - Filter classmap</li>
</ul>
</li>
<li>1.4 Configuring Measurement Group</li>
<li>1.5 Configuring Device</li>
<li>1.6 Reload configuration</li>
<li>1.7 Check your results!</li>
</ul>
</li>
<li>2 TSStats
<ul>
<li>2.1 Configuring metrics</li>
<li>1.2 Configuring measurements
<ul>
<li>1.2.1 Overview</li>
<li>2.2.2 Index 0 | Service Policy Index Tag: cbQosIfIndex</li>
<li>2.2.3 Index 1 | Service Policy Index Tag: cbQosPolicyDirection</li>
<li>2.2.4 Index 2 | ClassMap Tag: cbQosCMName</li>
<li>2.2.4 Index 3 | PolicyMap Tag: policyMapName</li>
<li>2.2.4 Result</li>
</ul>
</li>
<li>2.3 Configuring filters
<ul>
<li>2.3.1 OID Condition - Filter TS</li>
<li>2.3.2 MeasurementFilter - Filter classmap</li>
</ul>
</li>
<li>2.4 Configuring Measurement Group</li>
<li>2.5 Configuring Device</li>
<li>2.6 Reload configuration</li>
<li>2.7 Check your results!</li>
</ul>
</li>
</ul>
<hr>
<h2 id="0-prerequisites--what-and-from-we-are-going-to-collect-our-data">0. Prerequisites : What and from we are going to collect our data?</h2>
<h3 id="01-snmp-device-model">0.1 SNMP Device model</h3>
<p>In order to select the correct metrics for our device, we must check first what model it is.
If you don&rsquo;t know the model, you can pre-add the device on SNMP Device Component and do a test connection. To do that:</p>
<ul>
<li>Click on <code>SNMP Device</code> menu item</li>
<li>A table with configured devices will show up. Press &ldquo;New&rdquo; button or edit an existing one to access to the configuration form.</li>
<li>Fill the device with the basic connection information</li>
<li>If everything is OK, you will be able to do a &ldquo;Test Connection&rdquo;. This button will show up a console with System information  of the Device.</li>
</ul>
<h3 id="02-select-metrics-to-collect-data">0.2 Select metrics to collect data</h3>
<p>To define the metrics to retrieve data from we need first to analyze how CISCO-CLASS-BASED-QOS-MIB works
I will use the example exposed on: <a href="https://blog.pierky.com/cisco-class-based-qos-snmp-mib-and-statistics-monitor-for-nms/">https://blog.pierky.com/cisco-class-based-qos-snmp-mib-and-statistics-monitor-for-nms/</a> as it will help to underestand a real case</p>
<h4 id="021-available-object-tables">0.2.1 Available object tables</h4>
<p>In <code>CISCO-CLASS-BASED-QOS-MIB</code> the tables are defined by each kind of object that is available to be configured on QoS.
Each object has a <strong>CFG Table</strong> that shows config information and <strong>StatsTable</strong> with the available metrics to retrieve data from.</p>
<p>On this example, we will work over the following objects and tables:</p>
<table>
<thead>
<tr>
<th>Object</th>
<th>CFG Table</th>
<th>Stats Table</th>
</tr>
</thead>
<tbody>
<tr>
<td>Policy Map</td>
<td><code>cbQosPolicyMapCfg - 1.3.6.1.4.1.9.9.166.1.6.1.1</code></td>
<td>&ndash;</td>
</tr>
<tr>
<td>ClassMap</td>
<td><code>cbQosClassMapCfg - 1.3.6.1.4.1.9.9.166.1.7.1.1</code></td>
<td><code>cbQosCMStatsTable - 1.3.6.1.4.1.9.9.166.1.15.1.1</code></td>
</tr>
<tr>
<td>MatchStmt</td>
<td><code>cbQosMatchStmtCfg - 1.3.6.1.4.1.9.9.166.1.8.1.1</code></td>
<td><code>cbQosMatchStmtStats -  1.3.6.1.4.1.9.9.166.1.16.1.1</code></td>
</tr>
<tr>
<td>TS</td>
<td><code>cbQosTSCfg - 1.3.6.1.4.1.9.9.166.1.13.1.1</code></td>
<td><code>cbQosTSStats - 1.3.6.1.4.1.9.9.166.1.19</code></td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: QoS objets table
</p>
<p>As PolicyMap doesn&rsquo;t have stats on itself, we will cover in this example how to retrieve data from:</p>
<ul>
<li>ClassMap Object</li>
<li>TS Object</li>
</ul>
<h4 id="022-objects-identifiers">0.2.2 Objects identifiers</h4>
<p>Once we have decided objects to retrieve data from, we need to check how to identify each metrics and what tags do we need</p>
<p>The tree hierarchy of QoS follows as:</p>
<pre><code>Interface 
| - Direction
| - PolicyMap
    |- ClassMap
      |- MatchStmt
      |- TS
</code></pre><p>So, the deeper object is, more tags we will need to retrieve in order to be able to identify it:</p>
<table>
<thead>
<tr>
<th>Object</th>
<th>Tags needed</th>
</tr>
</thead>
<tbody>
<tr>
<td>PolicyMap</td>
<td><em>Interface, Direction, PolicyMap</em></td>
</tr>
<tr>
<td>ClassMap</td>
<td><em>Interface, Direction, PolicyMap, ClassMap</em></td>
</tr>
<tr>
<td>MatchStmt</td>
<td><em>Interface, Direction, PolicyMap, ClassMap, MatchStmt</em></td>
</tr>
<tr>
<td>TS</td>
<td><em>Interface, Direction, PolicyMap, ClassMap, MatchStmt</em></td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: QoS objets table-tags relation
</p>
<h4 id="023-tags---indexes-definition">0.2.3 Tags - Indexes definition</h4>
<p>Each object defined on XXXXStatsTable and XXXXCfg tables have a double index.
In order to reference them to the document, lets identify and name them:</p>
<table>
<thead>
<tr>
<th>Base</th>
<th>Index</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>XXX</strong>.YYY</td>
<td>XXX</td>
<td>Service Policy Index</td>
</tr>
<tr>
<td>XXX.<strong>YYY</strong></td>
<td>YYY</td>
<td>Object Index</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index definition
</p>
<h3 id="03-measurements">0.3 Measurements</h3>
<p>As we have seen, each object needs specific tags to identify those metrics and, based on that they are double indexed, we will create a single measurement to retrieve each object stats</p>
<h1 id="1-cmstats">1. CMStats</h1>
<p>The first set of data that we want to retrieve are the CMStats</p>
<h2 id="11-configuring-metrics">1.1 Configuring metrics</h2>
<p>Available metrics are defined on <code>cbQosCMStatsTable - 1.3.6.1.4.1.9.9.166.1.15.1.1</code>.
In our example we will configure the following metrics:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Field Name</th>
<th>IsTag</th>
<th>DataSrcType</th>
<th>GetRate</th>
<th>Base OID/Extradata</th>
<th>Scale</th>
<th>Shift</th>
</tr>
</thead>
<tbody>
<tr>
<td>cisco_cbQosCMPrePolicyPkt64</td>
<td>cbQosCMPrePolicyPkt64</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.15.1.1.3</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>cisco_cbQosCMPrePolicyByte64</td>
<td>cbQosCMPrePolicyByte64</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.15.1.1.6</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>cisco_cbQosCMPrePolicyBitRate</td>
<td>cbQosCMPrePolicyBitRate</td>
<td>false</td>
<td>Gauge32</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.15.1.1.7</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: QoS CMStats metrics configuration
</p>
<p>As we have said, each metric will have a double index: <code>[Service Policy Index].[Object Index]</code></p>
<h2 id="12-configuring-measurements">1.2 Configuring measurements</h2>
<p>Let&rsquo;s start to define the measurement</p>
<h3 id="121-overview">1.2.1 Overview</h3>
<p>As we have defined, the CMStats needs the following tags to identify each metric:</p>
<ul>
<li>Interface</li>
<li>Direction</li>
<li>PolicyMap Name</li>
<li>ClassMap Name</li>
<li>[Extra] ClassMap Info</li>
</ul>
<p>The main problem here is that each tag is being retrieved with <strong>different indexes and different indexes dimension</strong>, so in order to correlate those tags and indexes we need to define a <strong>Multi Index Measurement</strong></p>
<p>To do that, go to <code>Influx Measurements</code> section and click on <code>+New</code></p>
<p>Fill the <code>ID</code> and <code>Name</code> fields with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cisco_qos_cbQosCMStats</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Name</td>
<td>cbQosCMStats</td>
<td>Measurement name that will be used on InfluxDB</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Measurement config section
</p>
<p>On the <code>GetMode</code> field select:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GetMode</td>
<td>(snmp Table) Multiple indexes</td>
<td>&ndash;</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Measurement get mode
</p>
<h3 id="122-index-0--service-policy-index-tag-cbqosifindex">1.2.2 Index 0 | Service Policy Index Tag: cbQosIfIndex</h3>
<p>The first that we need to retrieve are interface related tags, name and direction.
According to documentation, we need to poll the following OIDs to retrieve those tags:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>OID</th>
<th>Index</th>
</tr>
</thead>
<tbody>
<tr>
<td>cbQosIfIndex</td>
<td>1.3.6.1.4.1.9.9.166.1.1.1.1.4</td>
<td>Service Policy</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Service policy index
</p>
<p>A simple walk on this OID gives as value the <code>ifIndex</code></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; cbQosIfIndex: 1.3.6.1.4.1.9.9.166.1.1.1.1.4

1.3.6.1.4.1.9.9.166.1.1.1.1.4<span style="color:#ce5c00;font-weight:bold">[</span>.1043<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: <span style="color:#0000cf;font-weight:bold">1</span>
1.3.6.1.4.1.9.9.166.1.1.1.1.4<span style="color:#ce5c00;font-weight:bold">[</span>.1099<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: <span style="color:#0000cf;font-weight:bold">1</span>
</code></pre></div><p>Note that the <code>[.1043]</code> and <code>[.1099]</code> will be used on the following indexes definition as <code>Service Policy Index</code></p>
<p>The value of <code>1</code> is the ifIndex index, so, if we retrieve data from ifName using that index we will be able to retrieve the related ifName of the interface:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; ifName: 1.3.6.1.2.1.31.1.1.1.1

1.3.6.1.2.1.31.1.1.1.1<span style="color:#ce5c00;font-weight:bold">[</span>.1<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Te1/0/3&#34;</span>
</code></pre></div><p>As we have an indirect tag, we will create an index with <strong>&quot;(snmp Table) Indexed with indirect Tag&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_it.jpg" alt="mi-indexed_it" title="(snmp Table) Indexed with indirect TAG"></p>
<p>And will fill with the following fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosIfIndex</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve interface name from cbQosIfIndex</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.1.1.1.4</td>
<td>Base OID is the cbQosIfIndex which gives us the value of the ifMIB index</td>
</tr>
<tr>
<td>Index Tag OID</td>
<td>.1.3.6.1.2.1.31.1.1.1.1</td>
<td>ifName TagOID that will match with cbQosIfIndex result</td>
</tr>
<tr>
<td>Index Tag</td>
<td>ifName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the ifName tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Index Dependency</td>
<td>&ndash;</td>
<td>We don&rsquo;t need a dependency as it will be the first OID to retrieve tag from</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 0 - cbQosIfIndex
</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob//gh-pages/images/webUI/Examples/QoS/cbqosifindex_meas.jpg" alt="cbqosifindex_meas" title="example of index dfefinition of cbqosifIndex"></p>
<p>The final output map of pairs [index]:[tag] will be:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; Index: IDX<span style="color:#ce5c00;font-weight:bold">{</span>0<span style="color:#ce5c00;font-weight:bold">}</span> <span style="color:#000;font-weight:bold">|</span> cbQosIfIndex

<span style="color:#ce5c00;font-weight:bold">[</span>.1043<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Te1/0/3&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName
<span style="color:#ce5c00;font-weight:bold">[</span>.1099<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Te1/0/3&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> ifName
</code></pre></div><h3 id="123-index-1--service-policy-index-tag-cbqospolicydirection">1.2.3 Index 1 | Service Policy Index Tag: cbQosPolicyDirection</h3>
<p>Once we have the inferface name, we can get the direction of the applied policy on each interface, in order to retrieve that we can query the following OID that gives us the direction.
Note that the index keeps only in 1 dimension and it is related with the <code>Service Policy Index</code></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>OID</th>
<th>Index</th>
</tr>
</thead>
<tbody>
<tr>
<td>cbQosPolicyDirection</td>
<td>.1.3.6.1.4.1.9.9.166.1.1.1.1.3</td>
<td><strong>Service Policy Index</strong></td>
</tr>
</tbody>
</table>
<p>A simple walk on this OID gives the direction of the policy applied on an interface</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; cbQosPolicyDirection:  

.1.3.6.1.4.1.9.9.166.1.1.1.1.3<span style="color:#ce5c00;font-weight:bold">[</span>.1043<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: output<span style="color:#ce5c00;font-weight:bold">(</span>2<span style="color:#ce5c00;font-weight:bold">)</span>
.1.3.6.1.4.1.9.9.166.1.1.1.1.3<span style="color:#ce5c00;font-weight:bold">[</span>.1099<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> INTEGER: input<span style="color:#ce5c00;font-weight:bold">(</span>1<span style="color:#ce5c00;font-weight:bold">)</span>
</code></pre></div><p>In this case, we don&rsquo;t need to do an indirection, as it is giving directly the value of the tag, so we can use a <strong>&quot;(snmp Table) Index with direct TAG&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed.jpg" alt="mi-indexed" title="(snmp Table) Indexed with direct TAG"></p>
<p>As we can see, the indexes are also [.1043] and [.1099] - <code>Service Policy Index</code> and they are shared with the <code>IDX{0}</code>, the <code>cbQosIfIndex</code> index</p>
<p>We will fill the index with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosPolicyDirection</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve interface name from cbQosPolicyDirection</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.1.1.1.3</td>
<td>Base OID is the cbQosPolicyDirection which gives us the value of the direction</td>
</tr>
<tr>
<td>Index Tag</td>
<td>policyDirection</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{0};DOT[0:0];SKIP</td>
<td>(*)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 1 - cbQosPolicyDirection
</p>
<p>(*) Dependency:</p>
<p>We set up a dependency with the IDX{0}, as they shares the same Index in order to heridate ifIndex Tags. We will use a SKIP strategy</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqospolicydirection_meas.jpg" alt="cbqospolicydirection_meas" title="example of definition of cbqospolicydirection"></p>
<p>At this point, we will have that the <code>IDX{1}</code> will be:</p>
<pre><code>&gt; Index: IDX{0} | cbQosIfIndex

[.1043] = &quot;Te1/0/3&quot; || ifName
[.1099] = &quot;Te1/0/3&quot; || ifName

&gt; Index: IDX{1} | cbQosPolicyDirection | IDX{0};DOT[0:0];SKIP

[.1043] = &quot;Te1/0/3|2&quot; || ifName | policyDirection
[.1099] = &quot;Te1/0/3|1&quot; || ifName | policyDirection
</code></pre><p>We just finished to map the first index <code>Service Policy Index</code> and feed it with <code>ifName</code> and <code>policyDirection</code> tags</p>
<h3 id="124-index-2--classmap-tag-cbqoscmname">1.2.4 Index 2 | ClassMap Tag: cbQosCMName</h3>
<p>On this point, we are going to retrieve the ClassMap name. Despite of the above indexes, the table to retrieve the class map name has now a <strong>double index</strong>: <code>Service Policy</code>.<code>Object Index</code></p>
<p>To retrieve values from CFG tables, the MIB provides an OID to get the index reference to the object, which it has to be retrieved from <code>cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2</code></p>
<p>A walk over the cbQosConfigIndex:</p>
<pre><code>&gt; cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1043] = Gauge32: 1035
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1045] = Gauge32: 1029
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1047] = Gauge32: 1033
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1049] = Gauge32: 1037
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1051] = Gauge32: 1025
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1053] = Gauge32: 1027
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1085] = Gauge32: 1079
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1099] = Gauge32: 1063
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1101] = Gauge32: 1057
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1103] = Gauge32: 1061
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1105] = Gauge32: 1065
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1107] = Gauge32: 1025
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1109] = Gauge32: 1027
</code></pre><p>The name of the classmaps comes from the table: <code>cbQosCMName - .1.3.6.1.4.1.9.9.166.1.7.1.1.1</code></p>
<p>A walk over the <code>cbQosCMName</code> table:</p>
<pre><code>&gt; cbQosCMName - .1.3.6.1.4.1.9.9.166.1.7.1.1.1

.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1025] = STRING: class-default
.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1029] = STRING: ICMP
.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1057] = STRING: NonLocal
</code></pre><p>Note that the index is directly the one recieved from cbQosConfigIndex:</p>
<pre><code>&gt; cbQosConfigIndex (filtered) - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1045] = Gauge32: 1029
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1051] = Gauge32: 1025
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1101] = Gauge32: 1057
...
</code></pre><p>As we have said, the first index references to the <code>Service Policy Index</code> and the second index refers directly to the <code>Object Index</code>.</p>
<p>As we have an indirect tag, we will create an index with <strong>&quot;(snmp Table) Indexed with indirect Tag&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_it.jpg" alt="mi-indexed_it" title="(snmp Table) Indexed with indirect TAG"></p>
<p>We will fill with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosCMName</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve CMName</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Base OID is the <code>cbQosConfigIndex</code> which gives us the value of the config related with cbQosCMName table</td>
</tr>
<tr>
<td>Index Tag OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.7.1.1.1</td>
<td><code>cbQosCMName</code> TagOID that will match with <code>cbQosConfigIndex</code> result</td>
</tr>
<tr>
<td>Index Tag</td>
<td>cmName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{1};DOT[0:0];SKIP</td>
<td>(*)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 2 - cbQosCMName
</p>
<p>(*) Dependency</p>
<p>The dependency in ths case is based on <code>IDX{1}</code> - cbQosPolicyDirection that already have ifName tag.
In this case, the metrics have indexes with dimension 2, so we need to change the check condition based only on the first index, the <code>Service Policy Index</code>, using the statement <code>DOT[0:0]</code></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscmname_meas.jpg" alt="cbqoscmname_meas" title="example of definition of cbQosCMName index"></p>
<p>At this point, we will have that the <code>IDX{1}</code> will be:</p>
<pre><code>
&gt; IDX{1}:

[.1043] = &quot;Te1/0/3|2&quot; || ifName | policyDirection
[.1099] = &quot;Te1/0/3|1&quot; || ifName | policyDirection

&gt; Index: IDX{2} | cbQosCMName | IDX{1};DOT[0:0];SKIP

&gt;&gt; DOT[0:0] = [.1043] / [.1099]

[.1043][.1045] = &quot;Te1/0/3|2|ICMP&quot;           || ifName | policyDirection | cmName
[.1043][.1051] = &quot;Te1/0/3|2|class-default&quot;  || ifName | policyDirection | cmName
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal&quot;       || ifName | policyDirection | cmName

</code></pre><p>We just started to map the both index <code>Service Policy</code>.<code>Object Index</code></p>
<h3 id="125-index-3--policyname-tag-cbqospolicymapname">1.2.5 Index 3 | PolicyName Tag: cbQosPolicyMapName</h3>
<p>As each class is attached to a policyName, we need to identify the classmap with the name of the policy.
The name of the policy can be retrieved from the following OID:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>OID</th>
<th>Index</th>
</tr>
</thead>
<tbody>
<tr>
<td>cbQosPolicyMapName</td>
<td>1.3.6.1.4.1.9.9.166.1.6.1.1.1</td>
<td><strong>Service Policy Index</strong>.<strong>Object Index</strong></td>
</tr>
</tbody>
</table>
<p>A simple walk over the <code>cbQosPolicyMapName</code>:</p>
<pre><code>&gt; cbQosPolicyMapName - 1.3.6.1.4.1.9.9.166.1.6.1.1.1

1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1035] = STRING: LAN_Out
1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1063] = STRING: CPP
</code></pre><p>The problem here, is that the pair index of <code>Service Policy Index.Object Index</code> is <strong>different from the classmap object type</strong>. In order to retrieve this informaton and keep the classmap index, we must query the following OID - <code>cbQosParentObjectsIndex</code> - <code>1.3.6.1.4.1.9.9.166.1.5.1.1.4</code> that gives us the relation between objects on QoS:</p>
<p>A simple walk over the <code>cbQosParentObjectsIndex</code>:</p>
<pre><code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4

1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1043] = Gauge32: 0
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1049] = Gauge32: 1045
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1085] = Gauge32: 1051
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1099] = Gauge32: 0
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1105] = Gauge32: 1101
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1107] = Gauge32: 1099
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1109] = Gauge32: 1107

</code></pre><p>The object relates the child with the parent, so filtering the, the pair of OID from classmap we will obtain the index of the policy attached to:</p>
<pre><code>...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099
...
</code></pre><p>The index values referes to the <code>Object Index</code> from <code>PolicyMap</code>, so the new indexes that we want to build in order to query the PolicyName, must be:</p>
<pre><code>[.1043][.1043] - PolicyMap
[.1099][.1099] - PolicyMap
</code></pre><p>With the information above we need to define a new measurement, but in this case, we need to do at least 2 indirects and, in the middle modify the check condition with another indexes, so we define the measurement as <strong>&quot;(snmp Table) Indexed with multiple indirect TAG&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_mit.jpg" alt="mi-indexed_mit" title="(snmp Table) Indexed with multiple indirect TAG"></p>
<p>We fill the index with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosPolicyMapName</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve cbQosPolicyMapName</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.4</td>
<td>Base OID is the <code>cbQosParentObjectsIndex</code> which gives us the value of the config related with <code>Object Index</code> from <code>PolicyMap</code></td>
</tr>
<tr>
<td>Index Tag</td>
<td>policyMapName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Multi Tag OID</td>
<td>(*)</td>
<td>Multiple indirects to obtain the PolicyName and keep it on ClassMap pair of <code>Service Policy Index</code>.<code>Object Index</code></td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{2};DOT[0:1];SKIP</td>
<td>(**)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 3 - cbQosPolicyMapName
</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqospolicymapname_meas.jpg" alt="cbqospolicymapname_meas" title="example of definition of cbQosPolicyMapName"></p>
<p><strong>(*) Multi Tag OID</strong></p>
<p>We will define 2 TagOID:</p>
<p>TagOID 0:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Index TagOID to retrieve the <code>Object Index</code> from <code>PolicyMap</code></td>
</tr>
<tr>
<td>IndexFormat</td>
<td><code>${IDX1\|DOT[0:0]\|STRING}.$VAL1</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>This IndexFormat will modify the check condition and will create the desired index in order keep iterating over indirect tables. Following with the example:</p>
<p>The generated index is just the <code>Service Policy Index</code>.<code>Object Index</code> from <code>PolicyMap</code>, so we can use this to retrieve any parameter from <code>PolicyMapCfg</code> table, just using the same indirect as we defined on CM, but using different indexes</p>
<p>TagOID 1:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.6.1.1.1</td>
<td>Index TagOID to retrieve the PolicyMap Name</td>
</tr>
<tr>
<td>IndexFormat</td>
<td>&ndash;</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqospolicymapname_meas_index.jpg" alt="cbqospolicymapname_meas_index" title="example of definition of cbQosPolicyMapName multi TagOID"></p>
<p><strong>(**) Dependency</strong></p>
<p>In this case, we need to retrieve both indexes from the IDX{2}, the complete CMIndex <code>Service Policy Index</code>.<code>Object Index</code></p>
<p>The logic is:</p>
<ul>
<li>From BaseOID, we will retrieve the desired parent index:</li>
</ul>
<pre><code>&gt; cbQosParentObjectsIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.4
...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099
...
</code></pre><ul>
<li>On the first TagOID, it will try to retrieve the ObjectIndex, but with a modified IDX:</li>
</ul>
<pre><code>&gt; ${IDX1|DOT[0:0]|STRING}.$VAL1
[.1043][.1043]
[.1043][.1043]
[.1099][.1099]


&gt; cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1043] = Gauge32: 1035
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1109] = Gauge32: 1027
...

</code></pre><ul>
<li>And finally, the last TagOID will retrieve the policyNameMap</li>
</ul>
<pre><code>&gt; cbQosPolicyMapName - 1.3.6.1.4.1.9.9.166.1.6.1.1.1

1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1035] = STRING: LAN_Out
1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1063] = STRING: CPP
</code></pre><p>The final index will be the Base with the retrieved tags from policy name:</p>
<pre><code>[.1043][.1045] = &quot;LAN_Out&quot;
[.1043][.1051] = &quot;LAN_Out&quot;
[.1099][.1101] = &quot;CPP&quot;
</code></pre><p>At this point, the IDX{3}, will be, with heridated tags from IDX{2}:</p>
<pre><code>&gt; Index: IDX{2}

[.1043][.1045] = &quot;Te1/0/3|2|ICMP&quot;           || ifName | policyDirection | cmName
[.1043][.1051] = &quot;Te1/0/3|2|class-default&quot;  || ifName | policyDirection | cmName
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal&quot;       || ifName | policyDirection | cmName

&gt; Index: IDX{3} | cbQosPolicyMapName | IDX{2};DOT[0:1];SKIP

[.1043][.1045] = &quot;Te1/0/3|2|ICMP|LAN_Out&quot;           || ifName | policyDirection | cmName | policyMapName
[.1043][.1051] = &quot;Te1/0/3|2|class-default|LAN_Out&quot;  || ifName | policyDirection | cmName | policyMapName
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal|CPP&quot;       || ifName | policyDirection | cmName | policyMapName

</code></pre><h3 id="126-index-4--classmap-tag-cbqoscminfo">1.2.6 Index 4 | ClassMap Tag: cbQosCMInfo</h3>
<p>Once we have mapped the CMName and its related PolicyMap Name, we can also retrieve the extra info: <code>cbQosCMInfo - .1.3.6.1.4.1.9.9.166.1.7.1.1.3</code>, already present in table of <code>cbQosClassMapCfg - 1.3.6.1.4.1.9.9.166.1.7.1.1</code>, so the way to configure the measurement is exactly the same as <code>cbQosCMName</code> with the same config index.
A simple walk over <code>cbQosCMInfo</code>:</p>
<pre><code>&gt; cbQosCMInfo - .1.3.6.1.4.1.9.9.166.1.7.1.1.3

.1.3.6.1.4.1.9.9.166.1.7.1.1.3[.1025] = INTEGER: matchAny(3)
.1.3.6.1.4.1.9.9.166.1.7.1.1.3[.1029] = INTEGER: matchAll(2)
.1.3.6.1.4.1.9.9.166.1.7.1.1.3[.1057] = INTEGER: matchAny(3)
</code></pre><p>As we have an indirect tag, we will create an index with &ldquo;(snmp Table) Indexed with indirect TAG&rdquo;</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_it.jpg" alt="mi-indexed_it" title="(snmp Table) Indexed with indirect TAG"></p>
<p>We fill with the index with following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosCMInfo</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve cbQosCMInfo</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Base OID is the <code>cbQosConfigIndex</code> which gives us the value of the config related with <code>cbQosCMInfo</code> table</td>
</tr>
<tr>
<td>Index Tag OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.7.1.1.3</td>
<td><code>cbQosCMInfo</code> TagOID that will match with <code>cbQosConfigIndex</code> result</td>
</tr>
<tr>
<td>Index Tag</td>
<td>cmInfo</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{3};DOT[0:1];SKIP</td>
<td>(*)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 4 - cbQosCMInfo
</p>
<p><strong>(*) Dependency</strong></p>
<p>In this case, as the matching index is the full index and it will just heridate the IDX{3} tags</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscminfo_meas.jpg" alt="cbqoscminfo_meas" title="example of definition of cbQosCMInfo"></p>
<p>At this point, the IDX{4}, will be, with heridated tags from IDX{3}:</p>
<pre><code>&gt; Index: IDX{3}

[.1043][.1045] = &quot;Te1/0/3|2|ICMP|LAN_Out&quot;           || ifName | policyDirection | cmName | policyMapName
[.1043][.1051] = &quot;Te1/0/3|2|class-default|LAN_Out&quot;  || ifName | policyDirection | cmName | policyMapName
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal|CPP&quot;       || ifName | policyDirection | cmName | policyMapName


&gt; Index: IDX{4} | cbQosCMInfo | IDX{3};DOT[0:1];SKIP

...
[.1043][.1045] = &quot;Te1/0/3|2|ICMP|LAN_Out|&quot;           || ifName | policyDirection | cmName | policyMapName | cbQosCMInfo|3
[.1043][.1051] = &quot;Te1/0/3|2|class-default|LAN_Out|2&quot;  || ifName | policyDirection | cmName | policyMapName | cbQosCMInfo
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal|CPP|3&quot;       || ifName | policyDirection | cmName | policyMapName |cbQosCMInfo
...
</code></pre><h3 id="127-result">1.2.7 Result</h3>
<p>Finally, we setup the result of our multiindex.</p>
<p>As we have heredated all tags until the last index, we only need to setup up the result as:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Result</td>
<td>IDX{4}</td>
<td>Result of the multiindex</td>
</tr>
</tbody>
</table>
<p>And the final pair of <code>[index]:[TagValues]</code> will be:</p>
<pre><code>...
[.1043][.1045] = &quot;Te1/0/3|2|ICMP|LAN_Out|2&quot;
[.1043][.1051] = &quot;Te1/0/3|2|class-default|LAN_Out|2&quot;
[.1099][.1101] = &quot;Te1/0/3|1|NonLocal|CPP|3&quot;
...
</code></pre><h2 id="13-configuring-filters">1.3 Configuring filters</h2>
<p>As the base OID of our CMStats is directly the <code>Service Policy Index</code>.<code>Object Index</code> based on <code>cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2</code> it will generate an entry for each object index, but not only the related with CM, also the PolicyMap, MatchStmt and all available object in all stats table.</p>
<p>In order to retrieve only the desired one based on what we are retrieving, we will define a <code>Measurement Filter</code></p>
<h3 id="131-oid-condition---filter-classmap">1.3.1 OID Condition - Filter classmap</h3>
<p>We want to filter only classmap objects, so we need to define a new condition over the OID <code>cbQosObjectsType - .1.3.6.1.4.1.9.9.166.1.5.1.1.3</code></p>
<p>A simple walk over this OID:</p>
<pre><code>&gt; cbQosObjectsType - .1.3.6.1.4.1.9.9.166.1.5.1.1.3

.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1043] = INTEGER: policymap(1)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1045] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1047] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1049] = INTEGER: queueing(4)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1051] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1053] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1085] = INTEGER: queueing(4)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1099] = INTEGER: policymap(1)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1101] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1103] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1105] = INTEGER: police(7)
....

</code></pre><p>And filtered by desired one: <code>classmap(2)</code>:</p>
<pre><code>...
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1045] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1051] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1101] = INTEGER: classmap(2)
...
</code></pre><p>Go to menu and click over <code>OID Condition</code> section
Create a <code>+ New</code> OID Condition and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cbQosObjectsType_classmap</td>
<td>The unique internal ID to identify the OID Condition</td>
</tr>
<tr>
<td>Is Multiple</td>
<td>false</td>
<td>It allows to create a OID condition based on already defined ones</td>
</tr>
<tr>
<td>OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.3</td>
<td>The OID to filter based on object type</td>
</tr>
<tr>
<td>CondType</td>
<td>(neq) numeric equal</td>
<td>As the output is an integer, we will select number equal as condition type</td>
</tr>
<tr>
<td>CondValue</td>
<td>2</td>
<td>Filter only the class objects</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: OIDCondition to filter classmap objects
</p>
<h3 id="132-measurementfilter---filter-classmap">1.3.2 MeasurementFilter - Filter classmap</h3>
<p>Now, we want to create a new measurement filter with already created OID condition</p>
<p>Go to menu and click over <code>Measurement Filters</code> section
Create a <code>+ New</code> OID Condition and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cisco_qos_cbQosCMStats_classmap</td>
<td>The unique internal ID to identify the Measurement Filter</td>
</tr>
<tr>
<td>Measurements</td>
<td>cisco_qos_cbQosCMStats..cbQosPolicyMapName</td>
<td>We will select the internal index of policyMapName</td>
</tr>
<tr>
<td>Filter type</td>
<td>OID Condition</td>
<td>Filter type</td>
</tr>
<tr>
<td>Oid Condition</td>
<td>cbQosObjectsType_classmap</td>
<td>The already created OID Condition only to filter classmap objects</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Measurement filter to apply OIDCondition on CMStats
</p>
<h2 id="14-configuring-measurement-group">1.4 Configuring Measurement Group</h2>
<p>Go to menu and click over <code>Measurement Filters</code> section
Create a <code>+ New</code> Measurement Group and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>Cisco_QOS</td>
<td>The unique internal ID to identify the Measurement Group</td>
</tr>
<tr>
<td>Measurements</td>
<td>cisco_qos_cbQosCMStats</td>
<td>Measurement from cisco_qos_cbQosCMStats</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Cisco_QOS measurement group with CMStats
</p>
<h2 id="15-configuring-device">1.5 Configuring Device</h2>
<p>Attach your new measurement group and filters to the existing Device with QoS enabled</p>
<h2 id="16-reload-configuration">1.6 Reload configuration</h2>
<p>In order to reload configuration you must click on the menu item <code>Reload Config</code>. Once the SNMP Collector will receive the signal and it will try to reload all configuration. During that process you won&rsquo;t be able to navigate until the process is finished.</p>
<h2 id="17-check-your-results">1.7 Check your results!</h2>
<p>See what are you collecting from the Runtime component!</p>
<ul>
<li>Click on <code>Runtime</code> menu item</li>
<li>Find your device and check  if its actived and connected. If not, check your connection data!</li>
<li>Click  on the eye icon and see what are you collecting!!!</li>
</ul>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/runtime_qoscm.jpg" alt="runtime_qoscm" title="Example of QoS CMStats"></p>
<h1 id="2-tsstats">2. TSStats</h1>
<p>The first set of data that we want to retrieve are the TSStats</p>
<h2 id="21-configuring-metrics">2.1 Configuring metrics</h2>
<p>Available metrics are defined on <code>cbQosCMStatsTable - 1.3.6.1.4.1.9.9.166.1.15.1.1</code>.
In our example we will configure the following metrics:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Field Name</th>
<th>IsTag</th>
<th>DataSrcType</th>
<th>GetRate</th>
<th>Base OID/Extradata</th>
<th>Scale</th>
<th>Shift</th>
</tr>
</thead>
<tbody>
<tr>
<td>cisco_cbQosTSStatsDelayedByte64</td>
<td>cbQosTSStatsDelayedByte64</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.19.1.1.3</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>cisco_cbQosTSStatsDelayedPkt64</td>
<td>cbQosCMPrePolicyByte64</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.19.1.1.6</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>cisco_cbQosTSStatsDropByte64</td>
<td>cbQosCMPrePolicyBitRate</td>
<td>false</td>
<td>COUNTER64</td>
<td>false</td>
<td>.1.3.6.1.4.1.9.9.166.1.19.1.1.9</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p>As we have said, each metric will have a double index: <code>[Service Policy Index].[Object Index]</code></p>
<h2 id="12-configuring-measurements-1">1.2 Configuring measurements</h2>
<p>Let&rsquo;s start to define the measurement</p>
<h3 id="121-overview-1">1.2.1 Overview</h3>
<p>As we have defined, the TSStats needs the following tags to identify each metric:</p>
<ul>
<li>Interface</li>
<li>Direction</li>
<li>PolicyMap Name</li>
<li>ClassMap Name</li>
</ul>
<blockquote>
<p>Note that as a TS is related with ClassMap, we will retrieve also it</p>
</blockquote>
<h3 id="222-index-0--service-policy-index-tag-cbqosifindex">2.2.2 Index 0 | Service Policy Index Tag: cbQosIfIndex</h3>
<p>It is the same configuration as CMStats</p>
<p>The final output map of pairs [index]:[tag] will be:</p>
<pre><code>&gt; Index: IDX{0} | cbQosIfIndex

[.1043] = &quot;Te1/0/3&quot; || ifName
[.1099] = &quot;Te1/0/3&quot; || ifName
</code></pre><h3 id="223-index-1--service-policy-index-tag-cbqospolicydirection">2.2.3 Index 1 | Service Policy Index Tag: cbQosPolicyDirection</h3>
<p>It is the same configuration as CMStats</p>
<p>At this point, we will have that the <code>IDX{1}</code> will be:</p>
<pre><code>&gt; Index: IDX{0} | cbQosIfIndex

[.1043] = &quot;Te1/0/3&quot; || ifName
[.1099] = &quot;Te1/0/3&quot; || ifName

&gt; Index: IDX{1} | cbQosPolicyDirection | IDX{0};DOT[0:0];SKIP

[.1043] = &quot;Te1/0/3|2&quot; || ifName | policyDirection
[.1099] = &quot;Te1/0/3|1&quot; || ifName | policyDirection
</code></pre><h3 id="224-index-2--classmap-tag-cbqoscmname">2.2.4 Index 2 | ClassMap Tag: cbQosCMName</h3>
<p>As we have done on CMStats with PolicyMap name, as ClassMap is another object type, we need to iterate over relations OID - <code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4</code> in order to identify the related ClassMap</p>
<p>In this case, filtered by the matchstmt objects:</p>
<pre><code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4

...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1043] = Gauge32: 0
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045 # ts
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051 # ts
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1099] = Gauge32: 0 # policymap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101 # ts
...
</code></pre><p>So, as we have done on CMStats, we need to make a multiple indrection in order to retrieve the classmap name, so, we will create an as <strong>&quot;(snmp Table) Indexed with multiple indirect TAG&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_mit.jpg" alt="mi-indexed_mit" title="(snmp Table) Indexed with multiple indirect TAG"></p>
<p>We fill the index with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosCMName</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve cbQosCMName</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.4</td>
<td>Base OID is the <code>cbQosParentObjectsIndex</code> which gives us the value of the config related with <code>Object Index</code> from <code>ClassMap</code></td>
</tr>
<tr>
<td>Index Tag</td>
<td>cmName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Multi Tag OID</td>
<td>(*)</td>
<td>Multiple indirects to obtain the ClassMapName and keep it on ClassMap pair of <code>Service Policy Index</code>.<code>Object Index</code></td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{1};DOT[0:0];SKIP</td>
<td>(**)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 2 - cbQosCMName
</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscmname_ts_meas.jpg" alt="cbqoscmname_ts_meas" title="Example of CMName from TSStats"></p>
<p><strong>(*) Multi Tag OID</strong></p>
<p>We will define 2 TagOID:</p>
<p><em><strong>TagOID 0</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Index TagOID to retrieve the <code>Object Index</code> from <code>ClassMap</code></td>
</tr>
<tr>
<td>IndexFormat</td>
<td><code>${IDX1\|DOT[0:0]\|STRING}.$VAL1</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>This IndexFormat will modify the check condition and will create the desired index in order keep iterating over indirect tables. Following with the example:</p>
<p>The generated index is just the <code>Service Policy Index</code>.<code>Object Index</code> from <code>ClassMap</code>, so we can use this to retrieve any parameter from <code>ClassMapCFG</code> table, but using different indexes</p>
<p><em><strong>TagOID 1</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.7.1.1.1</td>
<td>Index TagOID to retrieve the ClassMap Name</td>
</tr>
<tr>
<td>IndexFormat</td>
<td>&ndash;</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscmname_meas_index.jpg" alt="cbqoscmname_meas_index" title="example of definition of cbqosCMName multi TagOID"></p>
<p><strong>(**) Dependency</strong></p>
<p>In this case, we will retrieve the  to retrieve only the <code>Service Policy Index</code> from IDX{1}</p>
<p>The logic is:</p>
<ul>
<li>From BaseOID, we will retrieve the desired parent index:</li>
</ul>
<pre><code>&gt; cbQosParentObjectsIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.4
...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101
...
</code></pre><ul>
<li>On the first TagOID, it will try to retrieve the ObjectIndex, but with a modified IDX:</li>
</ul>
<pre><code>&gt; ${IDX1|DOT[0:0]|STRING}.$VAL1
[.1043][.1045]
[.1043][.1051]
[.1099][.1101]


&gt; cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1045] = Gauge32: 1029
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1051] = Gauge32: 1025
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1101] = Gauge32: 1057
...
</code></pre><ul>
<li>And finally, the last TagOID will retrieve the CMName</li>
</ul>
<pre><code>&gt; cbQosCMName - .1.3.6.1.4.1.9.9.166.1.7.1.1.1

.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1025] = STRING: class-default
.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1029] = STRING: ICMP
.1.3.6.1.4.1.9.9.166.1.7.1.1.1[.1057] = STRING: NonLocal
</code></pre><p>The final index will be the Base with the retrieved tags from classmap name:</p>
<pre><code>[.1043][.1047] = &quot;ICMP&quot;
[.1043][.1053] = &quot;class-default&quot;
[.1099][.1103] = &quot;NonLocal&quot;
</code></pre><p>At this point, the IDX{2}, will be, with heridated tags from IDX{1}:</p>
<pre><code>&gt; Index IDX{1}:

[.1043] = &quot;Te1/0/3|2&quot; || ifName | policyDirection
[.1099] = &quot;Te1/0/3|1&quot; || ifName | policyDirection

&gt; Index: IDX{2} | cbQosCMName | IDX{1};DOT[0:0];SKIP

&gt;&gt; DOT[0:0] = [.1043] / [.1099]

[.1043][.1047] = &quot;Te1/0/3|2|ICMP&quot;           || ifName | policyDirection | cmName
[.1043][.1053] = &quot;Te1/0/3|2|class-default&quot;  || ifName | policyDirection | cmName
[.1099][.1103] = &quot;Te1/0/3|1|NonLocal&quot;       || ifName | policyDirection | cmName

</code></pre><h3 id="224-index-3--policymap-tag-policymapname">2.2.4 Index 3 | PolicyMap Tag: policyMapName</h3>
<p>As we have done on the previous index, we will try to retrieve also the  PolicyMap name, in this case, we need a double iteration to retrieve the PolicyMap parents from ClassMap- <code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4</code> in order to identify the related ClassMap</p>
<p>In this case, filtered by the matchstmt objects:</p>
<pre><code>&gt; cbQosParentObjectsIndex - 1.3.6.1.4.1.9.9.166.1.5.1.1.4

...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1043] = Gauge32: 0
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1045] = Gauge32: 1043 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045 # ts
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1051] = Gauge32: 1043 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051 # ts
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1099] = Gauge32: 0 # policymap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1101] = Gauge32: 1099 # classmap
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101 # ts
...
</code></pre><p>To do that, we will repeat the step on the Index 2, but in this case we will add a new Tag OID to go over PolicyMap objects instead of ClassMap objects</p>
<p>we will create an as <strong>&quot;(snmp Table) Indexed with multiple indirect TAG&quot;</strong></p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/multiindex_indexed_mit.jpg" alt="mi-indexed_mit" title="(snmp Table) Indexed with multiple indirect TAG"></p>
<p>We fill the index with the following field/values:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index Label</td>
<td>cbQosPolicyMapName</td>
<td>Unique SNMPCollector internal identifier of measurement</td>
</tr>
<tr>
<td>Index Description</td>
<td>Index to retrieve cbQosPolicyMapName</td>
<td>&ndash;</td>
</tr>
<tr>
<td>Index Base OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.4</td>
<td>Base OID is the <code>cbQosParentObjectsIndex</code> which gives us the value of the config related with <code>Object Index</code> from <code>PolicyMap</code></td>
</tr>
<tr>
<td>Index Tag</td>
<td>cmName</td>
<td>We will use directly the name of the field that is being retrieved, but you can set whatever you want as your Tag Key</td>
</tr>
<tr>
<td>Index Tag Format</td>
<td>&ndash;</td>
<td>We don&rsquo;t need to format the policyDirection tag, but you are free to set up whatever you want!</td>
</tr>
<tr>
<td>Multi Tag OID</td>
<td>(*)</td>
<td>Multiple indirects to obtain the ClassMapName and keep it on ClassMap pair of <code>Service Policy Index</code>.<code>Object Index</code></td>
</tr>
<tr>
<td>Index Dependency</td>
<td>IDX{2};DOT[0:1];SKIP</td>
<td>(**)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Index 3 - cbQosPolicyMapName
</p>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqospolicyname_ts_meas.jpg" alt="cbqospolicyname_ts_meas" title="Example of PolicyMapName from TSStats"></p>
<p><strong>(*) Multi Tag OID</strong></p>
<p>We will define 2 TagOID:</p>
<p><em><strong>TagOID 0</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.4</td>
<td>Index TagOID to retrieve the <code>Parent Object</code> from <code>ClassMap</code></td>
</tr>
<tr>
<td>IndexFormat</td>
<td><code>${IDX1\|DOT[0:0]\|STRING}.$VAL1</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>This IndexFormat will modify the check condition and will create the desired index in order keep iterating over indirect tables. Following with the example:</p>
<p>The generated index is just the <code>Service Policy Index</code>.<code>Object Index</code> from <code>ClassMap</code>, so we can use this to retrieve the index of <code>PolicyMap</code> related with this <code>ClassMap</code> table, but using different indexes</p>
<p><em><strong>TagOID 1</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.2</td>
<td>Index TagOID to retrieve the <code>Object Index</code> from <code>PolicyMap</code></td>
</tr>
<tr>
<td>IndexFormat</td>
<td><code>${IDX1\|DOT[0:0]\|STRING}.$VAL1</code></td>
<td></td>
</tr>
</tbody>
</table>
<p>This IndexFormat will modify the check condition and will create the desired index in order keep iterating over indirect tables. Following with the example:</p>
<p>The generated index is just the <code>Service Policy Index</code>.<code>Object Index</code> from <code>ClassMap</code>, so we can use this to retrieve any parameter from <code>ClassMapCFG</code> table, but using different indexes</p>
<p><em><strong>TagOID 2</strong></em>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Index TagOID</td>
<td>.1.3.6.1.4.1.9.9.166.1.6.1.1.1</td>
<td>Index TagOID to retrieve the PolicyMap Name</td>
</tr>
<tr>
<td>IndexFormat</td>
<td>&ndash;</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/cbqoscmname_meas_index_ts.jpg" alt="cbqoscmname_meas_index_ts" title="example of definition of cbqosPolicyMap multi TagOID"></p>
<p><strong>(**) Dependency</strong></p>
<p>In this case, we need to retrieve both indexes from the IDX{2}, the complete CMIndex <code>Service Policy Index</code>.<code>Object Index</code></p>
<p>The logic is:</p>
<ul>
<li>From BaseOID, we will retrieve the desired parent index:</li>
</ul>
<pre><code>&gt; cbQosParentObjectsIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.4
...
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1047] = Gauge32: 1045
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1043][.1053] = Gauge32: 1051
1.3.6.1.4.1.9.9.166.1.5.1.1.4[.1099][.1103] = Gauge32: 1101
...
</code></pre><ul>
<li>On the first TagOID, it will try to retrieve the cbQosParentObjectsIndex, but with a modified IDX, so we will match the related ClassMap</li>
</ul>
<pre><code>&gt; ${IDX1|DOT[0:0]|STRING}.$VAL1
[.1043][.1045]
[.1043][.1051]
[.1099][.1101]


&gt; cbQosParentObjectsIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.4

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1045] = Gauge32: 1043
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1051] = Gauge32: 1043
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1101] = Gauge32: 1099
...

</code></pre><ul>
<li>On the second TagOID, it will try to retrieve the ObjectIndex, but with a modified IDX:</li>
</ul>
<pre><code>&gt; ${IDX1|DOT[0:0]|STRING}.$VAL1
[.1043][.1043]
[.1043][.1043]
[.1099][.1099]


&gt; cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2

...
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1043][.1043] = Gauge32: 1035
.1.3.6.1.4.1.9.9.166.1.5.1.1.2[.1099][.1099] = Gauge32: 1027
...

</code></pre><ul>
<li>And finally, the last TagOID will retrieve the policyNameMap</li>
</ul>
<pre><code>&gt; cbQosPolicyMapName - 1.3.6.1.4.1.9.9.166.1.6.1.1.1

1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1035] = STRING: LAN_Out
1.3.6.1.4.1.9.9.166.1.6.1.1.1[.1063] = STRING: CPP
</code></pre><p>The final index will be the Base with the retrieved tags from policy name:</p>
<pre><code>[.1043][.1047] = &quot;LAN_Out&quot;
[.1043][.1053] = &quot;LAN_Out&quot;
[.1099][.1103] = &quot;CPP&quot;
</code></pre><p>At this point, the IDX{3}, will be, with heridated tags from IDX{2}:</p>
<pre><code>&gt; Index: IDX{2}

[.1043][.1047] = &quot;Te1/0/3|2|ICMP&quot;           || ifName | policyDirection | cmName
[.1043][.1053] = &quot;Te1/0/3|2|class-default&quot;  || ifName | policyDirection | cmName
[.1099][.1103] = &quot;Te1/0/3|1|NonLocal&quot;       || ifName | policyDirection | cmName

&gt; Index: IDX{3} | cbQosPolicyMapName | IDX{2};DOT[0:1];SKIP

[.1043][.1047] = &quot;Te1/0/3|2|ICMP|LAN_Out&quot;           || ifName | policyDirection | cmName | policyMapName
[.1043][.1053] = &quot;Te1/0/3|2|class-default|LAN_Out&quot;  || ifName | policyDirection | cmName | policyMapName
[.1099][.1103] = &quot;Te1/0/3|1|NonLocal|CPP&quot;       || ifName | policyDirection | cmName | policyMapName

</code></pre><h3 id="224-result">2.2.4 Result</h3>
<p>Finally, we setup the result of our multiindex.</p>
<p>As we have heredated all tags until the last index, we only need to setup up the result as:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Result</td>
<td>IDX{3}</td>
<td>Result of the multiindex</td>
</tr>
</tbody>
</table>
<p>And the final pair of <code>[index]:[TagValues]</code> will be:</p>
<pre><code>...
[.1043][.1047] = &quot;Te1/0/3|2|ICMP|LAN_Out&quot;
[.1043][.1053] = &quot;Te1/0/3|2|class-default|LAN_Out&quot;
[.1099][.1103] = &quot;Te1/0/3|1|NonLocal|CPP&quot;
...
</code></pre><h2 id="23-configuring-filters">2.3 Configuring filters</h2>
<p>As the base OID of our CMStats is directly the <code>Service Policy Index</code>.<code>Object Index</code> based on <code>cbQosConfigIndex - .1.3.6.1.4.1.9.9.166.1.5.1.1.2</code> it will generate an entry for each object index, but not only the related with CM, also the PolicyMap, MatchStmt and all available object in all stats table.</p>
<p>In order to retrieve only the desired one based on what we are retrieving, we will define a <code>Measurement Filter</code></p>
<h3 id="231-oid-condition---filter-ts">2.3.1 OID Condition - Filter TS</h3>
<p>We want to filter only classmap objects, so we need to define a new condition over the OID <code>cbQosObjectsType - .1.3.6.1.4.1.9.9.166.1.5.1.1.3</code></p>
<p>A simple walk over this OID:</p>
<pre><code>&gt; cbQosObjectsType - .1.3.6.1.4.1.9.9.166.1.5.1.1.3

.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1043] = INTEGER: policymap(1)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1045] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1047] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1049] = INTEGER: queueing(4)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1051] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1053] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1085] = INTEGER: queueing(4)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1099] = INTEGER: policymap(1)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1101] = INTEGER: classmap(2)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1103] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1105] = INTEGER: police(7)
....

</code></pre><p>And filtered by desired one: <code>trafficShaping(6)</code>:</p>
<pre><code>...
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1047] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1043][.1053] = INTEGER: trafficShaping(6)
.1.3.6.1.4.1.9.9.166.1.5.1.1.3[.1099][.1103] = INTEGER: trafficShaping(6)
...
</code></pre><p>Go to menu and click over <code>OID Condition</code> section
Create a <code>+ New</code> OID Condition and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cbQosObjectsType_trafficShaping</td>
<td>The unique internal ID to identify the OID Condition</td>
</tr>
<tr>
<td>Is Multiple</td>
<td>false</td>
<td>It allows to create a OID condition based on already defined ones</td>
</tr>
<tr>
<td>OID</td>
<td>.1.3.6.1.4.1.9.9.166.1.5.1.1.3</td>
<td>The OID to filter based on object type</td>
</tr>
<tr>
<td>CondType</td>
<td>(neq) numeric equal</td>
<td>As the output is an integer, we will select number equal as condition type</td>
</tr>
<tr>
<td>CondValue</td>
<td>6</td>
<td>Filter only the class objects</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: OID Condition to filter trafficShaping
</p>
<h3 id="232-measurementfilter---filter-classmap">2.3.2 MeasurementFilter - Filter classmap</h3>
<p>Now, we want to create a new measurement filter with already created OID condition</p>
<p>Go to menu and click over <code>Measurement Filters</code> section
Create a <code>+ New</code> OID Condition and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>cisco_qos_cbQosTSStats_trafficShaping</td>
<td>The unique internal ID to identify the Measurement Filter</td>
</tr>
<tr>
<td>Measurements</td>
<td>cisco_qos_cbQosTSStats..cbQosPolicyMapName</td>
<td>We will select the internal index of policyMapName</td>
</tr>
<tr>
<td>Filter type</td>
<td>OID Condition</td>
<td>Filter type</td>
</tr>
<tr>
<td>Oid Condition</td>
<td>cbQosObjectsType_trafficShaping</td>
<td>The already created OID Condition only to filter classmap objects</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Measurement filter to apply OIDCondition on TSStats
</p>
<h2 id="24-configuring-measurement-group">2.4 Configuring Measurement Group</h2>
<p>Go to menu and click over <code>Measurement Filters</code> section
Create a <code>+ New</code> Measurement Group and fill it with:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ID</td>
<td>Cisco_QOS</td>
<td>The unique internal ID to identify the Measurement Group</td>
</tr>
<tr>
<td>Measurements</td>
<td>cisco_qos_cbQosTSStats</td>
<td>Measurement from cisco_qos_cbQosTSStats</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Cisco_QOS measurement group with TSStats
</p>
<h2 id="25-configuring-device">2.5 Configuring Device</h2>
<p>Attach your new measurement group and filters to the existing Device with QoS enabled</p>
<h2 id="26-reload-configuration">2.6 Reload configuration</h2>
<p>In order to reload configuration you must click on the menu item <code>Reload Config</code>. Once the SNMP Collector will receive the signal and it will try to reload all configuration. During that process you won&rsquo;t be able to navigate until the process is finished.</p>
<h2 id="27-check-your-results">2.7 Check your results!</h2>
<p>See what are you collecting from the Runtime component!</p>
<ul>
<li>Click on <code>Runtime</code> menu item</li>
<li>Find your device and check  if its actived and connected. If not, check your connection data!</li>
<li>Click  on the eye icon and see what are you collecting!!!</li>
</ul>
<p><img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/images/webUI/Examples/QoS/runtime_qosts.jpg" alt="runtime_qosts" title="Example of QoS TSStats"></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f36a5fdcc98c0bf39b8b1adf455af28d">7.2 - Configuring Cisco Catalyst with basic metrics</h1>
    
	<h1 id="example-configuring-cisco-catalyst-with-basic-metrics">Example: Configuring Cisco Catalyst with basic metrics</h1>
<p>This example will show up how to configure a Cisco Catalyst on snmpcollector</p>
<h2 id="0-prerequisites--what-and-from-we-are-going-to-collect-our-data">0. Prerequisites : What and from we are going to collect our data?</h2>
<h3 id="01-snmp-device-model">0.1 SNMP Device model</h3>
<p>In order to select the correct metrics for our device, we must check first what model it is.
If you don&rsquo;t know the model, you can pre-add the device on SNMP Device Component and do a test connection. To do that:</p>
<ul>
<li>Click on <code>SNMP Device</code> menu item</li>
<li>A table with configured devices will show up. Press &ldquo;New&rdquo; button or edit an existing one to access to the configuration form.</li>
<li>Fill the device with the basic connection information</li>
<li>If everything is OK, you will be able to do a &ldquo;Test Connection&rdquo;. This button will show up a console with System information  of the Device.</li>
</ul>
<h3 id="02-select-metrics-to-collect-data">0.2 Select metrics to collect data</h3>
<p>The first step is selecting what metrics we want to collect. For this we can check for Cisco docs and defined MIBs like:</p>
<ul>
<li><a href="http://www.cisco.com/c/en/us/td/docs/net_mgmt/prime/infrastructure/3-1/user/guide/pi_ug/mon-pol-thresh.html">Cisco Doc</a></li>
<li><a href="http://www.cisco.com/c/en/us/support/docs/ip/simple-network-management-protocol-snmp/15215-collect-cpu-util-snmp.pdf">Cisco Example</a></li>
</ul>
<p>In this example, we are going to collect the following metrics to provide basic interface and performance status of our switch.</p>
<ul>
<li><strong>Basic Metrics</strong></li>
</ul>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>MIB</th>
<th>OID</th>
<th>Indexed</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifHCInOctets</td>
<td>IF-MIB</td>
<td>.1.3.6.1.2.1.31.1.1.1.6</td>
<td>ifName</td>
</tr>
<tr>
<td>ifHCOutOctets</td>
<td>IF-MIB</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
<td>ifName</td>
</tr>
<tr>
<td>ifHighSpeed</td>
<td>IF-MIB</td>
<td>.1.3.6.1.2.1.31.1.1.1.15</td>
<td>ifName</td>
</tr>
<tr>
<td>ifAlias</td>
<td>IF-MIB</td>
<td>.1.3.6.1.2.1.31.1.1.1.18</td>
<td>ifName</td>
</tr>
<tr>
<td>ciscoMemoryPoolUsed</td>
<td>CISCO-MEMORY-POOL-MIB</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.5</td>
<td>ciscoMemoryPoolName</td>
</tr>
<tr>
<td>ciscoMemoryPoolFree</td>
<td>CISCO-MEMORY-POOL-MIB</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.6</td>
<td>ciscoMemoryPoolName</td>
</tr>
<tr>
<td>cpmCPUTotal1minRev</td>
<td>CISCO-MEMORY-POOL-MIB</td>
<td>.1.3.6.1.4.1.9.9.109.1.1.1.1.7</td>
<td>cpmCPUTotalPhysicalIndex (depending on model)</td>
</tr>
</tbody>
</table>
<p align="center">
   :information_source: Basic Metrics table
</p>
<p>In order to give more generic information, we will define the following extended metrics. On the next point we will see how to configure them.</p>
<ul>
<li><strong>Extended Metrics</strong></li>
</ul>
<table>
<thead>
<tr>
<th>Metric Name</th>
<th>Formula</th>
<th>Indexed</th>
</tr>
</thead>
<tbody>
<tr>
<td>InputUtilization</td>
<td>((ifHCInOctets * 8)/(ifHighSpeed * 1000000)) * 100</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
</tr>
<tr>
<td>OutputUtilization</td>
<td>((ifHCOutOctets * 8)/(ifHighSpeed * 1000000)) * 100</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
</tr>
<tr>
<td>ciscoMemoryPool_utilization_percent</td>
<td>(ciscoMemoryPoolUsed/ciscoMemoryPoolFree+ciscoMemoryPoolUsed) * 100</td>
<td>.1.3.6.1.2.1.31.1.1.1.15</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Extended Metric table
</p>
<h2 id="1-configuring-metrics">1. Configuring Metrics</h2>
<p>Once we have defined our metrics its time to configure them on our SNMPCollector Instance:</p>
<ul>
<li>Click on <code>SNMP Metric</code> menu item</li>
<li>Click <code>+New</code> button. The metric form will show up.</li>
</ul>
<p><em>Notes:</em></p>
<ul>
<li>On <code>Counter32/64</code> metric type you can define <code>COUNTER32/64</code> as DataSrcType, which computes the difference between iterations. It only works with really counter behaivour.</li>
<li><code>IsTag</code> option allows to set the value as tag. The tag key will be defined as <code>Field Name</code></li>
<li><code>GetRate</code> option only works when <code>COUNTERNN</code> as DataSrcType. It divides the result of the computed difference by the elapsed time between polls.</li>
<li>Remember that you can always test your OIDs on SNMP Console from our pre-added SNMP Device</li>
</ul>
<p><em>Recomendations:</em></p>
<ul>
<li>In order to identify all your components IDs, we recommend you to set some prefix when you are configuring them. This will allow to find faster and set up devices easier. In this example, if.* Metrics are coming from a MIB that can be shared for more than one device type. For the CPU/Mem metrics, we will use the prefix <code>Cisco_Catalyst</code></li>
</ul>
<h3 id="11-configure-basic-metrics">1.1 Configure Basic metrics</h3>
<table>
<thead>
<tr>
<th>ID</th>
<th>Field Name</th>
<th>IsTag</th>
<th>DataSrcType</th>
<th>GetRate</th>
<th>Base OID/Extradata</th>
<th>Scale</th>
<th>Shift</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifHCInOctets</td>
<td>ifHCInOctets</td>
<td>false</td>
<td>COUNTER64</td>
<td>true</td>
<td>.1.3.6.1.2.1.31.1.1.1.6</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>ifHCOutOctets</td>
<td>ifHCOutOctets</td>
<td>false</td>
<td>COUNTER64</td>
<td>true</td>
<td>.1.3.6.1.2.1.31.1.1.1.10</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>ifHighSpeed</td>
<td>ifHighSpeed</td>
<td>false</td>
<td>Gauge32</td>
<td>true</td>
<td>.1.3.6.1.2.1.31.1.1.1.15</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>ifAlias</td>
<td>ifAlias</td>
<td>true</td>
<td>OCTETSTRNG</td>
<td>&ndash;</td>
<td>.1.3.6.1.2.1.31.1.1.1.18</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Cisco_Catalyst_ciscoMemoryPoolUsed</td>
<td>memUsed</td>
<td>false</td>
<td>Gauge32</td>
<td>&ndash;</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.5</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Cisco_Catalyst_ciscoMemoryPoolFree</td>
<td>memFree</td>
<td>false</td>
<td>Gauge32</td>
<td>&ndash;</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.6</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Cisco_Catalyst_cpmCPUTotal1minRev</td>
<td>cpuUsed</td>
<td>false</td>
<td>Gauge32</td>
<td>&ndash;</td>
<td>.1.3.6.1.4.1.9.9.109.1.1.1.1.7</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: SNMP Basic Metrics configuration
</p>
<p>Once you get all your basic metrics, it is time to configure the extended ones:</p>
<h3 id="12-configure-extended-metrics">1.2 Configure Extended metrics</h3>
<table>
<thead>
<tr>
<th>ID</th>
<th>Field Name</th>
<th>IsTag</th>
<th>DataSrcType</th>
<th>GetRate</th>
<th>Base OID/Extradata</th>
<th>Scale</th>
<th>Shift</th>
</tr>
</thead>
<tbody>
<tr>
<td>InputUtilization</td>
<td>InputUtilization</td>
<td>false</td>
<td>STRINGEVAL</td>
<td>&ndash;</td>
<td>((ifHCInOctets * 8)/(ifHighSpeed * 1000000)) * 100</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>OutputUtilization</td>
<td>OutputUtilization</td>
<td>false</td>
<td>STRINGEVAL</td>
<td>&ndash;</td>
<td>((ifHCOutOctets * 8)/(ifHighSpeed * 1000000)) * 100</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>Cisco_ciscoMemoryPool_utilization_percent</td>
<td>memUtilization</td>
<td>false</td>
<td>STRINGEVAL</td>
<td>&ndash;</td>
<td>(ciscoMemoryPoolUsed/ciscoMemoryPoolFree+ciscoMemoryPoolUsed) * 100</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: SNMP Extended Metrics configuration
</p>
<h2 id="2-configuring--measurements">2. Configuring  Measurements</h2>
<p>Once we have our metrics configured, its time to define where and how we want to store them in InfluxDB data structure: measurements.</p>
<p><em>Recomendations:</em></p>
<ul>
<li>If a collection of metrics are defined with the same index OID, try to set up them on the same measurement. This will reduce the number of walks to create the indexes and filterings rules.</li>
<li>Try to define the measurement name with a easy identifier to make configuring the devices easier for you.</li>
<li>If you are going to define metrics with &lsquo;nonZero&rsquo; report, remember that if the metric is not already defined on InfluxDB you won&rsquo;t be able to query it. We recommend you to create the metrics for few minutes and then change the report status to desired <code>nonZero</code>.</li>
</ul>
<p>To create a measurement:</p>
<ul>
<li>Click on Measurement menu item</li>
<li>Click <code>+New</code> button. The measurement form will show up.</li>
</ul>
<h3 id="21-ifmib-measurement">2.1 ifMIB Measurement</h3>
<p>The following metrics have the same index on the table and are coming from the same MIB, so we create a new measurement with ifMIB basic + extended metrics.</p>
<p>In our example, we are only interested of computed metrics, so, we need set the right report status of each one:</p>
<dd>:no_entry_sign:-ifHCInOctets</dd>
<dd>:no_entry_sign:-ifHCOutOctets</dd>
<dd>:no_entry_sign:-ifHighSpeed</dd>
<dd>:no_entry_sign:-ifAlias</dd>
<dd>:white_check_mark:-InputUtilization</dd>
<dd>:white_check_mark:-OutputUtilization</dd>
<br>
_Notes_:
<ul>
<li>As the defined extended metrics are computed, we need to add relational needed metrics on the same measurement.</li>
</ul>
<p>We define the Cisco_ifMIB_Basics measurement which will group all metrics. Remember that they are indexed with the name of the interfaces, so we need to set up like this:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>GetMode</th>
<th>Index OID</th>
<th>Tag OID</th>
<th>Index Tag</th>
<th>Index Tag Format</th>
<th>Index as Value</th>
<th>Metric Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_ifMIB_Basics</td>
<td>cisco_ifMib_basics</td>
<td>indexed</td>
<td>.1.3.6.1.2.1.2.2.1.2</td>
<td>&ndash;</td>
<td>portName</td>
<td>&ndash;</td>
<td>false</td>
<td><em>#BASICS</em>:<ul><li>ifHCInOctets</span></li><li>ifHCOutOctets</li> <li>ifHighSpeed</li><li>ifAlias</li></ul><em>#EXTENDED</em>:<ul><li>InputUtilization</li><li>OutputUtilization</li></ul></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifMIB Measurement configuration
</p>
<h3 id="22-cisco-memory-measurement">2.2 Cisco Memory Measurement</h3>
<p>Let&rsquo;s configure the Cisco Memory measurement. As we did on the ifMIB metrics, we need to have clear what metrics are we going to send. In our case, we are interested on send only the % usage of the Memory, so:</p>
<dd>:no_entry_sign:-Cisco_Catalyst_ciscoMemoryPoolUsed </dd>
<dd>:no_entry_sign:-Cisco_Catalyst_ciscoMemoryPoolFree </dd>
<dd>:white_check_mark:-Cisco_ciscoMemoryPool_utilization_percent </dd>
<br/>
<p>So we  create the new Measurement with the following configuration:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>GetMode</th>
<th>Index OID</th>
<th>Tag OID</th>
<th>Index Tag</th>
<th>Index Tag Format</th>
<th>Index as Value</th>
<th>Metric Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_Catalyst_ciscoMemoryPool</td>
<td>cisco_catalyst_ciscoMemoryPool</td>
<td>indexed</td>
<td>.1.3.6.1.4.1.9.9.48.1.1.1.2</td>
<td>&ndash;</td>
<td>memIndex</td>
<td>&ndash;</td>
<td>false</td>
<td><em>#BASICS</em>:<ul><li>Cisco_Catalyst_ciscoMemoryPoolUsed</li><li>Cisco_Catalyst_ciscoMemoryPoolFree</li></ul><em>#EXTENDED</em>:<ul><li>Cisco_ciscoMemoryPool_utilization_percent</li></ul></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco Memory Measurement configuration
</p>
<h3 id="23-cisco-cpu-measurement">2.3 Cisco CPU Measurement</h3>
<p>Our last measurement: Cisco CPU. This OID is indexed by a double index:</p>
<p>In order to identify the physical entity to which these values correspond, we must poll the following MIB Object : cpmCPUTotalPhysicalIndex:</p>
<table>
<thead>
<tr>
<th>MIB Object</th>
<th>OID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cpmCPUTotalPhysicalIndex</td>
<td>1.3.6.1.4.1.9.9.109.1.1.1.1.2</td>
<td>Returns the index assigned on entPhysicalName</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: cpmCPUTotalPhysicalIndex MIB Object
</p>
With those values we can get the assigned name of each CPU Module from the following OID:
<table>
<thead>
<tr>
<th>MIB Object</th>
<th>OID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>entPhysicalName</td>
<td>1.3.6.1.2.1.47.1.1.1.1.7</td>
<td>Returns the name of each CPU Module</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: entPhysicialName MIB Object
</p>
<p>Once we get our double indexed resolved we can configure our measurement&hellip; but before that, we must check out what would happen if the CPU Module are set up with the same name? The SNMPCollector will create 2 points with the same tag/field set, so it will only send 1 value!</p>
<p>In order to solve that, we can add an <code>Index Tag Format</code>. The SNMP Collector generates the following vars each time it does an Indexing operation:</p>
<ul>
<li><code>IndexOID</code> returns <code>$IDX1</code> and <code>$VAL1</code></li>
<li><code>Tag OID</code> returns <code>$IDX2</code> and <code>$VAL2</code></li>
</ul>
<p>So to distinguish some CPU with the same name we must set up the <code>Index Tag Format</code> with <code>$VAL2 - $IDX1</code>.</p>
<p>i.e: Tag set : <code>CPU Module 1 - 8</code></p>
<ul>
<li><code>$VAL2 = CPU Module 1</code> is the result of the entPhysicalName poll</li>
<li><code>$IDX1 = 8</code> is the index of entry table.</li>
</ul>
<p>With all cases checked, we can finally add our measurement:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
<th>GetMode</th>
<th>Index OID</th>
<th>Tag OID</th>
<th>Index Tag</th>
<th>Index Tag Format</th>
<th>Index as Value</th>
<th>Metric Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_Catalyst_CiscoProcessMIB</td>
<td>cisco_catalyst_ciscoProcessMib</td>
<td>indexed_it</td>
<td>.1.3.6.1.4.1.9.9.109.1.1.1.1.2</td>
<td>.1.3.6.1.2.1.47.1.1.1.1.7</td>
<td>physIndex</td>
<td>$VAL2-$IDX1</td>
<td>false</td>
<td><em>#BASICS</em>:<ul><li>Cisco_Catalyst_cpmCPUTotal1minRev</li></ul></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco CPU Measurement configuration
</p>
<h2 id="3-configure-measurement-groups">3. Configure Measurement Groups</h2>
<p>Now, its time to create a template for all Cisco Catalyst switches!</p>
<ul>
<li>Click on <code>Measurement</code> Group from menu item</li>
<li>Press <code>+New</code> button or edit an existing one to access to the configuration form.</li>
</ul>
<p>Measurement Groups is a virtual group of measurements, it allows to have different templates in order to configure devices on a really easy way!</p>
<p>We don&rsquo;t have to  do any especial here, we only must to set up the ID and select the different measurement that are going to be part of our template:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_Catalyst_Template_Basic</td>
<td><ul><li>Cisco_ifMIB_Basics</li><li>Cisco_Catalyst_ciscoMemoryPool</li><li>Cisco_Catalyst_CiscoProcessMIB </li></ul></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco_Catalyst_Template Measurement Group configuration
</p>
<h2 id="4-configure-oid-conditions">4. Configure OID Conditions</h2>
<p>On this point we are now able to poll all data configured in our metrics. But lets do something more complex!
Lets filter what do we want to send, it is time to create some OIDs Conditions!</p>
<p>In our example we will work with the following requirements:</p>
<ul>
<li>(1) We only want the interfaces with UP state</li>
<li>(2) We only want the physical Eth interfaces</li>
</ul>
<p>So the result would be translated as: we only want those that comply with the following <code>(1) &amp;&amp; (2)</code></p>
<p>To do that, we need to create a total of three OID conditions, lets configure all:</p>
<ul>
<li>Click on <code>OID Condtions</code> item on menu</li>
<li>Click <code>+New</code> button. The measurement form will show up.</li>
</ul>
<h3 id="41-interfaces-with-up-status-condition">4.1 Interfaces with UP status condition</h3>
<p>The MIB object that returns that information is the ifOperStatus</p>
<table>
<thead>
<tr>
<th>MIB Object</th>
<th>OID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifOperStatus</td>
<td>1.3.6.1.2.1.2.2.1.8</td>
<td>Return the status of the interface: <dd>up(1), down(2), testing(3)</dd></td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifOperStatus MIB Object
</p>
<p>We only want the up interfaces so <code>numerical equal than 1</code>. Let&rsquo;s create a OID Condition with the following configuration:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Is Multiple</th>
<th>OID</th>
<th>CondType</th>
<th>CondValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifOperStatus_UP</td>
<td>false</td>
<td>.1.3.6.1.2.1.2.2.1.8</td>
<td>neq</td>
<td>1</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifOperStatus_UP OID Condition configuration
</p>
<h3 id="42-interfaces-eth-like">4.2 Interfaces ETH like</h3>
<p>The MIB object that returns that information is the ifType</p>
<table>
<thead>
<tr>
<th>MIB Object</th>
<th>OID</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifType</td>
<td>1.3.6.1.2.1.2.2.1.3</td>
<td>The type of interface, distinguished according to the physical/link protocol</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifType MIB Object
</p>
<p>The eth are <code>ifType = 6</code>, so we need to configure a new OID Condition:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Is Multiple</th>
<th>OID</th>
<th>CondType</th>
<th>CondValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>ifType_ETH</td>
<td>false</td>
<td>.1.3.6.1.2.1.2.2.1.3</td>
<td>neq</td>
<td>6</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: ifType_ETH OID Condition configuration
</p>
### 4.3 Mutiple OID Condition: UP && ETH
<p>In order to apply a multiple condition we need to activate the configuration flag <code>Is Multiple</code> and set the field <code>OID Condition</code> with the logical combination of already created ones:</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Is Multiple</th>
<th>OID Condition</th>
<th>CondType</th>
<th>CondValue</th>
</tr>
</thead>
<tbody>
<tr>
<td>interfaces_ETH_UP</td>
<td>true</td>
<td>ifOperStatus_UP &amp;&amp; ifType_ETH</td>
<td>neq</td>
<td>6</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: interfaces_ETH_UP Multiple Condition configuration
</p>
<h2 id="5-configure-measurement-filters">5. Configure Measurement Filters</h2>
<p>Once we have our OID Conditions configured, lets put them on a Measurement Filter. The measurement filter is applied on measurement with Indexed/Tag OIDs.</p>
<p>In our case, we need to create the filter in our ifMIB measurement to only get those interfaces that are UP and are Ethernet like.</p>
<p>To to that, lets create a Measurement Filter:</p>
<ul>
<li>Click on <code>Measurement Filters</code> menu</li>
<li>Click <code>+New</code> button. The filter form will show up.</li>
</ul>
<p>Lets fill our Measurement filter.</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Measurements</th>
<th>Filter Type</th>
<th>OID Condition</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cisco_ifMIB_UP_ETH</td>
<td>Cisco_ifMIB_Basics</td>
<td>OID Condition</td>
<td>interfaces_ETH_UP</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco_ifMIB_UP_ETH Measurement Filter configuration
</p>
<h2 id="6-configure-snmp-device">6. Configure SNMP Device</h2>
<p>Lets do a check what we have done until now:</p>
<ul>
<li>We defined our core basic metrics to get performance and port statistics of our device!</li>
<li>We defined 3 different measurements with complex indexes that allows to get every entry of metric objects without overlapping!</li>
<li>We defined a Basic Template that allows us to configure a new device in less than 1 minute!</li>
<li>We defined 3 OID Conditions and created a filter to only get ETH and UP interfaces!</li>
</ul>
<p>So its time to add our device and attach our already created components:</p>
<p><em>Note</em>:</p>
<ul>
<li>To simplfy the following configuration, we will skip connection data fields.</li>
</ul>
<table>
<thead>
<tr>
<th>ID</th>
<th>ConnectionData</th>
<th>Measurement Groups</th>
<th>Measurement Filters</th>
</tr>
</thead>
<tbody>
<tr>
<td>myCisco_Catalyst</td>
<td>&hellip;.</td>
<td>Cisco_Catalyst_Template_Basic</td>
<td>Cisco_ifMIB_UP_ETH</td>
</tr>
</tbody>
</table>
<p align="center">
  :information_source: Cisco SNMP Device configuration
</p>
<h2 id="7-reload-configuration">7. Reload configuration</h2>
<p>In order to reload configuration you must click on the menu item <code>Reload Config</code>. Once the SNMP Collector will receive the signal and it will try to reload all configuration. During that process you won&rsquo;t be able to navigate until the process is finished.</p>
<h2 id="8-check-your-results">8. Check your results!</h2>
<p>See what are you collecting from the Runtime component!</p>
<ul>
<li>Click on <code>Runtime</code> menu item</li>
<li>Find your device and check  if its actived and connected. If not, check your connection data!</li>
<li>Click  on the eye icon and see what are you collecting!!!</li>
</ul>
<p>You must check the Metrics Info panel:</p>
<ul>
<li>Check that the are our 3 defined Measurements</li>
<li>Click on every measurement and check  the created Metrics and its value</li>
<li>Check the indexes are correct and that the filters are applied correctly on our ifMIB measurement!</li>
</ul>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8df6ea6904416b571ff9bc73afb50933">8 - Reference</h1>
    <div class="lead">Low level reference docs for your project.</div>
	

<div class="pageinfo pageinfo-primary">
<p>This is a placeholder page that shows you how to use this template site.</p>

</div>

<p>If your project has an API, configuration, or other reference - anything that users need to look up that’s at an even lower level than a single task - put (or link to it) here. You can serve and link to generated reference docs created using Doxygen,
Javadoc, or other doc generation tools by putting them in your <code>static/</code> directory. Find out more in <a href="https://docsy.dev/docs/adding-content/content/#adding-static-content">Adding static content</a>. For OpenAPI reference, Docsy also provides a <a href="https://www.docsy.dev/docs/adding-content/shortcodes/#swaggerui">Swagger UI layout and shortcode</a> that renders <a href="https://swagger.io/tools/swagger-ui/">Swagger UI</a> using any OpenAPI YAML or JSON file as source.</p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b4844bf7ad55d40af2d1321689461651">8.1 - Public Device Dashboard templates</h1>
    
	<p>From this page you will be able to download a definition and a dashboard from some popular devices/products.</p>
<h2 id="import-instructions">Import Instructions</h2>
<h3 id="snmpcollector-template">SnmpCollector Template</h3>
<ol>
<li>Download the json file and Import it, after you will see a new device with id=&ldquo;localhost&rdquo;</li>
<li>Change the ID , host , port to define your linux box device, and test connectivity with the snmp connection tool</li>
<li>Change the imported InfluxDB server to any of your previously defined influx servers</li>
</ol>
<h3 id="grafana-template">Grafana Template</h3>
<ol>
<li>Download the json file and import it. Make sure you have been created the influx datasource before.</li>
</ol>
<h2 id="template-list">Template List</h2>
<table>
<thead>
<tr>
<th>Product</th>
<th>SnmpCollector Template</th>
<th>Grafana Template</th>
<th>Detailed Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Linux based Devices</td>
<td><a href="https://raw.githubusercontent.com/toni-moreno/snmpcollector/gh-pages/templates/linux_based_device/snmpcollector_LINUX_BASED_DEVICE_20170712.json">Linux SnmpCollector Template</a></td>
<td><a href="https://raw.githubusercontent.com/toni-moreno/snmpcollector/gh-pages/templates/linux_based_device/Grafana_LINUX%20BASED_DEVICE-20170712.jsonhttps://raw.githubusercontent.com/toni-moreno/snmpcollector/gh-pages/templates/linux_based_device/Grafana_LINUX%20BASED_DEVICE-20170712.json">Linux Grafana Template</a></td>
<td>This template will get cpu/memory/disk/fs/netio metrics from any Linux based devices with a net-snmp agent running on it, most linux based appliances will work with these templates <img src="https://github.com/toni-moreno/snmpcollector/blob/gh-pages/templates/linux_based_device/linux_based_devices_screenshot.JPG?raw=true" alt="linux"></td>
</tr>
</tbody>
</table>

</div>



    
	
  

    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/toni-moreno/snmpcollector">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 The Docsy Authors All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>






 











<script src="/snmpcollector.org/js/main.min.896cb6dbfd99311917f617f11a34a008f8af4bcb5d6468ae4559425dfffc6ebe.js" integrity="sha256-iWy22/2ZMRkX9hfxGjSgCPivS8tdZGiuRVlCXf/8br4=" crossorigin="anonymous"></script>




  </body>
</html>
